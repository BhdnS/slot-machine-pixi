import{_ as k,a as w,P as E,r as ae,E as O,T as W,b as le,c as X,d as Y,w as P,e as ue,f as A,g as he,h as ne,C as re}from"./index-e9a6487e.js";import"./init-4384c4d1.js";import"./colorToUniform-e74e556a.js";import"./CanvasPool-b559b4fe.js";import"./batchSamplersUniformGroup-77861437.js";var R=function(){function a(r){w(this,a),this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=a.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new E,this.page=new E,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=r}return k(a,[{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"data",get:function(){return this}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"initEvent",value:function(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"initUIEvent",value:function(e,t,i,n,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),a}(),S=/iPhone/i,G=/iPod/i,N=/iPad/i,H=/\biOS-universal(?:.+)Mac\b/i,U=/\bAndroid(?:.+)Mobile\b/i,j=/Android/i,M=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,x=/Silk/i,b=/Windows Phone/i,z=/\bWindows(?:.+)ARM\b/i,$=/BlackBerry/i,Z=/BB10/i,V=/Opera Mini/i,q=/\b(CriOS|Chrome)(?:.+)Mobile/i,J=/Mobile(?:.+)Firefox\b/i,Q=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function de(a){return function(r){return r.test(a)}}function ee(a){var r={userAgent:"",platform:"",maxTouchPoints:0};!a&&typeof navigator<"u"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof a=="string"?r.userAgent=a:a&&a.userAgent&&(r={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0});var e=r.userAgent,t=e.split("[FBAN");typeof t[1]<"u"&&(e=t[0]),t=e.split("Twitter"),typeof t[1]<"u"&&(e=t[0]);var i=de(e),n={apple:{phone:i(S)&&!i(b),ipod:i(G),tablet:!i(S)&&(i(N)||Q(r))&&!i(b),universal:i(H),device:(i(S)||i(G)||i(N)||i(H)||Q(r))&&!i(b)},amazon:{phone:i(M),tablet:!i(M)&&i(x),device:i(M)||i(x)},android:{phone:!i(b)&&i(M)||!i(b)&&i(U),tablet:!i(b)&&!i(M)&&!i(U)&&(i(x)||i(j)),device:!i(b)&&(i(M)||i(x)||i(U)||i(j))||i(/\bokhttp\b/i)},windows:{phone:i(b),tablet:i(z),device:i(b)||i(z)},other:{blackberry:i($),blackberry10:i(Z),opera:i(V),firefox:i(J),chrome:i(q),device:i($)||i(Z)||i(V)||i(J)||i(q)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}var F,pe=(F=ee.default)!==null&&F!==void 0?F:ee,ve=pe(globalThis.navigator),ce=9,L=100,fe=0,ye=0,te=2,ie=1,ge=-1e3,me=-1e3,_e=2,oe=function(){function a(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ve;w(this,a),this._mobileInfo=e,this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook();var t=document.createElement("div");t.style.width="".concat(L,"px"),t.style.height="".concat(L,"px"),t.style.position="absolute",t.style.top="".concat(fe,"px"),t.style.left="".concat(ye,"px"),t.style.zIndex=te.toString(),this._div=t,this._renderer=r,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return k(a,[{key:"isActive",get:function(){return this._isActive}},{key:"isMobileAccessibility",get:function(){return this._isMobileAccessibility}},{key:"hookDiv",get:function(){return this._hookDiv}},{key:"_createTouchHook",value:function(){var e=this,t=document.createElement("button");t.style.width="".concat(ie,"px"),t.style.height="".concat(ie,"px"),t.style.position="absolute",t.style.top="".concat(ge,"px"),t.style.left="".concat(me,"px"),t.style.zIndex=_e.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e._activate(),e._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}},{key:"_destroyTouchHook",value:function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}},{key:"_activate",value:function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.add(this),(e=this._renderer.view.canvas.parentNode)===null||e===void 0||e.appendChild(this._div))}},{key:"_deactivate",value:function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this),(e=this._div.parentNode)===null||e===void 0||e.removeChild(this._div))}},{key:"_updateAccessibleObjects",value:function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.isInteractive()&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);var t=e.children;if(t)for(var i=0;i<t.length;i++)this._updateAccessibleObjects(t[i])}}},{key:"init",value:function(e){var t;this.debug=(t=e==null?void 0:e.debug)!==null&&t!==void 0?t:this.debug,this._renderer.runners.postrender.remove(this)}},{key:"postrender",value:function(){var e=performance.now();if(!(this._mobileInfo.android.device&&e<this._androidUpdateCount)&&(this._androidUpdateCount=e+this._androidUpdateFrequency,!(!this._renderer.renderingToScreen||!this._renderer.view.canvas))){this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered);var t=this._renderer.view.canvas.getBoundingClientRect(),i=t.x,n=t.y,o=t.width,s=t.height,u=this._renderer,v=u.width,f=u.height,l=u.resolution,p=o/v*l,y=s/f*l,h=this._div;h.style.left="".concat(i,"px"),h.style.top="".concat(n,"px"),h.style.width="".concat(v,"px"),h.style.height="".concat(f,"px");for(var g=0;g<this._children.length;g++){var d=this._children[g];if(d._renderId!==this._renderId)d._accessibleActive=!1,ae(this._children,g,1),this._div.removeChild(d._accessibleDiv),this._pool.push(d._accessibleDiv),d._accessibleDiv=null,g--;else{h=d._accessibleDiv;var c=d.hitArea,m=d.worldTransform;d.hitArea?(h.style.left="".concat((m.tx+c.x*m.a)*p,"px"),h.style.top="".concat((m.ty+c.y*m.d)*y,"px"),h.style.width="".concat(c.width*m.a*p,"px"),h.style.height="".concat(c.height*m.d*y,"px")):(c=d.getBounds().rectangle,this._capHitArea(c),h.style.left="".concat(c.x*p,"px"),h.style.top="".concat(c.y*y,"px"),h.style.width="".concat(c.width*p,"px"),h.style.height="".concat(c.height*y,"px"),h.title!==d.accessibleTitle&&d.accessibleTitle!==null&&(h.title=d.accessibleTitle||""),h.getAttribute("aria-label")!==d.accessibleHint&&d.accessibleHint!==null&&h.setAttribute("aria-label",d.accessibleHint||"")),(d.accessibleTitle!==h.title||d.tabIndex!==h.tabIndex)&&(h.title=d.accessibleTitle||"",h.tabIndex=d.tabIndex,this.debug&&this._updateDebugHTML(h))}}this._renderId++}}},{key:"_updateDebugHTML",value:function(e){e.innerHTML="type: ".concat(e.type,"</br> title : ").concat(e.title,"</br> tabIndex: ").concat(e.tabIndex)}},{key:"_capHitArea",value:function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this._renderer,i=t.width,n=t.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)}},{key:"_addChild",value:function(e){var t=this._pool.pop();t||(t=document.createElement("button"),t.style.width="".concat(L,"px"),t.style.height="".concat(L,"px"),t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=te.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title="container ".concat(e.tabIndex)),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}},{key:"_dispatchEvent",value:function(e,t){var i=e.target.container,n=this._renderer.events.rootBoundary,o=Object.assign(new R(n),{target:i});n.rootTarget=this._renderer.lastObjectRendered,t.forEach(function(s){return n.dispatchEvent(o,s)})}},{key:"_onClick",value:function(e){this._dispatchEvent(e,["click","pointertap","tap"])}},{key:"_onFocus",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}},{key:"_onFocusOut",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}},{key:"_onKeyDown",value:function(e){e.keyCode===ce&&this._activate()}},{key:"_onMouseMove",value:function(e){e.movementX===0&&e.movementY===0||this._deactivate()}},{key:"destroy",value:function(){this._destroyTouchHook(),this._div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this._pool=null,this._children=null,this._renderer=null}}]),a}();oe.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"accessibility"};var be={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1},Ee=function(){function a(){w(this,a),this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}return k(a,[{key:"init",value:function(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}},{key:"pauseUpdate",get:function(){return this._pauseUpdate},set:function(e){this._pauseUpdate=e}},{key:"addTickerListener",value:function(){this._tickerAdded||!this.domElement||(W.system.add(this._tickerUpdate,this,le.INTERACTION),this._tickerAdded=!0)}},{key:"removeTickerListener",value:function(){this._tickerAdded&&(W.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}},{key:"pointerMoved",value:function(){this._didMove=!0}},{key:"_update",value:function(){if(!(!this.domElement||this._pauseUpdate)){if(this._didMove){this._didMove=!1;return}var e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}}},{key:"_tickerUpdate",value:function(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}]),a}(),T=new Ee,C=function(a){X(e,a);var r=Y(e);function e(){var t;return w(this,e),t=r.apply(this,arguments),t.client=new E,t.movement=new E,t.offset=new E,t.global=new E,t.screen=new E,t}return k(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"x",get:function(){return this.clientX}},{key:"y",get:function(){return this.clientY}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getLocalPosition",value:function(i,n,o){return i.worldTransform.applyInverse(o||this.global,n)}},{key:"getModifierState",value:function(i){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(i)}},{key:"initMouseEvent",value:function(i,n,o,s,u,v,f,l,p,y,h,g,d,c,m){throw new Error("Method not implemented.")}}]),e}(R),_=function(a){X(e,a);var r=Y(e);function e(){var t;return w(this,e),t=r.apply(this,arguments),t.width=0,t.height=0,t.isPrimary=!1,t}return k(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}}]),e}(C),D=function(a){X(e,a);var r=Y(e);function e(){var t;return w(this,e),t=r.apply(this,arguments),t.DOM_DELTA_PIXEL=0,t.DOM_DELTA_LINE=1,t.DOM_DELTA_PAGE=2,t}return k(e)}(C);D.DOM_DELTA_PIXEL=0;D.DOM_DELTA_LINE=1;D.DOM_DELTA_PAGE=2;var Pe=2048,Te=new E,I=new E,ke=function(){function a(r){w(this,a),this.dispatch=new ue,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=r,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}return k(a,[{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(i,n){return i.priority-n.priority})}},{key:"dispatchEvent",value:function(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var i=0,n=t.length;i<n;i++)t[i].fn(e);else P("[EventBoundary]: Event mapping not defined for ".concat(e.type))}}},{key:"hitTest",value:function(e,t){T.pauseUpdate=!0;var i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents,n=i?"hitTestMoveRecursive":"hitTestRecursive",o=this[n](this.rootTarget,this.rootTarget.eventMode,Te.set(e,t),this.hitTestFn,this.hitPruneFn);return o&&o[0]}},{key:"propagate",value:function(e,t){if(e.target){var i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var n=0,o=i.length-1;n<o;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(var s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"all",value:function(e,t){var i=this,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._allInteractiveElements;if(n.length!==0){e.eventPhase=e.BUBBLING_PHASE;for(var o=Array.isArray(t)?t:[t],s=function(f){o.forEach(function(l){e.currentTarget=n[f],i.notifyTarget(e,l)})},u=n.length-1;u>=0;u--)s(u)}}},{key:"propagationPath",value:function(e){for(var t=[e],i=0;i<Pe&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}},{key:"hitTestMoveRecursive",value:function(e,t,i,n,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(T.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var v=e.children,f=v.length-1;f>=0;f--){var l=v[f],p=this.hitTestMoveRecursive(l,this._isInteractive(t)?t:l.eventMode,i,n,o,s||o(e,i));if(p){if(p.length>0&&!p[p.length-1].parent)continue;var y=e.isInteractive();(p.length>0||y)&&(y&&this._allInteractiveElements.push(e),p.push(e)),this._hitElements.length===0&&(this._hitElements=p),u=!0}}var h=this._isInteractive(t),g=e.isInteractive();return g&&g&&this._allInteractiveElements.push(e),s||this._hitElements.length>0?null:u?this._hitElements:h&&!o(e,i)&&n(e,i)?g?[e]:[]:null}},{key:"hitTestRecursive",value:function(e,t,i,n,o){if(this._interactivePrune(e)||o(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(T.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var s=e.children,u=i,v=s.length-1;v>=0;v--){var f=s[v],l=this.hitTestRecursive(f,this._isInteractive(t)?t:f.eventMode,u,n,o);if(l){if(l.length>0&&!l[l.length-1].parent)continue;var p=e.isInteractive();return(l.length>0||p)&&l.push(e),l}}var y=this._isInteractive(t),h=e.isInteractive();return y&&n(e,i)?h?[e]:[]:null}},{key:"_isInteractive",value:function(e){return e==="static"||e==="dynamic"}},{key:"_interactivePrune",value:function(e){return!e||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}},{key:"hitPruneFn",value:function(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,I),!e.hitArea.contains(I.x,I.y)))return!0;if(e.effects&&e.effects.length)for(var i=0;i<e.effects.length;i++){var n=e.effects[i];if(n.containsPoint){var o=n.containsPoint(t,this.hitTestFn);if(!o)return!0}}return!1}},{key:"hitTestFn",value:function(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,I),e.containsPoint(I)):!1}},{key:"notifyTarget",value:function(e,t){var i,n,o;t=(i=t)!==null&&i!==void 0?i:e.type;var s="on".concat(t);(n=(o=e.currentTarget)[s])===null||n===void 0||n.call(o,e);var u=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this._notifyListeners(e,u),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}},{key:"mapPointerDown",value:function(e){if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}var t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){var i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}var n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}},{key:"mapPointerMove",value:function(e){var t,i;if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;var n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;var o=n.pointerType==="mouse"||n.pointerType==="pen",s=this.trackingData(e.pointerId),u=this.findMountedTarget(s.overTargets);if(((t=s.overTargets)===null||t===void 0?void 0:t.length)>0&&u!==n.target){var v=e.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(e,v,u);if(this.dispatchEvent(f,"pointerout"),o&&this.dispatchEvent(f,"mouseout"),!n.composedPath().includes(u)){var l=this.createPointerEvent(e,"pointerleave",u);for(l.eventPhase=l.AT_TARGET;l.target&&!n.composedPath().includes(l.target);)l.currentTarget=l.target,this.notifyTarget(l),o&&this.notifyTarget(l,"mouseleave"),l.target=l.target.parent;this.freeEvent(l)}this.freeEvent(f)}if(u!==n.target){var p=e.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(n,p);this.dispatchEvent(y,"pointerover"),o&&this.dispatchEvent(y,"mouseover");for(var h=u==null?void 0:u.parent;h&&h!==this.rootTarget.parent&&h!==n.target;)h=h.parent;var g=!h||h===this.rootTarget.parent;if(g){var d=this.clonePointerEvent(n,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==u&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),o&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(y)}var c=[],m=(i=this.enableGlobalMoveEvents)!==null&&i!==void 0?i:!0;if(this.moveOnAll?c.push("pointermove"):this.dispatchEvent(n,"pointermove"),m&&c.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),m&&c.push("globaltouchmove")),o){var B;this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),m&&c.push("globalmousemove"),this.cursor=(B=n.target)===null||B===void 0?void 0:B.cursor}c.length>0&&this.all(n,c),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=n.composedPath(),this.freeEvent(n)}},{key:"mapPointerOver",value:function(e){var t;if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}var i=this.trackingData(e.pointerId),n=this.createPointerEvent(e),o=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),o&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(t=n.target)===null||t===void 0?void 0:t.cursor);var s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),o&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}},{key:"mapPointerOut",value:function(e){if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}var t=this.trackingData(e.pointerId);if(t.overTargets){var i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(t.overTargets),o=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(o),i&&this.dispatchEvent(o,"mouseout");var s=this.createPointerEvent(e,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;t.overTargets=null,this.freeEvent(o),this.freeEvent(s)}this.cursor=null}},{key:"mapPointerUp",value:function(e){if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}var t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){var n=i.button===2;this.dispatchEvent(i,n?"rightup":"mouseup")}var o=this.trackingData(e.pointerId),s=this.findMountedTarget(o.pressTargetsByButton[e.button]),u=s;if(s&&!i.composedPath().includes(s)){for(var v=s;v&&!i.composedPath().includes(v);){if(i.currentTarget=v,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){var f=i.button===2;this.notifyTarget(i,f?"rightupoutside":"mouseupoutside")}v=v.parent}delete o.pressTargetsByButton[e.button],u=v}if(u){var l=this.clonePointerEvent(i,"click");l.target=u,l.path=null,o.clicksByButton[e.button]||(o.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:t});var p=o.clicksByButton[e.button];if(p.target===l.target&&t-p.timeStamp<200?++p.clickCount:p.clickCount=1,p.target=l.target,p.timeStamp=t,l.detail=p.clickCount,l.pointerType==="mouse"){var y=l.button===2;this.dispatchEvent(l,y?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(i)}},{key:"mapPointerUpOutside",value:function(e){if(!(e instanceof _)){P("EventBoundary cannot map a non-pointer event as a pointer event");return}var t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){for(var o=i;o;)n.currentTarget=o,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}},{key:"mapWheel",value:function(e){if(!(e instanceof D)){P("EventBoundary cannot map a non-wheel event as a wheel event");return}var t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[0],i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}},{key:"createPointerEvent",value:function(e,t,i){var n,o=this.allocateEvent(_);return this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e,o.target=(n=i??this.hitTest(o.global.x,o.global.y))!==null&&n!==void 0?n:this._hitElements[0],typeof t=="string"&&(o.type=t),o}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(D);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}},{key:"clonePointerEvent",value:function(e,t){var i=this.allocateEvent(_);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:"copyPointerData",value:function(e,t){e instanceof _&&t instanceof _&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}},{key:"copyMouseData",value:function(e,t){e instanceof C&&t instanceof C&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:"_notifyListeners",value:function(e,t){var i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(var n=0,o=i.length;n<o&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}]),a}(),we=1,Me={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},K=function(){function a(r){var e=this;w(this,a),this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=r,this.rootBoundary=new ke(null),T.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new _(null),this._rootWheelEvent=new D(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(he({},a.defaultEventFeatures),{set:function(i,n,o){return n==="globalMove"&&(e.rootBoundary.enableGlobalMoveEvents=o),i[n]=o,!0}}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}return k(a,[{key:"init",value:function(e){var t,i,n=this.renderer,o=n.canvas,s=n.resolution;this.setTargetElement(o),this.resolution=s,a._defaultEventMode=(t=e.eventMode)!==null&&t!==void 0?t:"passive",Object.assign(this.features,(i=e.eventFeatures)!==null&&i!==void 0?i:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}},{key:"resolutionChange",value:function(e){this.resolution=e}},{key:"destroy",value:function(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}},{key:"setCursor",value:function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor!==e){this._currentCursor=e;var i=this.cursorStyles[e];if(i)switch(A(i)){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}}},{key:"pointer",get:function(){return this._rootPointerEvent}},{key:"_onPointerDown",value:function(e){if(this.features.click){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var t=this._normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized){var i=e.cancelable||!("cancelable"in e);i&&e.preventDefault()}for(var n=0,o=t.length;n<o;n++){var s=t[n],u=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}}},{key:"_onPointerMove",value:function(e){if(this.features.move){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,T.pointerMoved();for(var t=this._normalizeToPointerData(e),i=0,n=t.length;i<n;i++){var o=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}}},{key:"_onPointerUp",value:function(e){if(this.features.click){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);for(var i=t!==this.domElement?"outside":"",n=this._normalizeToPointerData(e),o=0,s=n.length;o<s;o++){var u=this._bootstrapEvent(this._rootPointerEvent,n[o]);u.type+=i,this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}}},{key:"_onPointerOverOut",value:function(e){if(this.features.click){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;for(var t=this._normalizeToPointerData(e),i=0,n=t.length;i<n;i++){var o=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onWheel",value:function(e){if(this.features.wheel){var t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}}},{key:"setTargetElement",value:function(e){this._removeEvents(),this.domElement=e,T.domElement=e,this._addEvents()}},{key:"_addEvents",value:function(){if(!(this._eventsAdded||!this.domElement)){T.addTickerListener();var e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}}},{key:"_removeEvents",value:function(){if(!(!this._eventsAdded||!this.domElement)){T.removeTickerListener();var e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}}},{key:"mapPositionToPoint",value:function(e,t,i){var n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*o,e.y=(i-n.top)*(this.domElement.height/n.height)*o}},{key:"_normalizeToPointerData",value:function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,n=e.changedTouches.length;i<n;i++){var o=e.changedTouches[i];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=e.type,t.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){var s=e;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=we),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,t.push(s)}else t.push(e);return t}},{key:"normalizeWheelEvent",value:function(e){var t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}},{key:"_bootstrapEvent",value:function(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Me[e.type]||e.type),e}},{key:"_transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}}],[{key:"defaultEventMode",get:function(){return this._defaultEventMode}}]),a}();K.extension={name:"events",type:[O.WebGLSystem,O.CanvasSystem,O.WebGPUSystem],priority:-1};K.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var se=K,De={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(a){this.eventMode=a?"static":"passive"},_internalEventMode:void 0,get eventMode(){var a;return(a=this._internalEventMode)!==null&&a!==void 0?a:se.defaultEventMode},set eventMode(a){this._internalEventMode=a},isInteractive:function(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener:function(r,e,t){var i=typeof t=="boolean"&&t||A(t)==="object"&&t.capture,n=A(t)==="object"?t.signal:void 0,o=A(t)==="object"?t.once===!0:!1,s=typeof e=="function"?void 0:e;r=i?"".concat(r,"capture"):r;var u=typeof e=="function"?e:e.handleEvent,v=this;n&&n.addEventListener("abort",function(){v.off(r,u,s)}),o?v.once(r,u,s):v.on(r,u,s)},removeEventListener:function(r,e,t){var i=typeof t=="boolean"&&t||A(t)==="object"&&t.capture,n=typeof e=="function"?void 0:e;r=i?"".concat(r,"capture"):r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,n)},dispatchEvent:function(r){if(!(r instanceof R))throw new Error("Container cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};ne.add(oe);re.mixin(be);ne.add(se);re.mixin(De);
