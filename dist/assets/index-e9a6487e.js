(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=e(t);fetch(t.href,i)}})();function Fa(a,n){var e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var r,t,i,s,u=[],o=!0,h=!1;try{if(i=(e=e.call(a)).next,n===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(r=i.call(e)).done)&&(u.push(r.value),u.length!==n);o=!0);}catch(l){h=!0,t=l}finally{try{if(!o&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(h)throw t}}return u}}function wn(a,n){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);n&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),e.push.apply(e,r)}return e}function C(a){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?wn(Object(e),!0).forEach(function(r){gt(a,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):wn(Object(e)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(e,r))})}return a}function k(){k=function(){return n};var a,n={},e=Object.prototype,r=e.hasOwnProperty,t=Object.defineProperty||function(x,_,P){x[_]=P.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function h(x,_,P){return Object.defineProperty(x,_,{value:P,enumerable:!0,configurable:!0,writable:!0}),x[_]}try{h({},"")}catch{h=function(_,P,O){return _[P]=O}}function l(x,_,P,O){var F=_&&_.prototype instanceof y?_:y,H=Object.create(F.prototype),L=new ie(O||[]);return t(H,"_invoke",{value:z(x,P,L)}),H}function c(x,_,P){try{return{type:"normal",arg:x.call(_,P)}}catch(O){return{type:"throw",arg:O}}}n.wrap=l;var f="suspendedStart",v="suspendedYield",d="executing",p="completed",g={};function y(){}function b(){}function m(){}var w={};h(w,s,function(){return this});var A=Object.getPrototypeOf,I=A&&A(A(se([])));I&&I!==e&&r.call(I,s)&&(w=I);var S=m.prototype=y.prototype=Object.create(w);function M(x){["next","throw","return"].forEach(function(_){h(x,_,function(P){return this._invoke(_,P)})})}function W(x,_){function P(F,H,L,D){var Z=c(x[F],x,H);if(Z.type!=="throw"){var me=Z.arg,xe=me.value;return xe&&typeof xe=="object"&&r.call(xe,"__await")?_.resolve(xe.__await).then(function(ge){P("next",ge,L,D)},function(ge){P("throw",ge,L,D)}):_.resolve(xe).then(function(ge){me.value=ge,L(me)},function(ge){return P("throw",ge,L,D)})}D(Z.arg)}var O;t(this,"_invoke",{value:function(F,H){function L(){return new _(function(D,Z){P(F,H,D,Z)})}return O=O?O.then(L,L):L()}})}function z(x,_,P){var O=f;return function(F,H){if(O===d)throw new Error("Generator is already running");if(O===p){if(F==="throw")throw H;return{value:a,done:!0}}for(P.method=F,P.arg=H;;){var L=P.delegate;if(L){var D=U(L,P);if(D){if(D===g)continue;return D}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(O===f)throw O=p,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);O=d;var Z=c(x,_,P);if(Z.type==="normal"){if(O=P.done?p:v,Z.arg===g)continue;return{value:Z.arg,done:P.done}}Z.type==="throw"&&(O=p,P.method="throw",P.arg=Z.arg)}}}function U(x,_){var P=_.method,O=x.iterator[P];if(O===a)return _.delegate=null,P==="throw"&&x.iterator.return&&(_.method="return",_.arg=a,U(x,_),_.method==="throw")||P!=="return"&&(_.method="throw",_.arg=new TypeError("The iterator does not provide a '"+P+"' method")),g;var F=c(O,x.iterator,_.arg);if(F.type==="throw")return _.method="throw",_.arg=F.arg,_.delegate=null,g;var H=F.arg;return H?H.done?(_[x.resultName]=H.value,_.next=x.nextLoc,_.method!=="return"&&(_.method="next",_.arg=a),_.delegate=null,g):H:(_.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,g)}function T(x){var _={tryLoc:x[0]};1 in x&&(_.catchLoc=x[1]),2 in x&&(_.finallyLoc=x[2],_.afterLoc=x[3]),this.tryEntries.push(_)}function R(x){var _=x.completion||{};_.type="normal",delete _.arg,x.completion=_}function ie(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(T,this),this.reset(!0)}function se(x){if(x||x===""){var _=x[s];if(_)return _.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var P=-1,O=function F(){for(;++P<x.length;)if(r.call(x,P))return F.value=x[P],F.done=!1,F;return F.value=a,F.done=!0,F};return O.next=O}}throw new TypeError(typeof x+" is not iterable")}return b.prototype=m,t(S,"constructor",{value:m,configurable:!0}),t(m,"constructor",{value:b,configurable:!0}),b.displayName=h(m,o,"GeneratorFunction"),n.isGeneratorFunction=function(x){var _=typeof x=="function"&&x.constructor;return!!_&&(_===b||(_.displayName||_.name)==="GeneratorFunction")},n.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,m):(x.__proto__=m,h(x,o,"GeneratorFunction")),x.prototype=Object.create(S),x},n.awrap=function(x){return{__await:x}},M(W.prototype),h(W.prototype,u,function(){return this}),n.AsyncIterator=W,n.async=function(x,_,P,O,F){F===void 0&&(F=Promise);var H=new W(l(x,_,P,O),F);return n.isGeneratorFunction(_)?H:H.next().then(function(L){return L.done?L.value:H.next()})},M(S),h(S,o,"Generator"),h(S,s,function(){return this}),h(S,"toString",function(){return"[object Generator]"}),n.keys=function(x){var _=Object(x),P=[];for(var O in _)P.push(O);return P.reverse(),function F(){for(;P.length;){var H=P.pop();if(H in _)return F.value=H,F.done=!1,F}return F.done=!0,F}},n.values=se,ie.prototype={constructor:ie,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(R),!x)for(var _ in this)_.charAt(0)==="t"&&r.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=a)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var _=this;function P(Z,me){return H.type="throw",H.arg=x,_.next=Z,me&&(_.method="next",_.arg=a),!!me}for(var O=this.tryEntries.length-1;O>=0;--O){var F=this.tryEntries[O],H=F.completion;if(F.tryLoc==="root")return P("end");if(F.tryLoc<=this.prev){var L=r.call(F,"catchLoc"),D=r.call(F,"finallyLoc");if(L&&D){if(this.prev<F.catchLoc)return P(F.catchLoc,!0);if(this.prev<F.finallyLoc)return P(F.finallyLoc)}else if(L){if(this.prev<F.catchLoc)return P(F.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return P(F.finallyLoc)}}}},abrupt:function(x,_){for(var P=this.tryEntries.length-1;P>=0;--P){var O=this.tryEntries[P];if(O.tryLoc<=this.prev&&r.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var F=O;break}}F&&(x==="break"||x==="continue")&&F.tryLoc<=_&&_<=F.finallyLoc&&(F=null);var H=F?F.completion:{};return H.type=x,H.arg=_,F?(this.method="next",this.next=F.finallyLoc,g):this.complete(H)},complete:function(x,_){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&_&&(this.next=_),g},finish:function(x){for(var _=this.tryEntries.length-1;_>=0;--_){var P=this.tryEntries[_];if(P.finallyLoc===x)return this.complete(P.completion,P.afterLoc),R(P),g}},catch:function(x){for(var _=this.tryEntries.length-1;_>=0;--_){var P=this.tryEntries[_];if(P.tryLoc===x){var O=P.completion;if(O.type==="throw"){var F=O.arg;R(P)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(x,_,P){return this.delegate={iterator:se(x),resultName:_,nextLoc:P},this.method==="next"&&(this.arg=a),g}},n}function he(a){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},he(a)}function kn(a,n,e,r,t,i,s){try{var u=a[i](s),o=u.value}catch(h){e(h);return}u.done?n(o):Promise.resolve(o).then(r,t)}function G(a){return function(){var n=this,e=arguments;return new Promise(function(r,t){var i=a.apply(n,e);function s(o){kn(i,r,t,s,u,"next",o)}function u(o){kn(i,r,t,s,u,"throw",o)}s(void 0)})}}function E(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function An(a,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,Ai(r.key),r)}}function B(a,n,e){return n&&An(a.prototype,n),e&&An(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function gt(a,n,e){return n=Ai(n),n in a?Object.defineProperty(a,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[n]=e,a}function Q(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&Mr(a,n)}function Me(a){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(a)}function Mr(a,n){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},Mr(a,n)}function La(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ga(a,n){if(a==null)return{};var e={},r=Object.keys(a),t,i;for(i=0;i<r.length;i++)t=r[i],!(n.indexOf(t)>=0)&&(e[t]=a[t]);return e}function qe(a,n){if(a==null)return{};var e=Ga(a,n),r,t;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(t=0;t<i.length;t++)r=i[t],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(e[r]=a[r])}return e}function fe(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Oa(a,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(a)}function J(a){var n=La();return function(){var r=Me(a),t;if(n){var i=Me(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Oa(this,t)}}function ki(a,n){for(;!Object.prototype.hasOwnProperty.call(a,n)&&(a=Me(a),a!==null););return a}function Ge(){return typeof Reflect<"u"&&Reflect.get?Ge=Reflect.get.bind():Ge=function(n,e,r){var t=ki(n,e);if(t){var i=Object.getOwnPropertyDescriptor(t,e);return i.get?i.get.call(arguments.length<3?n:r):i.value}},Ge.apply(this,arguments)}function Ut(a,n,e,r){return typeof Reflect<"u"&&Reflect.set?Ut=Reflect.set:Ut=function(i,s,u,o){var h=ki(i,s),l;if(h){if(l=Object.getOwnPropertyDescriptor(h,s),l.set)return l.set.call(o,u),!0;if(!l.writable)return!1}if(l=Object.getOwnPropertyDescriptor(o,s),l){if(!l.writable)return!1;l.value=u,Object.defineProperty(o,s,l)}else gt(o,s,u);return!0},Ut(a,n,e,r)}function th(a,n,e,r,t){var i=Ut(a,n,e,r||a);if(!i&&t)throw new TypeError("failed to set property");return e}function ue(a,n){return Ua(a)||Fa(a,n)||en(a,n)||Na()}function X(a){return za(a)||Da(a)||en(a)||Wa()}function za(a){if(Array.isArray(a))return Tr(a)}function Ua(a){if(Array.isArray(a))return a}function Da(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function en(a,n){if(a){if(typeof a=="string")return Tr(a,n);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Tr(a,n)}}function Tr(a,n){(n==null||n>a.length)&&(n=a.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=a[e];return r}function Wa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Na(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xt(a,n){var e=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=en(a))||n&&a&&typeof a.length=="number"){e&&(a=e);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(o){throw o},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,u;return{s:function(){e=e.call(a)},n:function(){var o=e.next();return i=o.done,o},e:function(o){s=!0,u=o},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(s)throw u}}}}function Va(a,n){if(typeof a!="object"||a===null)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var r=e.call(a,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Ai(a){var n=Va(a,"string");return typeof n=="symbol"?n:String(n)}const Ha="modulepreload",Ya=function(a,n){return new URL(a,n).href},Sn={},Nt=function(n,e,r){if(!e||e.length===0)return n();const t=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=Ya(i,r),i in Sn)return;Sn[i]=!0;const s=i.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(!!r)for(let l=t.length-1;l>=0;l--){const c=t[l];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const h=document.createElement("link");if(h.rel=s?"stylesheet":Ha,s||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),s)return new Promise((l,c)=>{h.addEventListener("load",l),h.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var N=function(a){return a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a}(N||{}),Er=function(n){if(typeof n=="function"||he(n)==="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");var e=he(n.extension)!=="object"?{type:n.extension}:n.extension;n=C(C({},e),{},{ref:n})}if(he(n)==="object")n=C({},n);else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Pt=function(n,e){var r;return(r=Er(n).priority)!==null&&r!==void 0?r:e},_e={_addHandlers:{},_removeHandlers:{},_queue:{},remove:function(){for(var n=this,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.map(Er).forEach(function(i){i.type.forEach(function(s){var u,o;return(u=(o=n._removeHandlers)[s])===null||u===void 0?void 0:u.call(o,i)})}),this},add:function(){for(var n=this,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.map(Er).forEach(function(i){i.type.forEach(function(s){var u=n._addHandlers,o=n._queue;if(u[s]){var l;(l=u[s])===null||l===void 0||l.call(u,i)}else{var h;o[s]=o[s]||[],(h=o[s])===null||h===void 0||h.push(i)}})}),this},handle:function(n,e,r){var t=this._addHandlers,i=this._removeHandlers;if(t[n]||i[n])throw new Error("Extension type ".concat(n," already has a handler"));t[n]=e,i[n]=r;var s=this._queue;if(s[n]){var u;(u=s[n])===null||u===void 0||u.forEach(function(o){return e(o)}),delete s[n]}return this},handleByMap:function(n,e){return this.handle(n,function(r){r.name&&(e[r.name]=r.ref)},function(r){r.name&&delete e[r.name]})},handleByNamedList:function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;return this.handle(n,function(t){var i=e.findIndex(function(s){return s.name===t.name});i>=0||(e.push({name:t.name,value:t.ref}),e.sort(function(s,u){return Pt(u.value,r)-Pt(s.value,r)}))},function(t){var i=e.findIndex(function(s){return s.name===t.name});i!==-1&&e.splice(i,1)})},handleByList:function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;return this.handle(n,function(t){e.includes(t.ref)||(e.push(t.ref),e.sort(function(i,s){return Pt(s,r)-Pt(i,r)}))},function(t){var i=e.indexOf(t.ref);i!==-1&&e.splice(i,1)})}},Xa={extension:{type:N.Environment,name:"browser",priority:-1},test:function(){return!0},load:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(()=>import("./browserAll-6ed47b52.js"),["./browserAll-6ed47b52.js","./init-4384c4d1.js","./colorToUniform-e74e556a.js","./CanvasPool-b559b4fe.js","./batchSamplersUniformGroup-77861437.js"],import.meta.url);case 2:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}()},ja={extension:{type:N.Environment,name:"webworker",priority:0},test:function(){return typeof self<"u"&&self.WorkerGlobalScope!==void 0},load:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(()=>import("./webworkerAll-fa24e0d6.js"),["./webworkerAll-fa24e0d6.js","./init-4384c4d1.js","./colorToUniform-e74e556a.js","./CanvasPool-b559b4fe.js","./batchSamplersUniformGroup-77861437.js"],import.meta.url);case 2:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}()},ye=function(){function a(n,e,r){E(this,a),this._x=e||0,this._y=r||0,this._observer=n}return B(a,[{key:"clone",value:function(e){return new a(e??this._observer,this._x,this._y)}},{key:"set",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this._observer._onUpdate(this)),this}},{key:"copyFrom",value:function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}},{key:"copyTo",value:function(e){return e.set(this._x,this._y),e}},{key:"equals",value:function(e){return e.x===this._x&&e.y===this._y}},{key:"toString",value:function(){return"[pixi.js/math:ObservablePoint x=".concat(0," y=",0," scope=",this._observer,"]")}},{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}]),a}();function tn(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Si={exports:{}};(function(a){var n=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function t(o,h,l){this.fn=o,this.context=h,this.once=l||!1}function i(o,h,l,c,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var v=new t(l,c||o,f),d=e?e+h:h;return o._events[d]?o._events[d].fn?o._events[d]=[o._events[d],v]:o._events[d].push(v):(o._events[d]=v,o._eventsCount++),o}function s(o,h){--o._eventsCount===0?o._events=new r:delete o._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],l,c;if(this._eventsCount===0)return h;for(c in l=this._events)n.call(l,c)&&h.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},u.prototype.listeners=function(h){var l=e?e+h:h,c=this._events[l];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,v=c.length,d=new Array(v);f<v;f++)d[f]=c[f].fn;return d},u.prototype.listenerCount=function(h){var l=e?e+h:h,c=this._events[l];return c?c.fn?1:c.length:0},u.prototype.emit=function(h,l,c,f,v,d){var p=e?e+h:h;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,m;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,c),!0;case 4:return g.fn.call(g.context,l,c,f),!0;case 5:return g.fn.call(g.context,l,c,f,v),!0;case 6:return g.fn.call(g.context,l,c,f,v,d),!0}for(m=1,b=new Array(y-1);m<y;m++)b[m-1]=arguments[m];g.fn.apply(g.context,b)}else{var w=g.length,A;for(m=0;m<w;m++)switch(g[m].once&&this.removeListener(h,g[m].fn,void 0,!0),y){case 1:g[m].fn.call(g[m].context);break;case 2:g[m].fn.call(g[m].context,l);break;case 3:g[m].fn.call(g[m].context,l,c);break;case 4:g[m].fn.call(g[m].context,l,c,f);break;default:if(!b)for(A=1,b=new Array(y-1);A<y;A++)b[A-1]=arguments[A];g[m].fn.apply(g[m].context,b)}}return!0},u.prototype.on=function(h,l,c){return i(this,h,l,c,!1)},u.prototype.once=function(h,l,c){return i(this,h,l,c,!0)},u.prototype.removeListener=function(h,l,c,f){var v=e?e+h:h;if(!this._events[v])return this;if(!l)return s(this,v),this;var d=this._events[v];if(d.fn)d.fn===l&&(!f||d.once)&&(!c||d.context===c)&&s(this,v);else{for(var p=0,g=[],y=d.length;p<y;p++)(d[p].fn!==l||f&&!d[p].once||c&&d[p].context!==c)&&g.push(d[p]);g.length?this._events[v]=g.length===1?g[0]:g:s(this,v)}return this},u.prototype.removeAllListeners=function(h){var l;return h?(l=e?e+h:h,this._events[l]&&s(this,l)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,a.exports=u})(Si);var qa=Si.exports;const Ee=tn(qa);var $a=Math.PI*2,Ka=180/Math.PI,Za=Math.PI/180,ve=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;E(this,a),this.x=0,this.y=0,this.x=n,this.y=e}return B(a,[{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"copyFrom",value:function(e){return this.set(e.x,e.y),this}},{key:"copyTo",value:function(e){return e.set(this.x,this.y),e}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"set",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.x=e,this.y=r,this}},{key:"toString",value:function(){return"[pixi.js/math:Point x=".concat(this.x," y=").concat(this.y,"]")}}],[{key:"shared",get:function(){return Zt.x=0,Zt.y=0,Zt}}]),a}(),Zt=new ve,Y=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;E(this,a),this.array=null,this.a=n,this.b=e,this.c=r,this.d=t,this.tx=i,this.ty=s}return B(a,[{key:"fromArray",value:function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}},{key:"set",value:function(e,r,t,i,s,u){return this.a=e,this.b=r,this.c=t,this.d=i,this.tx=s,this.ty=u,this}},{key:"toArray",value:function(e,r){this.array||(this.array=new Float32Array(9));var t=r||this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t}},{key:"apply",value:function(e,r){r=r||new ve;var t=e.x,i=e.y;return r.x=this.a*t+this.c*i+this.tx,r.y=this.b*t+this.d*i+this.ty,r}},{key:"applyInverse",value:function(e,r){r=r||new ve;var t=this.a,i=this.b,s=this.c,u=this.d,o=this.tx,h=this.ty,l=1/(t*u+s*-i),c=e.x,f=e.y;return r.x=u*l*c+-s*l*f+(h*s-o*u)*l,r.y=t*l*f+-i*l*c+(-h*t+o*i)*l,r}},{key:"translate",value:function(e,r){return this.tx+=e,this.ty+=r,this}},{key:"scale",value:function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}},{key:"rotate",value:function(e){var r=Math.cos(e),t=Math.sin(e),i=this.a,s=this.c,u=this.tx;return this.a=i*r-this.b*t,this.b=i*t+this.b*r,this.c=s*r-this.d*t,this.d=s*t+this.d*r,this.tx=u*r-this.ty*t,this.ty=u*t+this.ty*r,this}},{key:"append",value:function(e){var r=this.a,t=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*t+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*t+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*t+e.ty*s+this.ty,this}},{key:"appendFrom",value:function(e,r){var t=e.a,i=e.b,s=e.c,u=e.d,o=e.tx,h=e.ty,l=r.a,c=r.b,f=r.c,v=r.d;return this.a=t*l+i*f,this.b=t*c+i*v,this.c=s*l+u*f,this.d=s*c+u*v,this.tx=o*l+h*f+r.tx,this.ty=o*c+h*v+r.ty,this}},{key:"setTransform",value:function(e,r,t,i,s,u,o,h,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-h)*u,this.d=Math.cos(o-h)*u,this.tx=e-(t*this.a+i*this.c),this.ty=r-(t*this.b+i*this.d),this}},{key:"prepend",value:function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var t=this.a,i=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}},{key:"decompose",value:function(e){var r=this.a,t=this.b,i=this.c,s=this.d,u=e.pivot,o=-Math.atan2(-i,s),h=Math.atan2(t,r),l=Math.abs(o+h);return l<1e-5||Math.abs($a-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=h),e.scale.x=Math.sqrt(r*r+t*t),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(u.x*r+u.y*i),e.position.y=this.ty+(u.x*t+u.y*s),e}},{key:"invert",value:function(){var e=this.a,r=this.b,t=this.c,i=this.d,s=this.tx,u=e*i-r*t;return this.a=i/u,this.b=-r/u,this.c=-t/u,this.d=e/u,this.tx=(t*this.ty-i*s)/u,this.ty=-(e*this.ty-r*s)/u,this}},{key:"isIdentity",value:function(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"clone",value:function(){var e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copyTo",value:function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copyFrom",value:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},{key:"equals",value:function(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}},{key:"toString",value:function(){return"[pixi.js:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]")}}],[{key:"IDENTITY",get:function(){return Ja.identity()}},{key:"shared",get:function(){return Qa.identity()}}]),a}(),Qa=new Y,Ja=new Y,Ve=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],He=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ye=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Br=[],Pi=[],Ct=Math.sign;function es(){for(var a=0;a<16;a++){var n=[];Br.push(n);for(var e=0;e<16;e++)for(var r=Ct(Ve[a]*Ve[e]+Ye[a]*He[e]),t=Ct(He[a]*Ve[e]+Xe[a]*He[e]),i=Ct(Ve[a]*Ye[e]+Ye[a]*Xe[e]),s=Ct(He[a]*Ye[e]+Xe[a]*Xe[e]),u=0;u<16;u++)if(Ve[u]===r&&He[u]===t&&Ye[u]===i&&Xe[u]===s){n.push(u);break}}for(var o=0;o<16;o++){var h=new Y;h.set(Ve[o],He[o],Ye[o],Xe[o],0,0),Pi.push(h)}}es();var j={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return Ve[n]},uY:function(n){return He[n]},vX:function(n){return Ye[n]},vY:function(n){return Xe[n]},inv:function(n){return n&8?n&15:-n&7},add:function(n,e){return Br[n][e]},sub:function(n,e){return Br[n][j.inv(e)]},rotate180:function(n){return n^4},isVertical:function(n){return(n&3)===2},byDirection:function(n,e){return Math.abs(n)*2<=Math.abs(e)?e>=0?j.S:j.N:Math.abs(e)*2<=Math.abs(n)?n>0?j.E:j.W:e>0?n>0?j.SE:j.SW:n>0?j.NE:j.NW},matrixAppendRotationInv:function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=Pi[j.inv(e)];i.tx=r,i.ty=t,n.append(i)}},Mt=[new ve,new ve,new ve,new ve],pe=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;E(this,a),this.type="rectangle",this.x=Number(n),this.y=Number(e),this.width=Number(r),this.height=Number(t)}return B(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"isEmpty",value:function(){return this.left===this.right||this.top===this.bottom}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height)}},{key:"copyFromBounds",value:function(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"copyTo",value:function(e){return e.copyFrom(this),e}},{key:"contains",value:function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}},{key:"strokeContains",value:function(e,r,t){var i=this.width,s=this.height;if(i<=0||s<=0)return!1;var u=this.x,o=this.y,h=u-t/2,l=u+i+t/2,c=o-t/2,f=o+s+t/2,v=u+t/2,d=u+i-t/2,p=o+t/2,g=o+s-t/2;return e>=h&&e<=l&&r>=c&&r<=f&&!(e>v&&e<d&&r>p&&r<g)}},{key:"intersects",value:function(e,r){if(!r){var t=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=t)return!1;var s=this.y<e.y?e.y:this.y,u=this.bottom>e.bottom?e.bottom:this.bottom;return u>s}var o=this.left,h=this.right,l=this.top,c=this.bottom;if(h<=o||c<=l)return!1;var f=Mt[0].set(e.left,e.top),v=Mt[1].set(e.left,e.bottom),d=Mt[2].set(e.right,e.top),p=Mt[3].set(e.right,e.bottom);if(d.x<=f.x||v.y<=f.y)return!1;var g=Math.sign(r.a*r.d-r.b*r.c);if(g===0||(r.apply(f,f),r.apply(v,v),r.apply(d,d),r.apply(p,p),Math.max(f.x,v.x,d.x,p.x)<=o||Math.min(f.x,v.x,d.x,p.x)>=h||Math.max(f.y,v.y,d.y,p.y)<=l||Math.min(f.y,v.y,d.y,p.y)>=c))return!1;var y=g*(v.y-f.y),b=g*(f.x-v.x),m=y*o+b*l,w=y*h+b*l,A=y*o+b*c,I=y*h+b*c;if(Math.max(m,w,A,I)<=y*f.x+b*f.y||Math.min(m,w,A,I)>=y*p.x+b*p.y)return!1;var S=g*(f.y-d.y),M=g*(d.x-f.x),W=S*o+M*l,z=S*h+M*l,U=S*o+M*c,T=S*h+M*c;return!(Math.max(W,z,U,T)<=S*f.x+M*f.y||Math.min(W,z,U,T)>=S*p.x+M*p.y)}},{key:"pad",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}},{key:"fit",value:function(e){var r=Math.max(this.x,e.x),t=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(t-r,0),this.y=i,this.height=Math.max(s-i,0),this}},{key:"ceil",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.001,t=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=t-this.x,this.height=i-this.y,this}},{key:"enlarge",value:function(e){var r=Math.min(this.x,e.x),t=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=t-r,this.y=i,this.height=s-i,this}},{key:"getBounds",value:function(e){return e=e||new a,e.copyFrom(this),e}},{key:"toString",value:function(){return"[pixi.js/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}(),Qt={default:-1};function ee(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";return Qt[a]===void 0&&(Qt[a]=-1),++Qt[a]}var Pn={},q="8.0.0";function $(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3;if(!Pn[n]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ","".concat(n,`
Deprecated since v`).concat(a)):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6","".concat(n,`
Deprecated since v`).concat(a)),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ","".concat(n,`
Deprecated since v`).concat(a)),console.warn(r))),Pn[n]=!0}}var Ci=function(){};function Cn(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function Mn(a){return!(a&a-1)&&!!a}function ts(a){var n={};for(var e in a)a[e]!==void 0&&(n[e]=a[e]);return n}var Tn=Object.create(null);function rs(a){var n=Tn[a];return n===void 0&&(Tn[a]=ee("resource")),n}var Mi=function(a){Q(e,a);var n=J(e);function e(){var r,t,i,s,u,o,h,l,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return E(this,e),l=n.call(this),l._resourceType="textureSampler",l._touched=0,l._maxAnisotropy=1,l.destroyed=!1,c=C(C({},e.defaultOptions),c),l.addressMode=c.addressMode,l.addressModeU=(r=c.addressModeU)!==null&&r!==void 0?r:l.addressModeU,l.addressModeV=(t=c.addressModeV)!==null&&t!==void 0?t:l.addressModeV,l.addressModeW=(i=c.addressModeW)!==null&&i!==void 0?i:l.addressModeW,l.scaleMode=c.scaleMode,l.magFilter=(s=c.magFilter)!==null&&s!==void 0?s:l.magFilter,l.minFilter=(u=c.minFilter)!==null&&u!==void 0?u:l.minFilter,l.mipmapFilter=(o=c.mipmapFilter)!==null&&o!==void 0?o:l.mipmapFilter,l.lodMinClamp=c.lodMinClamp,l.lodMaxClamp=c.lodMaxClamp,l.compare=c.compare,l.maxAnisotropy=(h=c.maxAnisotropy)!==null&&h!==void 0?h:1,l}return B(e,[{key:"addressMode",get:function(){return this.addressModeU},set:function(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}},{key:"wrapMode",get:function(){return this.addressMode},set:function(t){$(q,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}},{key:"scaleMode",get:function(){return this.magFilter},set:function(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}},{key:"maxAnisotropy",get:function(){return this._maxAnisotropy},set:function(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}},{key:"_resourceId",get:function(){return this._sharedResourceId||this._generateResourceId()}},{key:"update",value:function(){this.emit("change",this),this._sharedResourceId=null}},{key:"_generateResourceId",value:function(){var t="".concat(this.addressModeU,"-").concat(this.addressModeV,"-").concat(this.addressModeW,"-").concat(this.magFilter,"-").concat(this.minFilter,"-").concat(this.mipmapFilter,"-").concat(this.lodMinClamp,"-").concat(this.lodMaxClamp,"-").concat(this.compare,"-").concat(this._maxAnisotropy);return this._sharedResourceId=rs(t),this._resourceId}},{key:"destroy",value:function(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}}]),e}(Ee);Mi.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var ns=Mi,Ti=function(a){Q(e,a);var n=J(e);function e(){var r,t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E(this,e),t=n.call(this),t.options=i,t.uid=ee("textureSource"),t._resourceType="textureSource",t._resourceId=ee("resource"),t.uploadMethodId="unknown",t._resolution=1,t.pixelWidth=1,t.pixelHeight=1,t.width=1,t.height=1,t.sampleCount=1,t.mipLevelCount=1,t.autoGenerateMipmaps=!1,t.format="rgba8unorm",t.dimension="2d",t.antialias=!1,t._touched=0,t._batchTick=-1,t._textureBindLocation=-1,i=C(C({},e.defaultOptions),i),t.label=(r=i.label)!==null&&r!==void 0?r:"",t.resource=i.resource,t.autoGarbageCollect=i.autoGarbageCollect,t._resolution=i.resolution,i.width)t.pixelWidth=i.width*t._resolution;else{var s;t.pixelWidth=t.resource&&(s=t.resourceWidth)!==null&&s!==void 0?s:1}if(i.height)t.pixelHeight=i.height*t._resolution;else{var u;t.pixelHeight=t.resource&&(u=t.resourceHeight)!==null&&u!==void 0?u:1}return t.width=t.pixelWidth/t._resolution,t.height=t.pixelHeight/t._resolution,t.format=i.format,t.dimension=i.dimensions,t.mipLevelCount=i.mipLevelCount,t.autoGenerateMipmaps=i.autoGenerateMipmaps,t.sampleCount=i.sampleCount,t.antialias=i.antialias,t.alphaMode=i.alphaMode,t.style=new ns(ts(i)),t.destroyed=!1,t._refreshPOT(),t}return B(e,[{key:"source",get:function(){return this}},{key:"style",get:function(){return this._style},set:function(t){var i,s;this.style!==t&&((i=this._style)===null||i===void 0||i.off("change",this._onStyleChange,this),this._style=t,(s=this._style)===null||s===void 0||s.on("change",this._onStyleChange,this),this._onStyleChange())}},{key:"addressMode",get:function(){return this._style.addressMode},set:function(t){this._style.addressMode=t}},{key:"repeatMode",get:function(){return this._style.addressMode},set:function(t){this._style.addressMode=t}},{key:"magFilter",get:function(){return this._style.magFilter},set:function(t){this._style.magFilter=t}},{key:"minFilter",get:function(){return this._style.minFilter},set:function(t){this._style.minFilter=t}},{key:"mipmapFilter",get:function(){return this._style.mipmapFilter},set:function(t){this._style.mipmapFilter=t}},{key:"lodMinClamp",get:function(){return this._style.lodMinClamp},set:function(t){this._style.lodMinClamp=t}},{key:"lodMaxClamp",get:function(){return this._style.lodMaxClamp},set:function(t){this._style.lodMaxClamp=t}},{key:"_onStyleChange",value:function(){this.emit("styleChange",this)}},{key:"update",value:function(){if(this.resource){var t=this._resolution,i=this.resize(this.resourceWidth/t,this.resourceHeight/t);if(i)return}this.emit("update",this)}},{key:"destroy",value:function(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}},{key:"unload",value:function(){this._resourceId=ee("resource"),this.emit("change",this),this.emit("unload",this)}},{key:"resourceWidth",get:function(){var t=this.resource;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}},{key:"resourceHeight",get:function(){var t=this.resource;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}},{key:"resolution",get:function(){return this._resolution},set:function(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}},{key:"resize",value:function(t,i,s){s=s||this._resolution,t=t||this.width,i=i||this.height;var u=Math.round(t*s),o=Math.round(i*s);return this.width=u/s,this.height=o/s,this._resolution=s,this.pixelWidth===u&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=u,this.pixelHeight=o,this.emit("resize",this),this._resourceId=ee("resource"),this.emit("change",this),!0)}},{key:"updateMipmaps",value:function(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}},{key:"wrapMode",get:function(){return this._style.wrapMode},set:function(t){this._style.wrapMode=t}},{key:"scaleMode",get:function(){return this._style.scaleMode},set:function(t){this._style.scaleMode=t}},{key:"_refreshPOT",value:function(){this.isPowerOfTwo=Mn(this.pixelWidth)&&Mn(this.pixelHeight)}}],[{key:"test",value:function(t){throw new Error("Unimplemented")}}]),e}(Ee);Ti.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var Ie=Ti,rn=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e);var i=r.resource||new Float32Array(r.width*r.height*4),s=r.format;return s||(i instanceof Float32Array?s="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?s="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?s="rgba16uint":(i instanceof Int8Array,s="bgra8unorm")),t=n.call(this,C(C({},r),{},{resource:i,format:s})),t.uploadMethodId="buffer",t}return B(e,null,[{key:"test",value:function(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}]),e}(Ie);rn.extension=N.TextureSource;var En=new Y,is=function(){function a(n,e){E(this,a),this.mapCoord=new Y,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=n.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=n}return B(a,[{key:"texture",get:function(){return this._texture},set:function(e){var r;this.texture!==e&&((r=this._texture)===null||r===void 0||r.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}},{key:"multiplyUvs",value:function(e,r){r===void 0&&(r=e);for(var t=this.mapCoord,i=0;i<e.length;i+=2){var s=e[i],u=e[i+1];r[i]=s*t.a+u*t.c+t.tx,r[i+1]=s*t.b+u*t.d+t.ty}return r}},{key:"update",value:function(){var e=this._texture;this._updateID++;var r=e.uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var t=e.orig,i=e.trim;i&&(En.set(t.width/i.width,0,0,t.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(En));var s=e.source,u=this.uClampFrame,o=this.clampMargin/s._resolution,h=this.clampOffset;return u[0]=(e.frame.x+o+h)/s.width,u[1]=(e.frame.y+o+h)/s.height,u[2]=(e.frame.x+e.frame.width-o+h)/s.width,u[3]=(e.frame.y+e.frame.height-o+h)/s.height,this.uClampOffset[0]=h/s.pixelWidth,this.uClampOffset[1]=h/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}]),a}(),V=function(a){Q(e,a);var n=J(e);function e(){var r,t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.source,u=i.label,o=i.frame,h=i.orig,l=i.trim,c=i.defaultAnchor,f=i.defaultBorders,v=i.rotate,d=i.dynamic;if(E(this,e),t=n.call(this),t.uid=ee("texture"),t.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},t.frame=new pe,t.noFrame=!1,t.dynamic=!1,t.isTexture=!0,t.label=u,t.source=(r=s==null?void 0:s.source)!==null&&r!==void 0?r:new Ie,t.noFrame=!o,o)t.frame.copyFrom(o);else{var p=t._source,g=p.width,y=p.height;t.frame.width=g,t.frame.height=y}return t.orig=h||t.frame,t.trim=l,t.rotate=v??0,t.defaultAnchor=c,t.defaultBorders=f,t.destroyed=!1,t.dynamic=d||!1,t.updateUvs(),t}return B(e,[{key:"source",get:function(){return this._source},set:function(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}},{key:"textureMatrix",get:function(){return this._textureMatrix||(this._textureMatrix=new is(this)),this._textureMatrix}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}},{key:"updateUvs",value:function(){var t=this.uvs,i=this.frame,s=this._source,u=s.width,o=s.height,h=i.x/u,l=i.y/o,c=i.width/u,f=i.height/o,v=this.rotate;if(v){var d=c/2,p=f/2,g=h+d,y=l+p;v=j.add(v,j.NW),t.x0=g+d*j.uX(v),t.y0=y+p*j.uY(v),v=j.add(v,2),t.x1=g+d*j.uX(v),t.y1=y+p*j.uY(v),v=j.add(v,2),t.x2=g+d*j.uX(v),t.y2=y+p*j.uY(v),v=j.add(v,2),t.x3=g+d*j.uX(v),t.y3=y+p*j.uY(v)}else t.x0=h,t.y0=l,t.x1=h+c,t.y1=l,t.x2=h+c,t.y2=l+f,t.x3=h,t.y3=l+f}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}},{key:"update",value:function(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}},{key:"baseTexture",get:function(){return $(q,"Texture.baseTexture is now Texture.source"),this._source}}]),e}(Ee);V.EMPTY=new V({label:"EMPTY",source:new Ie({label:"EMPTY"})});V.EMPTY.destroy=Ci;V.WHITE=new V({source:new rn({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});V.WHITE.destroy=Ci;function as(a,n,e,r){var t=e.orig,i=t.width,s=t.height,u=e.trim;if(u){var o=u.width,h=u.height;a.minX=u.x-n._x*i-r,a.maxX=a.minX+o,a.minY=u.y-n._y*s-r,a.maxY=a.minY+h}else a.minX=-n._x*i-r,a.maxX=a.minX+i,a.minY=-n._y*s-r,a.maxY=a.minY+s}var ss={grad:.9,turn:360,rad:360/(2*Math.PI)},Be=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},re=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*n)/r+0},be=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),n>r?r:n>e?n:e},Ei=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Bn=function(n){return{r:be(n.r,0,255),g:be(n.g,0,255),b:be(n.b,0,255),a:be(n.a)}},Jt=function(n){return{r:re(n.r),g:re(n.g),b:re(n.b),a:re(n.a,3)}},us=/^#([0-9a-f]{3,8})$/i,Tt=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},Bi=function(n){var e=n.r,r=n.g,t=n.b,i=n.a,s=Math.max(e,r,t),u=s-Math.min(e,r,t),o=u?s===e?(r-t)/u:s===r?2+(t-e)/u:4+(e-r)/u:0;return{h:60*(o<0?o+6:o),s:s?u/s*100:0,v:s/255*100,a:i}},Ri=function(n){var e=n.h,r=n.s,t=n.v,i=n.a;e=e/360*6,r/=100,t/=100;var s=Math.floor(e),u=t*(1-r),o=t*(1-(e-s)*r),h=t*(1-(1-e+s)*r),l=s%6;return{r:255*[t,o,u,u,h,t][l],g:255*[h,t,t,o,u,u][l],b:255*[u,u,h,t,t,o][l],a:i}},Rn=function(n){return{h:Ei(n.h),s:be(n.s,0,100),l:be(n.l,0,100),a:be(n.a)}},In=function(n){return{h:re(n.h),s:re(n.s),l:re(n.l),a:re(n.a,3)}},Fn=function(n){return Ri((r=(e=n).s,{h:e.h,s:(r*=((t=e.l)<50?t:100-t)/100)>0?2*r/(t+r)*100:0,v:t+r,a:e.a}));var e,r,t},dt=function(n){return{h:(e=Bi(n)).h,s:(i=(200-(r=e.s))*(t=e.v)/100)>0&&i<200?r*t/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,t,i},os=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ls=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rr={string:[[function(a){var n=us.exec(a);return n?(a=n[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?re(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?re(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var n=hs.exec(a)||cs.exec(a);return n?n[2]!==n[4]||n[4]!==n[6]?null:Bn({r:Number(n[1])/(n[2]?100/255:1),g:Number(n[3])/(n[4]?100/255:1),b:Number(n[5])/(n[6]?100/255:1),a:n[7]===void 0?1:Number(n[7])/(n[8]?100:1)}):null},"rgb"],[function(a){var n=os.exec(a)||ls.exec(a);if(!n)return null;var e,r,t=Rn({h:(e=n[1],r=n[2],r===void 0&&(r="deg"),Number(e)*(ss[r]||1)),s:Number(n[3]),l:Number(n[4]),a:n[5]===void 0?1:Number(n[5])/(n[6]?100:1)});return Fn(t)},"hsl"]],object:[[function(a){var n=a.r,e=a.g,r=a.b,t=a.a,i=t===void 0?1:t;return Be(n)&&Be(e)&&Be(r)?Bn({r:Number(n),g:Number(e),b:Number(r),a:Number(i)}):null},"rgb"],[function(a){var n=a.h,e=a.s,r=a.l,t=a.a,i=t===void 0?1:t;if(!Be(n)||!Be(e)||!Be(r))return null;var s=Rn({h:Number(n),s:Number(e),l:Number(r),a:Number(i)});return Fn(s)},"hsl"],[function(a){var n=a.h,e=a.s,r=a.v,t=a.a,i=t===void 0?1:t;if(!Be(n)||!Be(e)||!Be(r))return null;var s=function(u){return{h:Ei(u.h),s:be(u.s,0,100),v:be(u.v,0,100),a:be(u.a)}}({h:Number(n),s:Number(e),v:Number(r),a:Number(i)});return Ri(s)},"hsv"]]},Ln=function(n,e){for(var r=0;r<e.length;r++){var t=e[r][0](n);if(t)return[t,e[r][1]]}return[null,void 0]},fs=function(n){return typeof n=="string"?Ln(n.trim(),Rr.string):he(n)=="object"&&n!==null?Ln(n,Rr.object):[null,void 0]},er=function(n,e){var r=dt(n);return{h:r.h,s:be(r.s+100*e,0,100),l:r.l,a:r.a}},tr=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Gn=function(n,e){var r=dt(n);return{h:r.h,s:r.s,l:be(r.l+100*e,0,100),a:r.a}},Ir=function(){function a(n){this.parsed=fs(n)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return re(tr(this.rgba),2)},a.prototype.isDark=function(){return tr(this.rgba)<.5},a.prototype.isLight=function(){return tr(this.rgba)>=.5},a.prototype.toHex=function(){return n=Jt(this.rgba),e=n.r,r=n.g,t=n.b,s=(i=n.a)<1?Tt(re(255*i)):"","#"+Tt(e)+Tt(r)+Tt(t)+s;var n,e,r,t,i,s},a.prototype.toRgb=function(){return Jt(this.rgba)},a.prototype.toRgbString=function(){return n=Jt(this.rgba),e=n.r,r=n.g,t=n.b,(i=n.a)<1?"rgba("+e+", "+r+", "+t+", "+i+")":"rgb("+e+", "+r+", "+t+")";var n,e,r,t,i},a.prototype.toHsl=function(){return In(dt(this.rgba))},a.prototype.toHslString=function(){return n=In(dt(this.rgba)),e=n.h,r=n.s,t=n.l,(i=n.a)<1?"hsla("+e+", "+r+"%, "+t+"%, "+i+")":"hsl("+e+", "+r+"%, "+t+"%)";var n,e,r,t,i},a.prototype.toHsv=function(){return n=Bi(this.rgba),{h:re(n.h),s:re(n.s),v:re(n.v),a:re(n.a,3)};var n},a.prototype.invert=function(){return Ce({r:255-(n=this.rgba).r,g:255-n.g,b:255-n.b,a:n.a});var n},a.prototype.saturate=function(n){return n===void 0&&(n=.1),Ce(er(this.rgba,n))},a.prototype.desaturate=function(n){return n===void 0&&(n=.1),Ce(er(this.rgba,-n))},a.prototype.grayscale=function(){return Ce(er(this.rgba,-1))},a.prototype.lighten=function(n){return n===void 0&&(n=.1),Ce(Gn(this.rgba,n))},a.prototype.darken=function(n){return n===void 0&&(n=.1),Ce(Gn(this.rgba,-n))},a.prototype.rotate=function(n){return n===void 0&&(n=15),this.hue(this.hue()+n)},a.prototype.alpha=function(n){return typeof n=="number"?Ce({r:(e=this.rgba).r,g:e.g,b:e.b,a:n}):re(this.rgba.a,3);var e},a.prototype.hue=function(n){var e=dt(this.rgba);return typeof n=="number"?Ce({h:n,s:e.s,l:e.l,a:e.a}):re(e.h)},a.prototype.isEqual=function(n){return this.toHex()===Ce(n).toHex()},a}(),Ce=function(n){return n instanceof Ir?n:new Ir(n)},On=[],ds=function(n){n.forEach(function(e){On.indexOf(e)<0&&(e(Ir,Rr),On.push(e))})};function vs(a,n){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var t in e)r[e[t]]=t;var i={};a.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,o,h=r[this.toHex()];if(h)return h;if(s!=null&&s.closest){var l=this.toRgb(),c=1/0,f="black";if(!i.length)for(var v in e)i[v]=new a(e[v]).toRgb();for(var d in e){var p=(u=l,o=i[d],Math.pow(u.r-o.r,2)+Math.pow(u.g-o.g,2)+Math.pow(u.b-o.b,2));p<c&&(c=p,f=d)}return f}},n.string.push([function(s){var u=s.toLowerCase(),o=u==="transparent"?"#0000":e[u];return o?new a(o).toRgb():null},"name"])}ds([vs]);var Je=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16777215;E(this,a),this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=n}return B(a,[{key:"red",get:function(){return this._components[0]}},{key:"green",get:function(){return this._components[1]}},{key:"blue",get:function(){return this._components[2]}},{key:"alpha",get:function(){return this._components[3]}},{key:"setValue",value:function(e){return this.value=e,this}},{key:"value",get:function(){return this._value},set:function(e){if(e instanceof a)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._normalize(e),this._value=this._cloneSource(e))}}},{key:"_cloneSource",value:function(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):he(e)==="object"&&e!==null?C({},e):e}},{key:"_isSourceEqual",value:function(e,r){var t=he(e),i=he(r);if(t!==i)return!1;if(t==="number"||t==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every(function(o,h){return o===r[h]});if(e!==null&&r!==null){var s=Object.keys(e),u=Object.keys(r);return s.length!==u.length?!1:s.every(function(o){return e[o]===r[o]})}return e===r}},{key:"toRgba",value:function(){var e=ue(this._components,4),r=e[0],t=e[1],i=e[2],s=e[3];return{r,g:t,b:i,a:s}}},{key:"toRgb",value:function(){var e=ue(this._components,3),r=e[0],t=e[1],i=e[2];return{r,g:t,b:i}}},{key:"toRgbaString",value:function(){var e=this.toUint8RgbArray(),r=ue(e,3),t=r[0],i=r[1],s=r[2];return"rgba(".concat(t,",").concat(i,",").concat(s,",").concat(this.alpha,")")}},{key:"toUint8RgbArray",value:function(e){var r=ue(this._components,3),t=r[0],i=r[1],s=r[2];return this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb,e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}},{key:"toArray",value:function(e){this._arrayRgba||(this._arrayRgba=[]),e=e||this._arrayRgba;var r=ue(this._components,4),t=r[0],i=r[1],s=r[2],u=r[3];return e[0]=t,e[1]=i,e[2]=s,e[3]=u,e}},{key:"toRgbArray",value:function(e){this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb;var r=ue(this._components,3),t=r[0],i=r[1],s=r[2];return e[0]=t,e[1]=i,e[2]=s,e}},{key:"toNumber",value:function(){return this._int}},{key:"toBgrNumber",value:function(){var e=this.toUint8RgbArray(),r=ue(e,3),t=r[0],i=r[1],s=r[2];return(s<<16)+(i<<8)+t}},{key:"toLittleEndianNumber",value:function(){var e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}},{key:"multiply",value:function(e){var r=ue(a._temp.setValue(e)._components,4),t=r[0],i=r[1],s=r[2],u=r[3];return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=u,this._refreshInt(),this._value=null,this}},{key:"premultiply",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}},{key:"toPremultiplied",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;var t=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(t=t*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(t<<16)+(i<<8)+s}},{key:"toHex",value:function(){var e=this._int.toString(16);return"#".concat("000000".substring(0,6-e.length)+e)}},{key:"toHexa",value:function(){var e=Math.round(this._components[3]*255),r=e.toString(16);return this.toHex()+"00".substring(0,2-r.length)+r}},{key:"setAlpha",value:function(e){return this._components[3]=this._clamp(e),this}},{key:"_normalize",value:function(e){var r,t,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){var u=e;r=(u>>16&255)/255,t=(u>>8&255)/255,i=(u&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4){e=this._clamp(e);var o=e,h=ue(o,4);r=h[0],t=h[1],i=h[2];var l=h[3];s=l===void 0?1:l}else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4){e=this._clamp(e,0,255);var c=e,f=ue(c,4);r=f[0],t=f[1],i=f[2];var v=f[3];s=v===void 0?255:v,r/=255,t/=255,i/=255,s/=255}else if(typeof e=="string"||he(e)==="object"){if(typeof e=="string"){var d=a.HEX_PATTERN.exec(e);d&&(e="#".concat(d[2]))}var p=Ce(e);if(p.isValid()){var g=p.rgba;r=g.r,t=g.g,i=g.b,s=g.a,r/=255,t/=255,i/=255}}if(r!==void 0)this._components[0]=r,this._components[1]=t,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error("Unable to convert color ".concat(e))}},{key:"_refreshInt",value:function(){this._clamp(this._components);var e=ue(this._components,3),r=e[0],t=e[1],i=e[2];this._int=(r*255<<16)+(t*255<<8)+(i*255|0)}},{key:"_clamp",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return typeof e=="number"?Math.min(Math.max(e,r),t):(e.forEach(function(i,s){e[s]=Math.min(Math.max(i,r),t)}),e)}}],[{key:"isColorLike",value:function(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof a||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}}]),a}();Je.shared=new Je;Je._temp=new Je;Je.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var ce=Je,gs={cullArea:null,cullable:!1,cullableChildren:!0};function ps(a,n,e){var r=a.length,t;if(!(n>=r||e===0)){e=n+e>r?r-n:e;var i=r-e;for(t=n;t<i;++t)a[t]=a[t+e];a.length=i}}var ms={allowChildren:!0,removeChildren:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,r=e??this.children.length,t=r-n,i=[];if(t>0&&t<=r){for(var s=r-1;s>=n;s--){var u=this.children[s];u&&(this.renderGroup&&this.renderGroup.removeChild(u),i.push(u),u.parent=null)}ps(this.children,n,r);for(var o=0;o<i.length;++o)this.emit("childRemoved",i[o],this,o),i[o].emit("removed",this);return i}else if(t===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt:function(n){var e=this.getChildAt(n);return this.removeChild(e)},getChildAt:function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index (".concat(n,") does not exist."));return this.children[n]},setChildIndex:function(n,e){if(e<0||e>=this.children.length)throw new Error("The index ".concat(e," supplied is out of bounds ").concat(this.children.length));this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex:function(n){var e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt:function(n,e){this.allowChildren||$(q,"addChildAt: Only Containers will be allowed to add children in v8.0.0");var r=this.children;if(e<0||e>r.length)throw new Error("".concat(n,"addChildAt: The index ").concat(e," supplied is out of bounds ").concat(r.length));if(n.parent){var t=n.parent.children.indexOf(n);if(n.parent===this&&t===e)return n;t!==-1&&n.parent.children.splice(t,1)}return e===r.length?r.push(n):r.splice(e,0,n),n.parent=this,n.didChange=!0,n.didViewUpdate=!1,n._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren:function(n,e){if(n!==e){var r=this.getChildIndex(n),t=this.getChildIndex(e);this.children[r]=e,this.children[t]=n}},removeFromParent:function(){var n;(n=this.parent)===null||n===void 0||n.removeChild(this)}},ys=function(){function a(n){E(this,a),this.pipe="filter",this.priority=1,this.filters=n==null?void 0:n.filters,this.filterArea=n==null?void 0:n.filterArea}return B(a,[{key:"destroy",value:function(){for(var e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}]),a}(),nn=function(){function a(n,e){E(this,a),this._pool=[],this._count=0,this._index=0,this._classType=n,e&&this.prepopulate(e)}return B(a,[{key:"prepopulate",value:function(e){for(var r=0;r<e;r++)this._pool[this._index++]=new this._classType;this._count+=e}},{key:"get",value:function(e){var r,t,i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(r=(t=i).init)===null||r===void 0||r.call(t,e),i}},{key:"return",value:function(e){var r;(r=e.reset)===null||r===void 0||r.call(e),this._pool[this._index++]=e}},{key:"totalSize",get:function(){return this._count}},{key:"totalFree",get:function(){return this._index}},{key:"totalUsed",get:function(){return this._count-this._index}}]),a}(),bs=function(){function a(){E(this,a),this._poolsByClass=new Map}return B(a,[{key:"prepopulate",value:function(e,r){var t=this.getPool(e);t.prepopulate(r)}},{key:"get",value:function(e,r){var t=this.getPool(e);return t.get(r)}},{key:"return",value:function(e){var r=this.getPool(e.constructor);r.return(e)}},{key:"getPool",value:function(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new nn(e)),this._poolsByClass.get(e)}},{key:"stats",value:function(){var e={};return this._poolsByClass.forEach(function(r){var t=e[r._classType.name]?r._classType.name+r._classType.ID:r._classType.name;e[t]={free:r.totalFree,used:r.totalUsed,size:r.totalSize}}),e}}]),a}(),Ae=new bs,_s=function(){function a(){E(this,a),this._effectClasses=[],this._tests=[],this._initialized=!1}return B(a,[{key:"init",value:function(){var e=this;this._initialized||(this._initialized=!0,this._effectClasses.forEach(function(r){e.add({test:r.test,maskClass:r})}))}},{key:"add",value:function(e){this._tests.push(e)}},{key:"getMaskEffect",value:function(e){this._initialized||this.init();for(var r=0;r<this._tests.length;r++){var t=this._tests[r];if(t.test(e))return Ae.get(t.maskClass,e)}return e}},{key:"returnMaskEffect",value:function(e){Ae.return(e)}}]),a}(),Fr=new _s;_e.handleByList(N.MaskEffect,Fr._effectClasses);var xs={_mask:null,_filters:null,effects:[],addEffect:function(n){var e=this.effects.indexOf(n);e===-1&&(this.effects.push(n),this.effects.sort(function(r,t){return r.priority-t.priority}),this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect:function(n){var e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),!this.isRenderGroupRoot&&this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(a){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask!==a&&(this._mask.effect&&(this.removeEffect(this._mask.effect),Fr.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=a,a!=null)){var n=Fr.getMaskEffect(a);this._mask.effect=n,this.addEffect(n)}},get mask(){var a;return(a=this._mask)===null||a===void 0?void 0:a.mask},set filters(a){var n;!Array.isArray(a)&&a&&(a=[a]),a=a,this._filters||(this._filters={filters:null,effect:null,filterArea:null});var e=((n=a)===null||n===void 0?void 0:n.length)>0,r=this._filters.effect&&!e||!this._filters.effect&&e;if(a=Array.isArray(a)?a.slice(0):a,this._filters.filters=Object.freeze(a),r)if(e){var t=Ae.get(ys);this._filters.effect=t,this.addEffect(t)}else{var i=this._filters.effect;this.removeEffect(i),i.filterArea=null,i.filters=null,this._filters.effect=null,Ae.return(i)}e&&(this._filters.effect.filters=a,this._filters.effect.filterArea=this.filterArea)},get filters(){var a;return(a=this._filters)===null||a===void 0?void 0:a.filters},set filterArea(a){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=a},get filterArea(){var a;return(a=this._filters)===null||a===void 0?void 0:a.filterArea}},ws={label:null,get name(){return $(q,"Container.name property has been removed, use Container.label instead"),this.label},set name(a){$(q,"Container.name property has been removed, use Container.label instead"),this.label=a},getChildByName:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getChildByLabel(n,e)},getChildByLabel:function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.children,t=0;t<r.length;t++){var i=r[t];if(i.label===n||n instanceof RegExp&&n.test(i.label))return i}if(e)for(var s=0;s<r.length;s++){var u=r[s],o=u.getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel:function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],t=this.children,i=0;i<t.length;i++){var s=t[i];(s.label===n||n instanceof RegExp&&n.test(s.label))&&r.push(s)}if(e)for(var u=0;u<t.length;u++)t[u].getChildrenByLabel(n,!0,r);return r}},zn=new Y,Oe=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1/0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1/0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1/0;E(this,a),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zn,this.minX=n,this.minY=e,this.maxX=r,this.maxY=t}return B(a,[{key:"isEmpty",value:function(){return this.minX>this.maxX||this.minY>this.maxY}},{key:"rectangle",get:function(){this._rectangle||(this._rectangle=new pe);var e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}},{key:"clear",value:function(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zn,this}},{key:"set",value:function(e,r,t,i){this.minX=e,this.minY=r,this.maxX=t,this.maxY=i}},{key:"addFrame",value:function(e,r,t,i,s){s||(s=this.matrix);var u=s.a,o=s.b,h=s.c,l=s.d,c=s.tx,f=s.ty,v=this.minX,d=this.minY,p=this.maxX,g=this.maxY,y=u*e+h*r+c,b=o*e+l*r+f;y<v&&(v=y),b<d&&(d=b),y>p&&(p=y),b>g&&(g=b),y=u*t+h*r+c,b=o*t+l*r+f,y<v&&(v=y),b<d&&(d=b),y>p&&(p=y),b>g&&(g=b),y=u*e+h*i+c,b=o*e+l*i+f,y<v&&(v=y),b<d&&(d=b),y>p&&(p=y),b>g&&(g=b),y=u*t+h*i+c,b=o*t+l*i+f,y<v&&(v=y),b<d&&(d=b),y>p&&(p=y),b>g&&(g=b),this.minX=v,this.minY=d,this.maxX=p,this.maxY=g}},{key:"addRect",value:function(e,r){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,r)}},{key:"addBounds",value:function(e,r){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,r)}},{key:"addBoundsMask",value:function(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}},{key:"applyMatrix",value:function(e){var r=this.minX,t=this.minY,i=this.maxX,s=this.maxY,u=e.a,o=e.b,h=e.c,l=e.d,c=e.tx,f=e.ty,v=u*r+h*t+c,d=o*r+l*t+f;this.minX=v,this.minY=d,this.maxX=v,this.maxY=d,v=u*i+h*t+c,d=o*i+l*t+f,this.minX=v<this.minX?v:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=d>this.maxY?d:this.maxY,v=u*r+h*s+c,d=o*r+l*s+f,this.minX=v<this.minX?v:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=d>this.maxY?d:this.maxY,v=u*i+h*s+c,d=o*i+l*s+f,this.minX=v<this.minX?v:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=d>this.maxY?d:this.maxY}},{key:"fit",value:function(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}},{key:"fitBounds",value:function(e,r,t,i){return this.minX<e&&(this.minX=e),this.maxX>r&&(this.maxX=r),this.minY<t&&(this.minY=t),this.maxY>i&&(this.maxY=i),this}},{key:"pad",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r,this}},{key:"ceil",value:function(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}},{key:"clone",value:function(){return new a(this.minX,this.minY,this.maxX,this.maxY)}},{key:"scale",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.minX*=e,this.minY*=r,this.maxX*=e,this.maxY*=r,this}},{key:"x",get:function(){return this.minX},set:function(e){var r=this.maxX-this.minX;this.minX=e,this.maxX=e+r}},{key:"y",get:function(){return this.minY},set:function(e){var r=this.maxY-this.minY;this.minY=e,this.maxY=e+r}},{key:"width",get:function(){return this.maxX-this.minX},set:function(e){this.maxX=this.minX+e}},{key:"height",get:function(){return this.maxY-this.minY},set:function(e){this.maxY=this.minY+e}},{key:"left",get:function(){return this.minX}},{key:"right",get:function(){return this.maxX}},{key:"top",get:function(){return this.minY}},{key:"bottom",get:function(){return this.maxY}},{key:"isPositive",get:function(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}},{key:"isValid",get:function(){return this.minX+this.minY!==1/0}},{key:"addVertexData",value:function(e,r,t,i){var s=this.minX,u=this.minY,o=this.maxX,h=this.maxY;i||(i=this.matrix);for(var l=i.a,c=i.b,f=i.c,v=i.d,d=i.tx,p=i.ty,g=r;g<t;g+=2){var y=e[g],b=e[g+1],m=l*y+f*b+d,w=c*y+v*b+p;s=m<s?m:s,u=w<u?w:u,o=m>o?m:o,h=w>h?w:h}this.minX=s,this.minY=u,this.maxX=o,this.maxY=h}},{key:"containsPoint",value:function(e,r){return this.minX<=e&&this.minY<=r&&this.maxX>=e&&this.maxY>=r}},{key:"toString",value:function(){return"[pixi.js:Bounds minX=".concat(this.minX," minY=").concat(this.minY," maxX=").concat(this.maxX," maxY=").concat(this.maxY," width=").concat(this.width," height=").concat(this.height,"]")}}]),a}(),Re=new nn(Y),et=new nn(Oe);function Ii(a,n,e){e.clear();var r,t;return a.parent?n?r=a.parent.worldTransform:(t=Re.get().identity(),r=Vt(a,t)):r=Y.IDENTITY,Fi(a,e,r,n),t&&Re.return(t),e.isValid||e.set(0,0,0,0),e}function Fi(a,n,e,r){if(!(!a.visible||!a.measurable)){var t;r?t=a.worldTransform:(a.updateLocalTransform(),t=Re.get(),t.appendFrom(a.localTransform,e));var i=n,s=!!a.effects.length;if(s&&(n=et.get().clear()),a.boundsArea)n.addRect(a.boundsArea,t);else{a.addBounds&&(n.matrix=t,a.addBounds(n));for(var u=0;u<a.children.length;u++)Fi(a.children[u],n,t,r)}if(s){for(var o=0;o<a.effects.length;o++){var h,l;(h=(l=a.effects[o]).addBounds)===null||h===void 0||h.call(l,n)}i.addBounds(n,Y.IDENTITY),et.return(n)}r||Re.return(t)}}function Vt(a,n){var e=a.parent;return e&&(Vt(e,n),e.updateLocalTransform(),n.append(e.localTransform)),n}var rr=0,Un=500;function ae(){if(rr!==Un)if(rr++,rr===Un)console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.");else{for(var a,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];(a=console).warn.apply(a,["PixiJS Warning: "].concat(e))}}function Li(a,n,e){return n.clear(),e||(e=Y.IDENTITY),Gi(a,n,e,a,!0),n.isValid||n.set(0,0,0,0),n}function Gi(a,n,e,r,t){var i;if(t)i=Re.get(),i=e.copyTo(i);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();var s=a.localTransform;i=Re.get(),i.appendFrom(s,e)}var u=n,o=!!a.effects.length;if(o&&(n=et.get().clear()),a.boundsArea)n.addRect(a.boundsArea,i);else{a.renderPipeId&&(n.matrix=i,a.addBounds(n));for(var h=a.children,l=0;l<h.length;l++)Gi(h[l],n,i,r,!1)}if(o){for(var c=0;c<a.effects.length;c++){var f,v;(f=(v=a.effects[c]).addLocalBounds)===null||f===void 0||f.call(v,n,r)}u.addBounds(n,Y.IDENTITY),et.return(n)}Re.return(i)}function Oi(a,n){for(var e=a.children,r=0;r<e.length;r++){var t=e[r],i=(t.uid&255)<<24|t._didChangeId&16777215;n.data[n.index]!==i&&(n.data[n.index]=i,n.didChange=!0),n.index++,t.children.length&&Oi(t,n)}return n.didChange}var ks=new Y,As={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth:function(n,e){var r=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*r:this.scale.x=r},_setHeight:function(n,e){var r=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*r:this.scale.y=r},getLocalBounds:function(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Oe});var n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didChangeId>>12&&(n.didChange=!0,n.data[0]=this._didChangeId>>12),Oi(this,n),n.didChange&&Li(this,n.localBounds,ks),n.localBounds},getBounds:function(n,e){return Ii(this,n,e||new Oe)}},Ss={_onRender:null,set onRender(a){var n=this.renderGroup;if(!a){this._onRender&&(n==null||n.removeOnRender(this)),this._onRender=null;return}this._onRender||n==null||n.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},Ps={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified:function(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)},sortChildren:function(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Cs))}};function Cs(a,n){return a._zIndex-n._zIndex}var Ms={getGlobalPosition:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ve,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal:function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!r){this.updateLocalTransform();var t=Vt(this,new Y);return t.append(this.localTransform),t.apply(n,e)}return this.worldTransform.apply(n,e)},toLocal:function(n,e,r,t){if(e&&(n=e.toGlobal(n,r,t)),!t){this.updateLocalTransform();var i=Vt(this,new Y);return i.append(this.localTransform),i.applyInverse(n,r)}return this.worldTransform.applyInverse(n,r)}},zi=function(){function a(){E(this,a),this.uid=ee("instructionSet"),this.instructions=[],this.instructionSize=0}return B(a,[{key:"reset",value:function(){this.instructionSize=0}},{key:"add",value:function(e){this.instructions[this.instructionSize++]=e}},{key:"log",value:function(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}]),a}(),Ts=function(){function a(n){E(this,a),this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this._children=[],this.worldTransform=new Y,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new zi,this._onRenderContainers=[],this.root=n,this.addChild(n)}return B(a,[{key:"localTransform",get:function(){return this.root.localTransform}},{key:"addRenderGroupChild",value:function(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.onChildUpdate(e.root),this.renderGroupChildren.push(e)}},{key:"_removeRenderGroupChild",value:function(e){e.root.didChange&&this._removeChildFromUpdate(e.root);var r=this.renderGroupChildren.indexOf(e);r>-1&&this.renderGroupChildren.splice(r,1),e.renderGroupParent=null}},{key:"addChild",value:function(e){if(this.structureDidChange=!0,e!==this.root&&(this._children.push(e),e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e._onRender&&this.addOnRender(e)),e.renderGroup){if(e.renderGroup.root===e){this.addRenderGroupChild(e.renderGroup);return}}else e.renderGroup=this,e.didChange=!0;var r=e.children;e.isRenderGroupRoot||this.onChildUpdate(e);for(var t=0;t<r.length;t++)this.addChild(r[t])}},{key:"removeChild",value:function(e){if(this.structureDidChange=!0,e._onRender&&this.removeOnRender(e),e.renderGroup.root!==e){for(var r=e.children,t=0;t<r.length;t++)this.removeChild(r[t]);e.didChange&&e.renderGroup._removeChildFromUpdate(e),e.renderGroup=null}else this._removeRenderGroupChild(e.renderGroup);var i=this._children.indexOf(e);i>-1&&this._children.splice(i,1)}},{key:"onChildUpdate",value:function(e){var r=this.childrenToUpdate[e.relativeRenderGroupDepth];r||(r=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),r.list[r.index++]=e}},{key:"updateRenderable",value:function(e){e.globalDisplayStatus<7||(e.didViewUpdate=!1,this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e))}},{key:"onChildViewUpdate",value:function(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}},{key:"_removeChildFromUpdate",value:function(e){var r=this.childrenToUpdate[e.relativeRenderGroupDepth];if(r){var t=r.list.indexOf(e);t>-1&&r.list.splice(t,1),r.index--}}},{key:"isRenderable",get:function(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}},{key:"addOnRender",value:function(e){this._onRenderContainers.push(e)}},{key:"removeOnRender",value:function(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}},{key:"runOnRender",value:function(){for(var e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender()}}]),a}();function Es(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var r in n)!e[r]&&n[r]!==void 0&&(a[r]=n[r])}var nr=new ye(null),ir=new ye(null),ar=new ye(null,1,1),Dn=1,Bs=2,sr=4,oe=function(a){Q(e,a);var n=J(e);function e(){var r,t,i,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return E(this,e),i=n.call(this),i.uid=ee("renderable"),i._updateFlags=15,i.isRenderGroupRoot=!1,i.renderGroup=null,i.didChange=!1,i.didViewUpdate=!1,i.relativeRenderGroupDepth=0,i.children=[],i.parent=null,i.includeInBuild=!0,i.measurable=!0,i.isSimple=!0,i.updateTick=-1,i.localTransform=new Y,i.relativeGroupTransform=new Y,i.groupTransform=i.relativeGroupTransform,i.destroyed=!1,i._position=new ye(fe(i),0,0),i._scale=ar,i._pivot=ir,i._skew=nr,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._rotation=0,i.localColor=16777215,i.localAlpha=1,i.groupAlpha=1,i.groupColor=16777215,i.groupColorAlpha=4294967295,i.localBlendMode="inherit",i.groupBlendMode="normal",i.localDisplayStatus=7,i.globalDisplayStatus=7,i._didChangeId=0,i._didLocalTransformChangeId=-1,Es(fe(i),s,{children:!0,parent:!0,effects:!0}),(r=s.children)===null||r===void 0||r.forEach(function(u){return i.addChild(u)}),i.effects=[],(t=s.parent)===null||t===void 0||t.addChild(fe(i)),i}return B(e,[{key:"addChild",value:function(){if(this.allowChildren||$(q,"addChild: Only Containers will be allowed to add children in v8.0.0"),arguments.length>1){for(var t=0;t<arguments.length;t++)this.addChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}var i=arguments.length<=0?void 0:arguments[0];return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i.didViewUpdate=!1,i._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),i._zIndex!==0&&i.depthOfChildModified(),i)}},{key:"removeChild",value:function(){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.removeChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}var i=arguments.length<=0?void 0:arguments[0],s=this.children.indexOf(i);return s>-1&&(this.children.splice(s,1),this.renderGroup&&this.renderGroup.removeChild(i),i.parent=null,this.emit("childRemoved",i,this,s),i.emit("removed",this)),i}},{key:"_onUpdate",value:function(t){if(t&&t===this._skew&&this._updateSkew(),this._didChangeId++,!this.didChange)if(this.didChange=!0,this.isRenderGroupRoot){var i=this.renderGroup.renderGroupParent;i&&i.onChildUpdate(this)}else this.renderGroup&&this.renderGroup.onChildUpdate(this)}},{key:"isRenderGroup",get:function(){return this.isRenderGroupRoot},set:function(t){if(this.isRenderGroupRoot&&t===!1)throw new Error("[Pixi] cannot undo a render group just yet");t&&this.enableRenderGroup()}},{key:"enableRenderGroup",value:function(){if(!(this.renderGroup&&this.renderGroup.root===this)){this.isRenderGroupRoot=!0;var t=this.renderGroup;if(t&&t.removeChild(this),this.renderGroup=new Ts(this),t){for(var i=0;i<t.renderGroupChildren.length;i++)for(var s=t.renderGroupChildren[i],u=s.root;u;){if(u===this){this.renderGroup.addRenderGroupChild(s);break}u=u.parent}t.addRenderGroupChild(this.renderGroup)}this._updateIsSimple(),this.groupTransform=Y.IDENTITY}}},{key:"_updateIsSimple",value:function(){this.isSimple=!this.isRenderGroupRoot&&this.effects.length===0}},{key:"worldTransform",get:function(){return this._worldTransform||(this._worldTransform=new Y),this.renderGroup&&(this.isRenderGroupRoot?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this._worldTransform.appendFrom(this.relativeGroupTransform,this.renderGroup.worldTransform)),this._worldTransform}},{key:"x",get:function(){return this._position.x},set:function(t){this._position.x=t}},{key:"y",get:function(){return this._position.y},set:function(t){this._position.y=t}},{key:"position",get:function(){return this._position},set:function(t){this._position.copyFrom(t)}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}},{key:"angle",get:function(){return this.rotation*Ka},set:function(t){this.rotation=t*Za}},{key:"pivot",get:function(){return this._pivot===ir&&(this._pivot=new ye(this,0,0)),this._pivot},set:function(t){this._pivot===ir&&(this._pivot=new ye(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}},{key:"skew",get:function(){return this._skew===nr&&(this._skew=new ye(this,0,0)),this._skew},set:function(t){this._skew===nr&&(this._skew=new ye(this,0,0)),this._skew.copyFrom(t)}},{key:"scale",get:function(){return this._scale===ar&&(this._scale=new ye(this,1,1)),this._scale},set:function(t){this._scale===ar&&(this._scale=new ye(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}},{key:"width",get:function(){return Math.abs(this.scale.x*this.getLocalBounds().width)},set:function(t){var i=this.getLocalBounds().width;this._setWidth(t,i)}},{key:"height",get:function(){return Math.abs(this.scale.y*this.getLocalBounds().height)},set:function(t){var i=this.getLocalBounds().height;this._setHeight(t,i)}},{key:"getSize",value:function(t){t||(t={});var i=this.getLocalBounds();return t.width=Math.abs(this.scale.x*i.width),t.height=Math.abs(this.scale.y*i.height),t}},{key:"setSize",value:function(t,i){var s=this.getLocalBounds(),u,o;if(he(t)!=="object")u=t,o=i??t;else{var h;u=t.width,o=(h=t.height)!==null&&h!==void 0?h:t.width}u!==void 0&&this._setWidth(u,s.width),o!==void 0&&this._setHeight(o,s.height)}},{key:"_updateSkew",value:function(){var t=this._rotation,i=this._skew;this._cx=Math.cos(t+i._y),this._sx=Math.sin(t+i._y),this._cy=-Math.sin(t-i._x),this._sy=Math.cos(t-i._x)}},{key:"updateTransform",value:function(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}},{key:"setFromMatrix",value:function(t){t.decompose(this)}},{key:"updateLocalTransform",value:function(){if((this._didLocalTransformChangeId&15)!==this._didChangeId){this._didLocalTransformChangeId=this._didChangeId;var t=this.localTransform,i=this._scale,s=this._pivot,u=this._position,o=i._x,h=i._y,l=s._x,c=s._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*h,t.d=this._sy*h,t.tx=u._x-(l*t.a+c*t.c),t.ty=u._y-(l*t.b+c*t.d)}}},{key:"alpha",get:function(){return this.localAlpha},set:function(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Dn,this._onUpdate())}},{key:"tint",get:function(){var t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)},set:function(t){var i=ce.shared.setValue(t??16777215),s=i.toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Dn,this._onUpdate())}},{key:"blendMode",get:function(){return this.localBlendMode},set:function(t){this.localBlendMode!==t&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=Bs,this.localBlendMode=t,this._onUpdate())}},{key:"visible",get:function(){return!!(this.localDisplayStatus&2)},set:function(t){var i=t?1:0;(this.localDisplayStatus&2)>>1!==i&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=sr,this.localDisplayStatus^=2,this._onUpdate())}},{key:"culled",get:function(){return!(this.localDisplayStatus&4)},set:function(t){var i=t?1:0;(this.localDisplayStatus&4)>>2!==i&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=sr,this.localDisplayStatus^=4,this._onUpdate())}},{key:"renderable",get:function(){return!!(this.localDisplayStatus&1)},set:function(t){var i=t?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=sr,this.localDisplayStatus^=1,this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._onUpdate())}},{key:"isRenderable",get:function(){return this.localDisplayStatus===7&&this.groupAlpha>0}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();var i=typeof t=="boolean"?t:t==null?void 0:t.children,s=this.removeChildren(0,this.children.length);if(i)for(var u=0;u<s.length;++u)s[u].destroy(t)}}}],[{key:"mixin",value:function(t){Object.defineProperties(e.prototype,Object.getOwnPropertyDescriptors(t))}}]),e}(Ee);oe.mixin(ms);oe.mixin(Ms);oe.mixin(Ss);oe.mixin(As);oe.mixin(xs);oe.mixin(ws);oe.mixin(Ps);oe.mixin(gs);var Rs=["texture","anchor","roundPixels","width","height"],Lr=function(a){Q(e,a);var n=J(e);function e(){var r,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V.EMPTY;E(this,e),t instanceof V&&(t={texture:t});var i=t,s=i.texture,u=i.anchor,o=i.roundPixels,h=i.width,l=i.height,c=qe(i,Rs);return r=n.call(this,C({label:"Sprite"},c)),r.renderPipeId="sprite",r.batched=!0,r._didSpriteUpdate=!1,r._bounds={minX:0,maxX:1,minY:0,maxY:0},r._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},r._boundsDirty=!0,r._sourceBoundsDirty=!0,r._roundPixels=0,r._anchor=new ye({_onUpdate:function(){r.onViewUpdate()}}),u?r.anchor=u:s.defaultAnchor&&(r.anchor=s.defaultAnchor),r.texture=s,r.allowChildren=!1,r.roundPixels=o??!1,h&&(r.width=h),l&&(r.height=l),r}return B(e,[{key:"texture",get:function(){return this._texture},set:function(t){t||(t=V.EMPTY);var i=this._texture;i!==t&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}},{key:"bounds",get:function(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}},{key:"sourceBounds",get:function(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}},{key:"containsPoint",value:function(t){var i=this.sourceBounds;return t.x>=i.maxX&&t.x<=i.minX&&t.y>=i.maxY&&t.y<=i.minY}},{key:"addBounds",value:function(t){var i=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(i.minX,i.minY,i.maxX,i.maxY)}},{key:"onViewUpdate",value:function(){this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}},{key:"_updateBounds",value:function(){as(this._bounds,this._anchor,this._texture,0)}},{key:"_updateSourceBounds",value:function(){var t=this._anchor,i=this._texture,s=this._sourceBounds,u=i.orig,o=u.width,h=u.height;s.maxX=-t._x*o,s.minX=s.maxX+o,s.maxY=-t._y*h,s.minY=s.maxY+h}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ge(Me(e.prototype),"destroy",this).call(this,t);var i=typeof t=="boolean"?t:t==null?void 0:t.texture;if(i){var s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(s)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}},{key:"anchor",get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}},{key:"roundPixels",get:function(){return!!this._roundPixels},set:function(t){this._roundPixels=t?1:0}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this._setWidth(t,this._texture.orig.width)}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this._setHeight(t,this._texture.orig.height)}},{key:"getSize",value:function(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}},{key:"setSize",value:function(t,i){var s,u;if(he(t)!=="object")s=t,u=i??t;else{var o;s=t.width,u=(o=t.height)!==null&&o!==void 0?o:t.width}s!==void 0&&this._setWidth(s,this._texture.orig.width),u!==void 0&&this._setHeight(u,this._texture.orig.height)}}],[{key:"from",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return t instanceof V?new e(t):new e(V.from(t,i))}}]),e}(oe),Is=new Oe;function Ui(a,n,e){var r=Is;a.measurable=!0,Ii(a,e,r),n.addBoundsMask(r),a.measurable=!1}function Di(a,n,e){var r=et.get();a.measurable=!0;var t=Re.get().identity(),i=Wi(a,e,t);Li(a,r,i),a.measurable=!1,n.addBoundsMask(r),Re.return(t),et.return(r)}function Wi(a,n,e){return a?(a!==n&&(Wi(a.parent,n,e),a.updateLocalTransform(),e.append(a.localTransform)),e):(ae("Mask bounds, renderable is not inside the root container"),e)}var Ni=function(){function a(n){E(this,a),this.priority=0,this.pipe="alphaMask",n!=null&&n.mask&&this.init(n.mask)}return B(a,[{key:"init",value:function(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Lr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}},{key:"reset",value:function(){this.mask.measurable=!0,this.mask=null}},{key:"addBounds",value:function(e,r){Ui(this.mask,e,r)}},{key:"addLocalBounds",value:function(e,r){Di(this.mask,e,r)}},{key:"containsPoint",value:function(e,r){var t=this.mask;return r(t,e)}},{key:"destroy",value:function(){this.reset()}}],[{key:"test",value:function(e){return e instanceof Lr}}]),a}();Ni.extension=N.MaskEffect;var Vi=function(){function a(n){E(this,a),this.priority=0,this.pipe="colorMask",n!=null&&n.mask&&this.init(n.mask)}return B(a,[{key:"init",value:function(e){this.mask=e}},{key:"destroy",value:function(){}}],[{key:"test",value:function(e){return typeof e=="number"}}]),a}();Vi.extension=N.MaskEffect;var Hi=function(){function a(n){E(this,a),this.priority=0,this.pipe="stencilMask",n!=null&&n.mask&&this.init(n.mask)}return B(a,[{key:"init",value:function(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}},{key:"reset",value:function(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}},{key:"addBounds",value:function(e,r){Ui(this.mask,e,r)}},{key:"addLocalBounds",value:function(e,r){Di(this.mask,e,r)}},{key:"containsPoint",value:function(e,r){var t=this.mask;return r(t,e)}},{key:"destroy",value:function(){this.reset()}}],[{key:"test",value:function(e){return e instanceof oe}}]),a}();Hi.extension=N.MaskEffect;var Fs={createCanvas:function(n,e){var r=document.createElement("canvas");return r.width=n,r.height=e,r},getCanvasRenderingContext2D:function(){return CanvasRenderingContext2D},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var n;return(n=document.baseURI)!==null&&n!==void 0?n:window.location.href},getFontFaceSet:function(){return document.fonts},fetch:function(a){function n(e,r){return a.apply(this,arguments)}return n.toString=function(){return a.toString()},n}(function(a,n){return fetch(a,n)}),parseXML:function(n){var e=new DOMParser;return e.parseFromString(n,"text/xml")}},Wn=Fs,ne={get:function(){return Wn},set:function(n){Wn=n}},Yi=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e),r.resource||(r.resource=ne.get().createCanvas()),r.width||(r.width=r.resource.width,r.autoDensity||(r.width/=r.resolution)),r.height||(r.height=r.resource.height,r.autoDensity||(r.height/=r.resolution)),t=n.call(this,r),t.uploadMethodId="image",t.autoDensity=r.autoDensity;var i=r.resource;return(t.pixelWidth!==i.width||t.pixelWidth!==i.height)&&t.resizeCanvas(),t.transparent=!!r.transparent,t}return B(e,[{key:"resizeCanvas",value:function(){this.autoDensity&&(this.resource.style.width="".concat(this.width,"px"),this.resource.style.height="".concat(this.height,"px")),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.height,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._resolution,u=Ge(Me(e.prototype),"resize",this).call(this,t,i,s);return u&&this.resizeCanvas(),u}}],[{key:"test",value:function(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}}]),e}(Ie);Yi.extension=N.TextureSource;var wt=function(a){Q(e,a);var n=J(e);function e(r){var t;if(E(this,e),r.resource&&globalThis.HTMLImageElement&&r.resource instanceof HTMLImageElement){var i=ne.get().createCanvas(r.resource.width,r.resource.height),s=i.getContext("2d");s.drawImage(r.resource,0,0),r.resource=i,ae("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}return t=n.call(this,r),t.uploadMethodId="image",t.autoGarbageCollect=!0,t}return B(e,null,[{key:"test",value:function(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap}}]),e}(Ie);wt.extension=N.TextureSource;var Gr=function(a){return a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a}(Gr||{}),ur=function(){function a(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;E(this,a),this.next=null,this.previous=null,this._destroyed=!1,this._fn=n,this._context=e,this.priority=r,this._once=t}return B(a,[{key:"match",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this._fn===e&&this._context===r}},{key:"emit",value:function(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));var r=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),r}},{key:"connect",value:function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}},{key:"destroy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r}}]),a}(),Xi=function(){function a(){var n=this;E(this,a),this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ur(null,null,1/0),this.deltaMS=1/a.targetFPMS,this.elapsedMS=1/a.targetFPMS,this._tick=function(e){n._requestId=null,n.started&&(n.update(e),n.started&&n._requestId===null&&n._head.next&&(n._requestId=requestAnimationFrame(n._tick)))}}return B(a,[{key:"_requestIfNeeded",value:function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}},{key:"_cancelIfNeeded",value:function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}},{key:"_startIfPossible",value:function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}},{key:"add",value:function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gr.NORMAL;return this._addListener(new ur(e,r,t))}},{key:"addOnce",value:function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gr.NORMAL;return this._addListener(new ur(e,r,t,!0))}},{key:"_addListener",value:function(e){var r=this._head.next,t=this._head;if(!r)e.connect(t);else{for(;r;){if(e.priority>r.priority){e.connect(t);break}t=r,r=r.next}e.previous||e.connect(t)}return this._startIfPossible(),this}},{key:"remove",value:function(e,r){for(var t=this._head.next;t;)t.match(e,r)?t=t.destroy():t=t.next;return this._head.next||this._cancelIfNeeded(),this}},{key:"count",get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e}},{key:"start",value:function(){this.started||(this.started=!0,this._requestIfNeeded())}},{key:"stop",value:function(){this.started&&(this.started=!1,this._cancelIfNeeded())}},{key:"destroy",value:function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:performance.now(),r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*a.targetFPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}},{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),t=Math.min(Math.max(0,r)/1e3,a.targetFPMS);this._maxElapsedMS=1/t}},{key:"maxFPS",get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}}],[{key:"shared",get:function(){if(!a._shared){var e=a._shared=new a;e.autoStart=!0,e._protected=!0}return a._shared}},{key:"system",get:function(){if(!a._system){var e=a._system=new a;e.autoStart=!0,e._protected=!0}return a._system}}]),a}();Xi.targetFPMS=.06;var Et=Xi,or;function ji(){return Or.apply(this,arguments)}function Or(){return Or=G(k().mark(function a(){var n;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(n=or)!==null&&n!==void 0||(or=G(k().mark(function t(){var i,s,u,o,h,l,c;return k().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=document.createElement("canvas"),u=s.getContext("webgl"),u){v.next=4;break}return v.abrupt("return","premultiply-alpha-on-upload");case 4:return v.next=6,new Promise(function(d){var p=document.createElement("video");p.onloadeddata=function(){return d(p)},p.onerror=function(){return d(null)},p.autoplay=!1,p.crossOrigin="anonymous",p.preload="auto",p.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",p.load()});case 6:if(o=v.sent,o){v.next=9;break}return v.abrupt("return","premultiply-alpha-on-upload");case 9:return h=u.createTexture(),u.bindTexture(u.TEXTURE_2D,h),l=u.createFramebuffer(),u.bindFramebuffer(u.FRAMEBUFFER,l),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,h,0),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,u.NONE),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,o),c=new Uint8Array(4),u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,c),u.deleteFramebuffer(l),u.deleteTexture(h),(i=u.getExtension("WEBGL_lose_context"))===null||i===void 0||i.loseContext(),v.abrupt("return",c[0]<=c[3]?"premultiplied-alpha":"premultiply-alpha-on-upload");case 23:case"end":return v.stop()}},t)}))()),r.abrupt("return",or);case 2:case"end":return r.stop()}},a)})),Or.apply(this,arguments)}var jt=function(a){Q(e,a);var n=J(e);function e(r){var t,i;return E(this,e),i=n.call(this,r),i.isReady=!1,i.uploadMethodId="video",r=C(C({},e.defaultOptions),r),i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=r.autoPlay!==!1,i.alphaMode=(t=r.alphaMode)!==null&&t!==void 0?t:"premultiply-alpha-on-upload",i._videoFrameRequestCallback=i._videoFrameRequestCallback.bind(fe(i)),i._videoFrameRequestCallbackHandle=null,i._load=null,i._resolve=null,i._reject=null,i._onCanPlay=i._onCanPlay.bind(fe(i)),i._onCanPlayThrough=i._onCanPlayThrough.bind(fe(i)),i._onError=i._onError.bind(fe(i)),i._onPlayStart=i._onPlayStart.bind(fe(i)),i._onPlayStop=i._onPlayStop.bind(fe(i)),i._onSeeked=i._onSeeked.bind(fe(i)),r.autoLoad!==!1&&i.load(),i}return B(e,[{key:"updateFrame",value:function(){if(!this.destroyed){if(this._updateFPS){var t=Et.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}},{key:"_videoFrameRequestCallback",value:function(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}},{key:"isValid",get:function(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}},{key:"load",value:function(){var r=G(k().mark(function i(){var s=this,u,o;return k().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._load){l.next=2;break}return l.abrupt("return",this._load);case 2:return u=this.resource,o=this.options,(u.readyState===u.HAVE_ENOUGH_DATA||u.readyState===u.HAVE_FUTURE_DATA)&&u.width&&u.height&&(u.complete=!0),u.addEventListener("play",this._onPlayStart),u.addEventListener("pause",this._onPlayStop),u.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(o.preload||u.addEventListener("canplay",this._onCanPlay),u.addEventListener("canplaythrough",this._onCanPlayThrough),u.addEventListener("error",this._onError,!0)),l.next=11,ji();case 11:return this.alphaMode=l.sent,this._load=new Promise(function(c,f){s.isValid?c(s):(s._resolve=c,s._reject=f,o.preloadTimeoutMs!==void 0&&(s._preloadTimeout=setTimeout(function(){s._onError(new ErrorEvent("Preload exceeded timeout of ".concat(o.preloadTimeoutMs,"ms")))})),u.load())}),l.abrupt("return",this._load);case 14:case"end":return l.stop()}},i,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"_onError",value:function(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}},{key:"_isSourcePlaying",value:function(){var t=this.resource;return!t.paused&&!t.ended}},{key:"_isSourceReady",value:function(){var t=this.resource;return t.readyState>2}},{key:"_onPlayStart",value:function(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}},{key:"_onPlayStop",value:function(){this._configureAutoUpdate()}},{key:"_onSeeked",value:function(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}},{key:"_onCanPlay",value:function(){var t=this.resource;t.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}},{key:"_onCanPlayThrough",value:function(){var t=this.resource;t.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}},{key:"_mediaReady",value:function(){var t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}},{key:"destroy",value:function(){this._configureAutoUpdate();var t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Ge(Me(e.prototype),"destroy",this).call(this)}},{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}},{key:"updateFPS",get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}},{key:"_configureAutoUpdate",value:function(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Et.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Et.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Et.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}}],[{key:"test",value:function(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}}]),e}(Ie);jt.extension=N.TextureSource;jt.defaultOptions=C(C({},Ie.defaultOptions),{},{autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1});jt.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Dt=jt,Se=function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Array.isArray(n)||(n=[n]),e?n.map(function(t){return typeof t=="string"||r?e(t):t}):n},Ls=function(){function a(){E(this,a),this._parsers=[],this._cache=new Map,this._cacheMap=new Map}return B(a,[{key:"reset",value:function(){this._cacheMap.clear(),this._cache.clear()}},{key:"has",value:function(e){return this._cache.has(e)}},{key:"get",value:function(e){var r=this._cache.get(e);return r||ae("[Assets] Asset id ".concat(e," was not found in the Cache")),r}},{key:"set",value:function(e,r){for(var t=this,i=Se(e),s,u=0;u<this.parsers.length;u++){var o=this.parsers[u];if(o.test(r)){s=o.getCacheableAssets(i,r);break}}var h=new Map(Object.entries(s||{}));s||i.forEach(function(f){h.set(f,r)});var l=X(h.keys()),c={cacheKeys:l,keys:i};i.forEach(function(f){t._cacheMap.set(f,c)}),l.forEach(function(f){var v=s?s[f]:r;t._cache.has(f)&&t._cache.get(f)!==v&&ae("[Cache] already has key:",f),t._cache.set(f,h.get(f))})}},{key:"remove",value:function(e){var r=this;if(!this._cacheMap.has(e)){ae("[Assets] Asset id ".concat(e," was not found in the Cache"));return}var t=this._cacheMap.get(e),i=t.cacheKeys;i.forEach(function(s){r._cache.delete(s)}),t.keys.forEach(function(s){r._cacheMap.delete(s)})}},{key:"parsers",get:function(){return this._parsers}}]),a}(),le=new Ls,zr=[];_e.handleByList(N.TextureSource,zr);function Gs(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=a&&a.resource,e=n?a.resource:a,r=n?a:{resource:a},t=0;t<zr.length;t++){var i=zr[t];if(i.test(e))return new i(r)}throw new Error("Could not find a source type for resource: ".concat(r.resource))}function Os(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=a&&a.resource,r=e?a.resource:a,t=e?a:{resource:a};if(!n&&le.has(r))return le.get(r);var i=new V({source:Gs(t)});return i.on("destroy",function(){le.has(r)&&le.remove(r)}),n||le.set(r,i),i}function zs(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof a=="string"?le.get(a):a instanceof Ie?new V({source:a}):Os(a,n)}V.from=zs;_e.add(Ni,Vi,Hi,Dt,wt,Yi,rn);var $e=function(a){return a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a}($e||{});function ke(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(a)))}function st(a){var n=a.split("?")[0];return n.split("#")[0]}function Us(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ds(a,n,e){return a.replace(new RegExp(Us(n),"g"),e)}function Ws(a,n){for(var e="",r=0,t=-1,i=0,s=-1,u=0;u<=a.length;++u){if(u<a.length)s=a.charCodeAt(u);else{if(s===47)break;s=47}if(s===47){if(!(t===u-1||i===1))if(t!==u-1&&i===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var o=e.lastIndexOf("/");if(o!==e.length-1){o===-1?(e="",r=0):(e=e.slice(0,o),r=e.length-1-e.lastIndexOf("/")),t=u,i=0;continue}}else if(e.length===2||e.length===1){e="",r=0,t=u,i=0;continue}}n&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/".concat(a.slice(t+1,u)):e=a.slice(t+1,u),r=u-t-1;t=u,i=0}else s===46&&i!==-1?++i:i=-1}return e}var Te={toPosix:function(n){return Ds(n,"\\","/")},isUrl:function(n){return/^https?:/.test(this.toPosix(n))},isDataUrl:function(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl:function(n){return n.startsWith("blob:")},hasProtocol:function(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol:function(n){ke(n),n=this.toPosix(n);var e=/^file:\/\/\//.exec(n);if(e)return e[0];var r=/^[^/:]+:\/{0,2}/.exec(n);return r?r[0]:""},toAbsolute:function(n,e,r){if(ke(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;var t=st(this.toPosix(e??ne.get().getBaseUrl())),i=st(this.toPosix(r??this.rootname(t)));if(n=this.toPosix(n),n.startsWith("/"))return Te.join(i,n.slice(1));var s=this.isAbsolute(n)?n:this.join(t,n);return s},normalize:function(n){if(ke(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);var e="",r=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));var t=n.endsWith("/");return n=Ws(n,!1),n.length>0&&t&&(n+="/"),r?"/".concat(n):e+n},isAbsolute:function(n){return ke(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join:function(){if(arguments.length===0)return".";for(var n,e=0;e<arguments.length;++e){var r=e<0||arguments.length<=e?void 0:arguments[e];if(ke(r),r.length>0)if(n===void 0)n=r;else{var t,i=(t=e-1<0||arguments.length<=e-1?void 0:arguments[e-1])!==null&&t!==void 0?t:"";this.joinExtensions.includes(this.extname(i).toLowerCase())?n+="/../".concat(r):n+="/".concat(r)}}return n===void 0?".":this.normalize(n)},dirname:function(n){if(ke(n),n.length===0)return".";n=this.toPosix(n);var e=n.charCodeAt(0),r=e===47,t=-1,i=!0,s=this.getProtocol(n),u=n;n=n.slice(s.length);for(var o=n.length-1;o>=1;--o)if(e=n.charCodeAt(o),e===47){if(!i){t=o;break}}else i=!1;return t===-1?r?"/":this.isUrl(u)?s+n:s:r&&t===1?"//":s+n.slice(0,t)},rootname:function(n){ke(n),n=this.toPosix(n);var e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){var r=n.indexOf("/",e.length);r!==-1?e=n.slice(0,r):e=n,e.endsWith("/")||(e+="/")}return e},basename:function(n,e){ke(n),e&&ke(e),n=st(this.toPosix(n));var r=0,t=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";var u=e.length-1,o=-1;for(s=n.length-1;s>=0;--s){var h=n.charCodeAt(s);if(h===47){if(!i){r=s+1;break}}else o===-1&&(i=!1,o=s+1),u>=0&&(h===e.charCodeAt(u)?--u===-1&&(t=s):(u=-1,t=o))}return r===t?t=o:t===-1&&(t=n.length),n.slice(r,t)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){r=s+1;break}}else t===-1&&(i=!1,t=s+1);return t===-1?"":n.slice(r,t)},extname:function(n){ke(n),n=st(this.toPosix(n));for(var e=-1,r=0,t=-1,i=!0,s=0,u=n.length-1;u>=0;--u){var o=n.charCodeAt(u);if(o===47){if(!i){r=u+1;break}continue}t===-1&&(i=!1,t=u+1),o===46?e===-1?e=u:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||t===-1||s===0||s===1&&e===t-1&&e===r+1?"":n.slice(e,t)},parse:function(n){ke(n);var e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=st(this.toPosix(n));var r=n.charCodeAt(0),t=this.isAbsolute(n),i;e.root=this.rootname(n),t||this.hasProtocol(n)?i=1:i=0;for(var s=-1,u=0,o=-1,h=!0,l=n.length-1,c=0;l>=i;--l){if(r=n.charCodeAt(l),r===47){if(!h){u=l+1;break}continue}o===-1&&(h=!1,o=l+1),r===46?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||o===-1||c===0||c===1&&s===o-1&&s===u+1?o!==-1&&(u===0&&t?e.base=e.name=n.slice(1,o):e.base=e.name=n.slice(u,o)):(u===0&&t?(e.name=n.slice(1,s),e.base=n.slice(1,o)):(e.name=n.slice(u,s),e.base=n.slice(u,o)),e.ext=n.slice(s,o)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function qi(a,n,e,r,t){for(var i=n[e],s=0;s<i.length;s++){var u=i[s];e<n.length-1?qi(a.replace(r[e],u),n,e+1,r,t):t.push(a.replace(r[e],u))}}function Ns(a){var n=/\{(.*?)\}/g,e=a.match(n),r=[];if(e){var t=[];e.forEach(function(i){var s=i.substring(1,i.length-1).split(",");t.push(s)}),qi(a,t,0,e,r)}else r.push(a);return r}var Ht=function(n){return!Array.isArray(n)},tt=function(){function a(){var n=this;E(this,a),this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:function(r,t){return"".concat(r).concat(n._bundleIdConnector).concat(t)},extractAssetIdFromBundle:function(r,t){return t.replace("".concat(r).concat(n._bundleIdConnector),"")}},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}return B(a,[{key:"setBundleIdentifier",value:function(e){var r,t,i;if(this._bundleIdConnector=(r=e.connector)!==null&&r!==void 0?r:this._bundleIdConnector,this._createBundleAssetId=(t=e.createBundleAssetId)!==null&&t!==void 0?t:this._createBundleAssetId,this._extractAssetIdFromBundle=(i=e.extractAssetIdFromBundle)!==null&&i!==void 0?i:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}},{key:"prefer",value:function(){for(var e=this,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];t.forEach(function(s){e._preferredOrder.push(s),s.priority||(s.priority=Object.keys(s.params))}),this._resolverHash={}}},{key:"basePath",get:function(){return this._basePath},set:function(e){this._basePath=e}},{key:"rootPath",get:function(){return this._rootPath},set:function(e){this._rootPath=e}},{key:"parsers",get:function(){return this._parsers}},{key:"reset",value:function(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}},{key:"setDefaultSearchParams",value:function(e){if(typeof e=="string")this._defaultSearchParams=e;else{var r=e;this._defaultSearchParams=Object.keys(r).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))}).join("&")}}},{key:"getAlias",value:function(e){var r=e.alias,t=e.src,i=Se(r||t,function(s){return typeof s=="string"?s:Array.isArray(s)?s.map(function(u){var o;return(o=u==null?void 0:u.src)!==null&&o!==void 0?o:u}):s!=null&&s.src?s.src:s},!0);return i}},{key:"addManifest",value:function(e){var r=this;this._manifest&&ae("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(function(t){r.addBundle(t.name,t.assets)})}},{key:"addBundle",value:function(e,r){var t=this,i=[],s=r;Array.isArray(r)||(s=Object.entries(r).map(function(u){var o=ue(u,2),h=o[0],l=o[1];return typeof l=="string"||Array.isArray(l)?{alias:h,src:l}:C({alias:h},l)})),s.forEach(function(u){var o=u.src,h=u.alias,l;if(typeof h=="string"){var c=t._createBundleAssetId(e,h);i.push(c),l=[h,c]}else{var f=h.map(function(v){return t._createBundleAssetId(e,v)});i.push.apply(i,X(f)),l=[].concat(X(h),X(f))}t.add(C(C({},u),{alias:l,src:o}))}),this._bundles[e]=i}},{key:"add",value:function(e){var r=this,t=[];Array.isArray(e)?t.push.apply(t,X(e)):t.push(e);var i;i=function(o){r.hasKey(o)&&ae("[Resolver] already has key: ".concat(o," overwriting"))};var s=Se(t);s.forEach(function(u){var o=u.src,h=u.data,l=u.format,c=u.loadParser,f=Se(o).map(function(p){return typeof p=="string"?Ns(p):Array.isArray(p)?p:[p]}),v=r.getAlias(u);Array.isArray(v)?v.forEach(i):i(v);var d=[];f.forEach(function(p){p.forEach(function(g){var y={};if(he(g)!=="object"){y.src=g;for(var b=0;b<r._parsers.length;b++){var m=r._parsers[b];if(m.test(g)){y=m.parse(g);break}}}else{var w,A,I;h=(w=g.data)!==null&&w!==void 0?w:h,l=(A=g.format)!==null&&A!==void 0?A:l,c=(I=g.loadParser)!==null&&I!==void 0?I:c,y=C(C({},y),g)}if(!v)throw new Error("[Resolver] alias is undefined for this asset: ".concat(y.src));y=r._buildResolvedAsset(y,{aliases:v,data:h,format:l,loadParser:c}),d.push(y)})}),v.forEach(function(p){r._assetMap[p]=d})})}},{key:"resolveBundle",value:function(e){var r=this,t=Ht(e);e=Se(e);var i={};return e.forEach(function(s){var u=r._bundles[s];if(u){var o=r.resolve(u),h={};for(var l in o){var c=o[l];h[r._extractAssetIdFromBundle(s,l)]=c}i[s]=h}}),t?i[e[0]]:i}},{key:"resolveUrl",value:function(e){var r=this.resolve(e);if(typeof e!="string"){var t={};for(var i in r)t[i]=r[i].src;return t}return r.src}},{key:"resolve",value:function(e){var r=this,t=Ht(e);e=Se(e);var i={};return e.forEach(function(s){if(!r._resolverHash[s])if(r._assetMap[s]){var u=r._assetMap[s],o=r._getPreferredOrder(u);o==null||o.priority.forEach(function(h){o.params[h].forEach(function(l){var c=u.filter(function(f){return f[h]?f[h]===l:!1});c.length&&(u=c)})}),r._resolverHash[s]=u[0]}else r._resolverHash[s]=r._buildResolvedAsset({alias:[s],src:s},{});i[s]=r._resolverHash[s]}),t?i[e[0]]:i}},{key:"hasKey",value:function(e){return!!this._assetMap[e]}},{key:"hasBundle",value:function(e){return!!this._bundles[e]}},{key:"_getPreferredOrder",value:function(e){for(var r=this,t=function(){var o=e[0],h=r._preferredOrder.find(function(l){return l.params.format.includes(o.format)});if(h)return{v:h}},i,s=0;s<e.length;s++)if(i=t(),i)return i.v;return this._preferredOrder[0]}},{key:"_appendDefaultSearchParams",value:function(e){if(!this._defaultSearchParams)return e;var r=/\?/.test(e)?"&":"?";return"".concat(e).concat(r).concat(this._defaultSearchParams)}},{key:"_buildResolvedAsset",value:function(e,r){var t,i,s=r.aliases,u=r.data,o=r.loadParser,h=r.format;return(this._basePath||this._rootPath)&&(e.src=Te.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(t=s??e.alias)!==null&&t!==void 0?t:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=C(C({},u||{}),e.data),e.loadParser=o??e.loadParser,e.format=(i=h??e.format)!==null&&i!==void 0?i:Vs(e.src),e}}]),a}();tt.RETINA_PREFIX=/@([0-9\.]+)x/;function Vs(a){return a.split(".").pop().split("?").shift().split("#").shift()}var Nn=function(n,e){var r=e.split("?")[1];return r&&(n+="?".concat(r)),n},$i=function(){function a(n,e){E(this,a),this.linkedSheets=[],this._texture=n instanceof V?n:null,this.textureSource=n.source,this.textures={},this.animations={},this.data=e;var r=parseFloat(e.meta.scale);r?(this.resolution=r,n.source.resolution=this.resolution):this.resolution=n.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return B(a,[{key:"parse",value:function(){var e=this;return new Promise(function(r){e._callback=r,e._batchIndex=0,e._frameKeys.length<=a.BATCH_SIZE?(e._processFrames(0),e._processAnimations(),e._parseComplete()):e._nextBatch()})}},{key:"_processFrames",value:function(e){for(var r=e,t=a.BATCH_SIZE;r-e<t&&r<this._frameKeys.length;){var i=this._frameKeys[r],s=this._frames[i],u=s.frame;if(u){var o=null,h=null,l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new pe(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?o=new pe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):o=new pe(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new pe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[i]=new V({source:this.textureSource,frame:o,orig:c,trim:h,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:i.toString()})}r++}}},{key:"_processAnimations",value:function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var t=0;t<e[r].length;t++){var i=e[r][t];this.animations[r].push(this.textures[i])}}}},{key:"_parseComplete",value:function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}},{key:"_nextBatch",value:function(){var e=this;this._processFrames(this._batchIndex*a.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*a.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)}},{key:"destroy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;for(var r in this.textures)this.textures[r].destroy();if(this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e){var t;(t=this._texture)===null||t===void 0||t.destroy(),this.textureSource.destroy()}this._texture=null,this.textureSource=null,this.linkedSheets=[]}}]),a}();$i.BATCH_SIZE=1e3;var Vn=$i,Hs=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Ki(a,n,e){var r={};if(a.forEach(function(i){r[i]=n}),Object.keys(n.textures).forEach(function(i){r[i]=n.textures[i]}),!e){var t=Te.dirname(a[0]);n.linkedSheets.forEach(function(i,s){var u=Ki(["".concat(t,"/").concat(n.data.meta.related_multi_packs[s])],i,!0);Object.assign(r,u)})}return r}var Ys={extension:N.Asset,cache:{test:function(n){return n instanceof Vn},getCacheableAssets:function(n,e){return Ki(n,e,!1)}},resolver:{test:function(n){var e=n.split("?")[0],r=e.split("."),t=r.pop(),i=r.pop();return t==="json"&&Hs.includes(i)},parse:function(n){var e,r,t=n.split(".");return{resolution:parseFloat((e=(r=tt.RETINA_PREFIX.exec(n))===null||r===void 0?void 0:r[1])!==null&&e!==void 0?e:"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:N.LoadParser,priority:$e.Normal},testParse:function(n,e){return G(k().mark(function r(){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Te.extname(e.src).toLowerCase()===".json"&&!!n.frames);case 1:case"end":return i.stop()}},r)}))()},parse:function(n,e,r){return G(k().mark(function t(){var i,s,u,o,h,l,c,f,v,d,p,g,y,b,m,w,A,I;return k().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(u=(i=e==null?void 0:e.data)!==null&&i!==void 0?i:{},o=u.texture,h=u.imageFilename,l=Te.dirname(e.src),l&&l.lastIndexOf("/")!==l.length-1&&(l+="/"),!(o instanceof V)){M.next=7;break}c=o,M.next=12;break;case 7:return f=Nn(l+(h??n.meta.image),e.src),M.next=10,r.load([f]);case 10:v=M.sent,c=v[f];case 12:return d=new Vn(c.source,n),M.next=15,d.parse();case 15:if(p=n==null||(s=n.meta)===null||s===void 0?void 0:s.related_multi_packs,!Array.isArray(p)){M.next=45;break}g=[],y=xt(p),M.prev=19,y.s();case 21:if((b=y.n()).done){M.next=32;break}if(w=b.value,typeof w=="string"){M.next=25;break}return M.abrupt("continue",30);case 25:if(A=l+w,!((m=e.data)!==null&&m!==void 0&&m.ignoreMultiPack)){M.next=28;break}return M.abrupt("continue",30);case 28:A=Nn(A,e.src),g.push(r.load({src:A,data:{ignoreMultiPack:!0}}));case 30:M.next=21;break;case 32:M.next=37;break;case 34:M.prev=34,M.t0=M.catch(19),y.e(M.t0);case 37:return M.prev=37,y.f(),M.finish(37);case 40:return M.next=42,Promise.all(g);case 42:I=M.sent,d.linkedSheets=I,I.forEach(function(W){W.linkedSheets=[d].concat(d.linkedSheets.filter(function(z){return z!==W}))});case 45:return M.abrupt("return",d);case 46:case"end":return M.stop()}},t,null,[[19,34,37,40]])}))()},unload:function(n,e,r){return G(k().mark(function t(){return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.unload(n.textureSource._sourceOrigin);case 2:n.destroy(!1);case 3:case"end":return s.stop()}},t)}))()}}};_e.add(Ys);var lr=Object.create(null),Hn=Object.create(null);function an(a,n){var e=Hn[a];return e===void 0&&(lr[n]===void 0&&(lr[n]=1),Hn[a]=e=lr[n]++),e}var Bt;function Xs(){var a;if(!Bt||(a=Bt)!==null&&a!==void 0&&a.isContextLost()){var n=ne.get().createCanvas();Bt=n.getContext("webgl",{})}return Bt}var Rt;function js(){if(!Rt){Rt="mediump";var a=Xs();if(a&&a.getShaderPrecisionFormat){var n=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);Rt=n.precision?"highp":"mediump"}}return Rt}function qs(a,n,e){return n?a:e?(a=a.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        `.concat(a,`
        `)):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        `.concat(a,`
        `)}function $s(a,n,e){var r=e?n.maxSupportedFragmentPrecision:n.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){var t=e?n.requestedFragmentPrecision:n.requestedVertexPrecision;return t==="highp"&&r!=="highp"&&(t="mediump"),"precision ".concat(t,` float;
`).concat(a)}else if(r!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function Ks(a,n){return n?`#version 300 es
`.concat(a):a}var Zs={},Qs={};function Js(a,n){var e=n.name,r=e===void 0?"pixi-program":e,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=r.replace(/\s+/g,"-"),r+=t?"-fragment":"-vertex";var i=t?Zs:Qs;if(i[r]?(i[r]++,r+="-".concat(i[r])):i[r]=1,a.indexOf("#define SHADER_NAME")!==-1)return a;var s="#define SHADER_NAME ".concat(r);return"".concat(s,`
`).concat(a)}function eu(a,n){return n?a.replace("#version 300 es",""):a}var hr={stripVersion:eu,ensurePrecision:$s,addProgramDefines:qs,setProgramName:Js,insertVersion:Ks},cr=Object.create(null),Zi=function(){function a(n){E(this,a),n=C(C({},a.defaultOptions),n);var e=n.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:n.preferredFragmentPrecision,requestedVertexPrecision:n.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:js()},setProgramName:{name:n.name},addProgramDefines:e,insertVersion:e},t=n.fragment,i=n.vertex;Object.keys(hr).forEach(function(s){var u=r[s];t=hr[s](t,u,!0),i=hr[s](i,u,!1)}),this.fragment=t,this.vertex=i,this._key=an("".concat(this.vertex,":").concat(this.fragment),"gl-program")}return B(a,[{key:"destroy",value:function(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}}],[{key:"from",value:function(e){var r="".concat(e.vertex,":").concat(e.fragment);return cr[r]||(cr[r]=new a(e)),cr[r]}}]),a}();Zi.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};var sn=Zi,Yn={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function tu(a){var n;return(n=Yn[a])!==null&&n!==void 0?n:Yn.float32}var ru={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function nu(a){var n=a.source,e=a.entryPoint,r={},t=n.indexOf("fn ".concat(e));if(t!==-1){var i=n.indexOf("->",t);if(i!==-1)for(var s=n.substring(t,i),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,o;(o=u.exec(s))!==null;){var h,l=(h=ru[o[3]])!==null&&h!==void 0?h:"float32";r[o[2]]={location:parseInt(o[1],10),format:l,stride:tu(l).stride,offset:0,instance:!1,start:0}}}return r}function fr(a){var n,e,r,t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,u=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,h=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,f=(n=a.match(t))===null||n===void 0?void 0:n.map(function(d){return{group:parseInt(d.match(i)[1],10),binding:parseInt(d.match(s)[1],10),name:d.match(u)[2],isUniform:d.match(u)[1]==="<uniform>",type:d.match(o)[1]}});if(!f)return{groups:[],structs:[]};var v=(e=(r=a.match(h))===null||r===void 0?void 0:r.map(function(d){var p=d.match(c)[1],g=d.match(l).reduce(function(y,b){var m=b.split(":"),w=ue(m,2),A=w[0],I=w[1];return y[A.trim()]=I.trim(),y},{});return g?{name:p,members:g}:null}).filter(function(d){var p=d.name;return f.some(function(g){return g.type===p})}))!==null&&e!==void 0?e:[];return{groups:f,structs:v}}var ct=function(a){return a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a}(ct||{});function iu(a){for(var n=a.groups,e=[],r=0;r<n.length;r++){var t=n[r];e[t.group]||(e[t.group]=[]),t.isUniform?e[t.group].push({binding:t.binding,visibility:ct.VERTEX|ct.FRAGMENT,buffer:{type:"uniform"}}):t.type==="sampler"?e[t.group].push({binding:t.binding,visibility:ct.FRAGMENT,sampler:{type:"filtering"}}):t.type==="texture_2d"&&e[t.group].push({binding:t.binding,visibility:ct.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function au(a){for(var n=a.groups,e=[],r=0;r<n.length;r++){var t=n[r];e[t.group]||(e[t.group]={}),e[t.group][t.name]=t.binding}return e}function su(a,n){var e=new Set,r=new Set,t=[].concat(X(a.structs),X(n.structs)).filter(function(s){return e.has(s.name)?!1:(e.add(s.name),!0)}),i=[].concat(X(a.groups),X(n.groups)).filter(function(s){var u="".concat(s.name,"-").concat(s.binding);return r.has(u)?!1:(r.add(u),!0)});return{structs:t,groups:i}}var dr=Object.create(null),un=function(){function a(n){var e,r;E(this,a),this._layoutKey=0;var t=n.fragment,i=n.vertex,s=n.layout,u=n.gpuLayout,o=n.name;if(this.name=o,this.fragment=t,this.vertex=i,t.source===i.source){var h=fr(t.source);this.structsAndGroups=h}else{var l=fr(i.source),c=fr(t.source);this.structsAndGroups=su(l,c)}this.layout=s??au(this.structsAndGroups),this.gpuLayout=u??iu(this.structsAndGroups),this.autoAssignGlobalUniforms=((e=this.layout[0])===null||e===void 0?void 0:e.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((r=this.layout[1])===null||r===void 0?void 0:r.localUniforms)!==void 0,this._generateProgramKey()}return B(a,[{key:"_generateProgramKey",value:function(){var e=this.vertex,r=this.fragment,t=e.source+r.source+e.entryPoint+r.entryPoint;this._layoutKey=an(t,"program")}},{key:"attributeData",get:function(){var e;return(e=this._attributeData)!==null&&e!==void 0||(this._attributeData=nu(this.vertex)),this._attributeData}},{key:"destroy",value:function(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}}],[{key:"from",value:function(e){var r="".concat(e.vertex.source,":").concat(e.fragment.source,":").concat(e.fragment.entryPoint,":").concat(e.vertex.entryPoint);return dr[r]||(dr[r]=new a(e)),dr[r]}}]),a}();function uu(a,n){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*n);case"vec3<f32>":return new Float32Array(3*n);case"vec4<f32>":return new Float32Array(4*n);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Qi=function(){function a(n,e){E(this,a),this._touched=0,this.uid=ee("uniform"),this._resourceType="uniformGroup",this._resourceId=ee("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e=C(C({},a.defaultOptions),e),this.uniformStructures=n;var r={};for(var t in n){var i,s,u=n[t];u.name=t,u.size=(i=u.size)!==null&&i!==void 0?i:1,(s=u.value)!==null&&s!==void 0||(u.value=uu(u.type,u.size)),r[t]=u.value}this.uniforms=r,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=an(Object.keys(r).map(function(o){return"".concat(o,"-").concat(n[o].type)}).join("-"),"uniform-group")}return B(a,[{key:"update",value:function(){this._dirtyId++}}]),a}();Qi.defaultOptions={ubo:!1,isStatic:!1};var ou=Qi,Wt=function(){function a(n){E(this,a),this.resources=Object.create(null),this._dirty=!0;var e=0;for(var r in n){var t=n[r];this.setResource(t,e++)}this._updateKey()}return B(a,[{key:"_updateKey",value:function(){if(this._dirty){this._dirty=!1;var e=[],r=0;for(var t in this.resources)e[r++]=this.resources[t]._resourceId;this._key=e.join("|")}}},{key:"setResource",value:function(e,r){var t,i=this.resources[r];if(e!==i){if(i){var s;(s=e.off)===null||s===void 0||s.call(e,"change",this.onResourceChange,this)}(t=e.on)===null||t===void 0||t.call(e,"change",this.onResourceChange,this),this.resources[r]=e,this._dirty=!0}}},{key:"getResource",value:function(e){return this.resources[e]}},{key:"_touch",value:function(e){var r=this.resources;for(var t in r)r[t]._touched=e}},{key:"destroy",value:function(){var e=this.resources;for(var r in e){var t,i=e[r];(t=i.off)===null||t===void 0||t.call(i,"change",this.onResourceChange,this)}this.resources=null}},{key:"onResourceChange",value:function(e){if(this._dirty=!0,e.destroyed){var r=this.resources;for(var t in r)r[t]===e&&(r[t]=null)}else this._updateKey()}}]),a}(),pt=function(a){return a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a}(pt||{}),lu=["gpu","gl"],hu=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e),t=n.call(this),t._uniformBindMap=Object.create(null),t._ownedBindGroups=[];var i=r.gpuProgram,s=r.glProgram,u=r.groups,o=r.resources,h=r.compatibleRenderers,l=r.groupMap;t.gpuProgram=i,t.glProgram=s,h===void 0&&(h=0,i&&(h|=pt.WEBGPU),s&&(h|=pt.WEBGL)),t.compatibleRenderers=h;var c={};if(!o&&!u&&(o={}),o&&u)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&u&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&u&&l)for(var f in l)for(var v in l[f]){var d=l[f][v];c[d]={group:f,binding:v,name:d}}else if(i&&u&&!l){var p=i.structsAndGroups.groups;l={},p.forEach(function(S){l[S.group]=l[S.group]||{},l[S.group][S.binding]=S.name,c[S.name]=S})}else if(o){if(i){var b=i.structsAndGroups.groups;l={},b.forEach(function(S){l[S.group]=l[S.group]||{},l[S.group][S.binding]=S.name,c[S.name]=S})}else{l={},u={99:new Wt},t._ownedBindGroups.push(u[99]);var g=0;for(var y in o)c[y]={group:99,binding:g,name:y},l[99]=l[99]||{},l[99][g]=y,g++}u={};for(var m in o){var w=m,A=o[m];!A.source&&!A._resourceType&&(A=new ou(A));var I=c[w];I&&(u[I.group]||(u[I.group]=new Wt,t._ownedBindGroups.push(u[I.group])),u[I.group].setResource(A,I.binding))}}return t.groups=u,t._uniformBindMap=l,t.resources=t._buildResourceAccessor(u,c),t}return B(e,[{key:"addResource",value:function(t,i,s){var u,o;(u=this._uniformBindMap)[i]||(u[i]={}),(o=this._uniformBindMap[i])[s]||(o[s]=t),this.groups[i]||(this.groups[i]=new Wt,this._ownedBindGroups.push(this.groups[i]))}},{key:"_buildResourceAccessor",value:function(t,i){var s={},u=function(){var l=i[o];Object.defineProperty(s,l.name,{get:function(){return t[l.group].getResource(l.binding)},set:function(f){t[l.group].setResource(f,l.binding)}})};for(var o in i)u();return s}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.emit("destroy",this),t){var i,s;(i=this.gpuProgram)===null||i===void 0||i.destroy(),(s=this.glProgram)===null||s===void 0||s.destroy()}this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(function(u){u.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}}],[{key:"from",value:function(t){var i=t.gpu,s=t.gl,u=qe(t,lu),o,h;return i&&(o=un.from(i)),s&&(h=sn.from(s)),new e(C({gpuProgram:o,glProgram:h},u))}}]),e}(Ee),cu={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8},vr=0,gr=1,pr=2,mr=3,yr=4,br=5,Ur=function(){function a(){E(this,a),this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return B(a,[{key:"blend",get:function(){return!!(this.data&1<<vr)},set:function(e){!!(this.data&1<<vr)!==e&&(this.data^=1<<vr)}},{key:"offsets",get:function(){return!!(this.data&1<<gr)},set:function(e){!!(this.data&1<<gr)!==e&&(this.data^=1<<gr)}},{key:"cullMode",get:function(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"},set:function(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}},{key:"culling",get:function(){return!!(this.data&1<<pr)},set:function(e){!!(this.data&1<<pr)!==e&&(this.data^=1<<pr)}},{key:"depthTest",get:function(){return!!(this.data&1<<mr)},set:function(e){!!(this.data&1<<mr)!==e&&(this.data^=1<<mr)}},{key:"depthMask",get:function(){return!!(this.data&1<<br)},set:function(e){!!(this.data&1<<br)!==e&&(this.data^=1<<br)}},{key:"clockwiseFrontFace",get:function(){return!!(this.data&1<<yr)},set:function(e){!!(this.data&1<<yr)!==e&&(this.data^=1<<yr)}},{key:"blendMode",get:function(){return this._blendMode},set:function(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=cu[e]||0}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e}},{key:"toString",value:function(){return"[pixi.js/core:State blendMode=".concat(this.blendMode," clockwiseFrontFace=").concat(this.clockwiseFrontFace," culling=").concat(this.culling," depthMask=").concat(this.depthMask," polygonOffset=").concat(this.polygonOffset,"]")}}],[{key:"for2d",value:function(){var e=new a;return e.depthTest=!1,e.blend=!0,e}}]),a}();Ur.default2d=Ur.for2d();var fu=Ur,du=["gpu","gl"],Ji=function(a){Q(e,a);var n=J(e);function e(r){var t;return E(this,e),r=C(C({},e.defaultOptions),r),t=n.call(this,r),t.enabled=!0,t._state=fu.for2d(),t.padding=r.padding,typeof r.antialias=="boolean"?t.antialias=r.antialias?"on":"off":t.antialias=r.antialias,t.resolution=r.resolution,t.blendRequired=r.blendRequired,t.addResource("uTexture",0,1),t}return B(e,[{key:"apply",value:function(t,i,s,u){t.applyFilter(this,i,s,u)}},{key:"blendMode",get:function(){return this._state.blendMode},set:function(t){this._state.blendMode=t}}],[{key:"from",value:function(t){var i=t.gpu,s=t.gl,u=qe(t,du),o,h;return i&&(o=un.from(i)),s&&(h=sn.from(s)),new e(C({gpuProgram:o,glProgram:h},u))}}]),e}(hu);Ji.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1};var ea=Ji,Dr=[];_e.handleByNamedList(N.Environment,Dr);function vu(a){return Wr.apply(this,arguments)}function Wr(){return Wr=G(k().mark(function a(n){var e,r;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n){i.next=2;break}return i.abrupt("return");case 2:e=0;case 3:if(!(e<Dr.length)){i.next=12;break}if(r=Dr[e],!r.value.test()){i.next=9;break}return i.next=8,r.value.load();case 8:return i.abrupt("return");case 9:e++,i.next=3;break;case 12:case"end":return i.stop()}},a)})),Wr.apply(this,arguments)}var ut;function gu(){if(typeof ut=="boolean")return ut;try{var a=new Function("param1","param2","param3","return param1[param2] === param3;");ut=a({a:"b"},"a","b")===!0}catch{ut=!1}return ut}var on={exports:{}};on.exports=qt;on.exports.default=qt;function qt(a,n,e){e=e||2;var r=n&&n.length,t=r?n[0]*e:a.length,i=ta(a,0,t,e,!0),s=[];if(!i||i.next===i.prev)return s;var u,o,h,l,c,f,v;if(r&&(i=_u(a,n,i,e)),a.length>80*e){u=h=a[0],o=l=a[1];for(var d=e;d<t;d+=e)c=a[d],f=a[d+1],c<u&&(u=c),f<o&&(o=f),c>h&&(h=c),f>l&&(l=f);v=Math.max(h-u,l-o),v=v!==0?32767/v:0}return mt(i,s,e,u,o,v,0),s}function ta(a,n,e,r,t){var i,s;if(t===Hr(a,n,e,r)>0)for(i=n;i<e;i+=r)s=Xn(i,a[i],a[i+1],s);else for(i=e-r;i>=n;i-=r)s=Xn(i,a[i],a[i+1],s);return s&&$t(s,s.next)&&(bt(s),s=s.next),s}function je(a,n){if(!a)return a;n||(n=a);var e=a,r;do if(r=!1,!e.steiner&&($t(e,e.next)||K(e.prev,e,e.next)===0)){if(bt(e),e=n=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==n);return n}function mt(a,n,e,r,t,i,s){if(a){!s&&i&&Su(a,r,t,i);for(var u=a,o,h;a.prev!==a.next;){if(o=a.prev,h=a.next,i?mu(a,r,t,i):pu(a)){n.push(o.i/e|0),n.push(a.i/e|0),n.push(h.i/e|0),bt(a),a=h.next,u=h.next;continue}if(a=h,a===u){s?s===1?(a=yu(je(a),n,e),mt(a,n,e,r,t,i,2)):s===2&&bu(a,n,e,r,t,i):mt(je(a),n,e,r,t,i,1);break}}}}function pu(a){var n=a.prev,e=a,r=a.next;if(K(n,e,r)>=0)return!1;for(var t=n.x,i=e.x,s=r.x,u=n.y,o=e.y,h=r.y,l=t<i?t<s?t:s:i<s?i:s,c=u<o?u<h?u:h:o<h?o:h,f=t>i?t>s?t:s:i>s?i:s,v=u>o?u>h?u:h:o>h?o:h,d=r.next;d!==n;){if(d.x>=l&&d.x<=f&&d.y>=c&&d.y<=v&&Ke(t,u,i,o,s,h,d.x,d.y)&&K(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function mu(a,n,e,r){var t=a.prev,i=a,s=a.next;if(K(t,i,s)>=0)return!1;for(var u=t.x,o=i.x,h=s.x,l=t.y,c=i.y,f=s.y,v=u<o?u<h?u:h:o<h?o:h,d=l<c?l<f?l:f:c<f?c:f,p=u>o?u>h?u:h:o>h?o:h,g=l>c?l>f?l:f:c>f?c:f,y=Nr(v,d,n,e,r),b=Nr(p,g,n,e,r),m=a.prevZ,w=a.nextZ;m&&m.z>=y&&w&&w.z<=b;){if(m.x>=v&&m.x<=p&&m.y>=d&&m.y<=g&&m!==t&&m!==s&&Ke(u,l,o,c,h,f,m.x,m.y)&&K(m.prev,m,m.next)>=0||(m=m.prevZ,w.x>=v&&w.x<=p&&w.y>=d&&w.y<=g&&w!==t&&w!==s&&Ke(u,l,o,c,h,f,w.x,w.y)&&K(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;m&&m.z>=y;){if(m.x>=v&&m.x<=p&&m.y>=d&&m.y<=g&&m!==t&&m!==s&&Ke(u,l,o,c,h,f,m.x,m.y)&&K(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;w&&w.z<=b;){if(w.x>=v&&w.x<=p&&w.y>=d&&w.y<=g&&w!==t&&w!==s&&Ke(u,l,o,c,h,f,w.x,w.y)&&K(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function yu(a,n,e){var r=a;do{var t=r.prev,i=r.next.next;!$t(t,i)&&ra(t,r,r.next,i)&&yt(t,i)&&yt(i,t)&&(n.push(t.i/e|0),n.push(r.i/e|0),n.push(i.i/e|0),bt(r),bt(r.next),r=a=i),r=r.next}while(r!==a);return je(r)}function bu(a,n,e,r,t,i){var s=a;do{for(var u=s.next.next;u!==s.prev;){if(s.i!==u.i&&Mu(s,u)){var o=na(s,u);s=je(s,s.next),o=je(o,o.next),mt(s,n,e,r,t,i,0),mt(o,n,e,r,t,i,0);return}u=u.next}s=s.next}while(s!==a)}function _u(a,n,e,r){var t=[],i,s,u,o,h;for(i=0,s=n.length;i<s;i++)u=n[i]*r,o=i<s-1?n[i+1]*r:a.length,h=ta(a,u,o,r,!1),h===h.next&&(h.steiner=!0),t.push(Cu(h));for(t.sort(xu),i=0;i<t.length;i++)e=wu(t[i],e);return e}function xu(a,n){return a.x-n.x}function wu(a,n){var e=ku(a,n);if(!e)return n;var r=na(e,a);return je(r,r.next),je(e,e.next)}function ku(a,n){var e=n,r=a.x,t=a.y,i=-1/0,s;do{if(t<=e.y&&t>=e.next.y&&e.next.y!==e.y){var u=e.x+(t-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(u<=r&&u>i&&(i=u,s=e.x<e.next.x?e:e.next,u===r))return s}e=e.next}while(e!==n);if(!s)return null;var o=s,h=s.x,l=s.y,c=1/0,f;e=s;do r>=e.x&&e.x>=h&&r!==e.x&&Ke(t<l?r:i,t,h,l,t<l?i:r,t,e.x,e.y)&&(f=Math.abs(t-e.y)/(r-e.x),yt(e,a)&&(f<c||f===c&&(e.x>s.x||e.x===s.x&&Au(s,e)))&&(s=e,c=f)),e=e.next;while(e!==o);return s}function Au(a,n){return K(a.prev,a,n.prev)<0&&K(n.next,a,a.next)<0}function Su(a,n,e,r){var t=a;do t.z===0&&(t.z=Nr(t.x,t.y,n,e,r)),t.prevZ=t.prev,t.nextZ=t.next,t=t.next;while(t!==a);t.prevZ.nextZ=null,t.prevZ=null,Pu(t)}function Pu(a){var n,e,r,t,i,s,u,o,h=1;do{for(e=a,a=null,i=null,s=0;e;){for(s++,r=e,u=0,n=0;n<h&&(u++,r=r.nextZ,!!r);n++);for(o=h;u>0||o>0&&r;)u!==0&&(o===0||!r||e.z<=r.z)?(t=e,e=e.nextZ,u--):(t=r,r=r.nextZ,o--),i?i.nextZ=t:a=t,t.prevZ=i,i=t;e=r}i.nextZ=null,h*=2}while(s>1);return a}function Nr(a,n,e,r,t){return a=(a-e)*t|0,n=(n-r)*t|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,a|n<<1}function Cu(a){var n=a,e=a;do(n.x<e.x||n.x===e.x&&n.y<e.y)&&(e=n),n=n.next;while(n!==a);return e}function Ke(a,n,e,r,t,i,s,u){return(t-s)*(n-u)>=(a-s)*(i-u)&&(a-s)*(r-u)>=(e-s)*(n-u)&&(e-s)*(i-u)>=(t-s)*(r-u)}function Mu(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!Tu(a,n)&&(yt(a,n)&&yt(n,a)&&Eu(a,n)&&(K(a.prev,a,n.prev)||K(a,n.prev,n))||$t(a,n)&&K(a.prev,a,a.next)>0&&K(n.prev,n,n.next)>0)}function K(a,n,e){return(n.y-a.y)*(e.x-n.x)-(n.x-a.x)*(e.y-n.y)}function $t(a,n){return a.x===n.x&&a.y===n.y}function ra(a,n,e,r){var t=Ft(K(a,n,e)),i=Ft(K(a,n,r)),s=Ft(K(e,r,a)),u=Ft(K(e,r,n));return!!(t!==i&&s!==u||t===0&&It(a,e,n)||i===0&&It(a,r,n)||s===0&&It(e,a,r)||u===0&&It(e,n,r))}function It(a,n,e){return n.x<=Math.max(a.x,e.x)&&n.x>=Math.min(a.x,e.x)&&n.y<=Math.max(a.y,e.y)&&n.y>=Math.min(a.y,e.y)}function Ft(a){return a>0?1:a<0?-1:0}function Tu(a,n){var e=a;do{if(e.i!==a.i&&e.next.i!==a.i&&e.i!==n.i&&e.next.i!==n.i&&ra(e,e.next,a,n))return!0;e=e.next}while(e!==a);return!1}function yt(a,n){return K(a.prev,a,a.next)<0?K(a,n,a.next)>=0&&K(a,a.prev,n)>=0:K(a,n,a.prev)<0||K(a,a.next,n)<0}function Eu(a,n){var e=a,r=!1,t=(a.x+n.x)/2,i=(a.y+n.y)/2;do e.y>i!=e.next.y>i&&e.next.y!==e.y&&t<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==a);return r}function na(a,n){var e=new Vr(a.i,a.x,a.y),r=new Vr(n.i,n.x,n.y),t=a.next,i=n.prev;return a.next=n,n.prev=a,e.next=t,t.prev=e,r.next=e,e.prev=r,i.next=r,r.prev=i,r}function Xn(a,n,e,r){var t=new Vr(a,n,e);return r?(t.next=r.next,t.prev=r,r.next.prev=t,r.next=t):(t.prev=t,t.next=t),t}function bt(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Vr(a,n,e){this.i=a,this.x=n,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}qt.deviation=function(a,n,e,r){var t=n&&n.length,i=t?n[0]*e:a.length,s=Math.abs(Hr(a,0,i,e));if(t)for(var u=0,o=n.length;u<o;u++){var h=n[u]*e,l=u<o-1?n[u+1]*e:a.length;s-=Math.abs(Hr(a,h,l,e))}var c=0;for(u=0;u<r.length;u+=3){var f=r[u]*e,v=r[u+1]*e,d=r[u+2]*e;c+=Math.abs((a[f]-a[d])*(a[v+1]-a[f+1])-(a[f]-a[v])*(a[d+1]-a[f+1]))}return s===0&&c===0?0:Math.abs((c-s)/s)};function Hr(a,n,e,r){for(var t=0,i=n,s=e-r;i<e;i+=r)t+=(a[s]-a[i])*(a[i+1]+a[s+1]),s=i;return t}qt.flatten=function(a){for(var n=a[0][0].length,e={vertices:[],holes:[],dimensions:n},r=0,t=0;t<a.length;t++){for(var i=0;i<a[t].length;i++)for(var s=0;s<n;s++)e.vertices.push(a[t][i][s]);t>0&&(r+=a[t-1].length,e.holes.push(r))}return e};var Bu=on.exports;const Ru=tn(Bu);var ia=function(a){return a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a}(ia||{}),Iu=function(){function a(n){E(this,a),this.items=[],this._name=n}return B(a,[{key:"emit",value:function(e,r,t,i,s,u,o,h){for(var l=this.name,c=this.items,f=0,v=c.length;f<v;f++)c[f][l](e,r,t,i,s,u,o,h);return this}},{key:"add",value:function(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}},{key:"remove",value:function(e){var r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}},{key:"contains",value:function(e){return this.items.indexOf(e)!==-1}},{key:"removeAll",value:function(){return this.items.length=0,this}},{key:"destroy",value:function(){this.removeAll(),this.items=null,this._name=null}},{key:"empty",get:function(){return this.items.length===0}},{key:"name",get:function(){return this._name}}]),a}(),Fu=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],aa=function(a){Q(e,a);var n=J(e);function e(r){var t,i,s;E(this,e),s=n.call(this),s.runners=Object.create(null),s.renderPipes=Object.create(null),s._initOptions={},s._systemsHash=Object.create(null),s.type=r.type,s.name=r.name;var u=[].concat(Fu,X((t=r.runners)!==null&&t!==void 0?t:[]));return(i=s)._addRunners.apply(i,X(u)),s._addSystems(r.systems),s._addPipes(r.renderPipes,r.renderPipeAdaptors),s._unsafeEvalCheck(),s}return B(e,[{key:"init",value:function(){var r=G(k().mark(function i(){var s,u,o,h,l,c=arguments;return k().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s=c.length>0&&c[0]!==void 0?c[0]:{};for(u in this._systemsHash)o=this._systemsHash[u],h=o.constructor.defaultOptions,s=C(C({},h),s);s=C(C({},e.defaultOptions),s),this._roundPixels=s.roundPixels?1:0,l=0;case 5:if(!(l<this.runners.init.items.length)){v.next=11;break}return v.next=8,this.runners.init.items[l].init(s);case 8:l++,v.next=5;break;case 11:this._initOptions=s;case 12:case"end":return v.stop()}},i,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"render",value:function(t,i){var s=t;if(s instanceof oe&&(s={container:s},i&&($(q,"passing a second argument is deprecated, please use render options instead"),s.target=i.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor=this.background.colorRgba),s.clearColor){var u=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=u?s.clearColor:ce.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}},{key:"resize",value:function(t,i,s){this.view.resize(t,i,s),this.emit("resize",this.view.screen.width,this.view.screen.height)}},{key:"clear",value:function(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=this;i.target||(i.target=s.renderTarget.renderTarget),i.clearColor||(i.clearColor=this.background.colorRgba),(t=i.clear)!==null&&t!==void 0||(i.clear=ia.ALL);var u=i.clear,o=i.clearColor,h=i.target;ce.shared.setValue(o??this.background.colorRgba),s.renderTarget.clear(h,u,ce.shared.toArray())}},{key:"resolution",get:function(){return this.view.resolution},set:function(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}},{key:"width",get:function(){return this.view.texture.frame.width}},{key:"height",get:function(){return this.view.texture.frame.height}},{key:"canvas",get:function(){return this.view.canvas}},{key:"lastObjectRendered",get:function(){return this._lastObjectRendered}},{key:"renderingToScreen",get:function(){var t=this;return t.renderTarget.renderingToScreen}},{key:"screen",get:function(){return this.view.screen}},{key:"_addRunners",value:function(){for(var t=this,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];s.forEach(function(o){t.runners[o]=new Iu(o)})}},{key:"_addSystems",value:function(t){var i;for(i in t){var s=t[i];this._addSystem(s.value,s.name)}}},{key:"_addSystem",value:function(t,i){var s=new t(this);if(this[i])throw new Error('Whoops! The name "'.concat(i,'" is already in use'));this[i]=s,this._systemsHash[i]=s;for(var u in this.runners)this.runners[u].add(s);return this}},{key:"_addPipes",value:function(t,i){var s=this,u=i.reduce(function(o,h){return o[h.name]=h.value,o},{});t.forEach(function(o){var h=o.value,l=o.name,c=u[l];s.renderPipes[l]=new h(s,c?new c:null)})}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(function(i){i.destroy()}),this._systemsHash=null,this.renderPipes=null}},{key:"generateTexture",value:function(t){return this.textureGenerator.generateTexture(t)}},{key:"roundPixels",get:function(){return!!this._roundPixels}},{key:"_unsafeEvalCheck",value:function(){if(!gu())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}}]),e}(Ee);aa.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var sa=aa,Lt;function Lu(a){return Lt!==void 0||(Lt=function(){var n={stencil:!0,failIfMajorPerformanceCaveat:a??sa.defaultOptions.failIfMajorPerformanceCaveat};try{var e;if(!ne.get().getWebGLRenderingContext())return!1;var r=ne.get().createCanvas(),t=r.getContext("webgl",n),i=!!((e=t)!==null&&e!==void 0&&(e=e.getContextAttributes())!==null&&e!==void 0&&e.stencil);if(t){var s=t.getExtension("WEBGL_lose_context");s&&s.loseContext()}return t=null,i}catch{return!1}}()),Lt}var Gt;function Gu(){return Yr.apply(this,arguments)}function Yr(){return Yr=G(k().mark(function a(){var n,e=arguments;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.length>0&&e[0]!==void 0?e[0]:{},Gt===void 0){t.next=3;break}return t.abrupt("return",Gt);case 3:return t.next=5,G(k().mark(function i(){var s,u;return k().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=ne.get().getNavigator().gpu,s){h.next=3;break}return h.abrupt("return",!1);case 3:return h.prev=3,h.next=6,navigator.gpu.requestAdapter(n);case 6:return u=h.sent,h.next=9,u.requestDevice();case 9:return h.abrupt("return",!0);case 12:return h.prev=12,h.t0=h.catch(3),h.abrupt("return",!1);case 15:case"end":return h.stop()}},i,null,[[3,12]])}))();case 5:return Gt=t.sent,t.abrupt("return",Gt);case 7:case"end":return t.stop()}},a)})),Yr.apply(this,arguments)}var jn=["webgl","webgpu","canvas"];function Ou(a){return Xr.apply(this,arguments)}function Xr(){return Xr=G(k().mark(function a(n){var e,r,t,i,s,u,o,h,l,c,f,v;return k().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return r=[],n.preference?(r.push(n.preference),jn.forEach(function(g){g!==n.preference&&r.push(g)})):r=jn.slice(),p.next=4,vu((e=n.manageImports)!==null&&e!==void 0?e:!0);case 4:i={},s=0;case 6:if(!(s<r.length)){p.next=39;break}if(o=r[s],p.t0=o==="webgpu",!p.t0){p.next=13;break}return p.next=12,Gu();case 12:p.t0=p.sent;case 13:if(!p.t0){p.next=23;break}return p.next=16,Nt(()=>import("./WebGPURenderer-12e4498b.js"),["./WebGPURenderer-12e4498b.js","./colorToUniform-e74e556a.js","./SharedSystems-3691ce08.js","./CanvasPool-b559b4fe.js"],import.meta.url);case 16:return h=p.sent,l=h.WebGPURenderer,t=l,i=C(C({},n),n.webgpu),p.abrupt("break",39);case 23:if(!(o==="webgl"&&Lu((u=n.failIfMajorPerformanceCaveat)!==null&&u!==void 0?u:sa.defaultOptions.failIfMajorPerformanceCaveat))){p.next=33;break}return p.next=26,Nt(()=>import("./WebGLRenderer-1991cb5b.js"),["./WebGLRenderer-1991cb5b.js","./colorToUniform-e74e556a.js","./batchSamplersUniformGroup-77861437.js","./SharedSystems-3691ce08.js"],import.meta.url);case 26:return c=p.sent,f=c.WebGLRenderer,t=f,i=C(C({},n),n.webgl),p.abrupt("break",39);case 33:if(o!=="canvas"){p.next=36;break}return i=C({},n),p.abrupt("break",39);case 36:s++,p.next=6;break;case 39:return delete i.webgpu,delete i.webgl,v=new t,p.next=44,v.init(i);case 44:return p.abrupt("return",v);case 45:case"end":return p.stop()}},a)})),Xr.apply(this,arguments)}var ua=function(){function a(){E(this,a),this.stage=new oe,(arguments.length<=0?void 0:arguments[0])!==void 0&&$(q,"Application constructor options are deprecated, please use Application.init() instead.")}return B(a,[{key:"init",value:function(){var n=G(k().mark(function r(t){var i=this;return k().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=C({},t),u.next=3,Ou(t);case 3:this.renderer=u.sent,a._plugins.forEach(function(o){o.init.call(i,t)});case 5:case"end":return u.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"render",value:function(){this.renderer.render({container:this.stage})}},{key:"canvas",get:function(){return this.renderer.canvas}},{key:"view",get:function(){return $(q,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}},{key:"screen",get:function(){return this.renderer.screen}},{key:"destroy",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=a._plugins.slice(0);i.reverse(),i.forEach(function(s){s.destroy.call(e)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null}}]),a}();ua._plugins=[];var oa=ua;_e.handleByList(N.Application,oa._plugins);var zu=function(){function a(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;E(this,a),this._loader=n,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}return B(a,[{key:"add",value:function(e){var r=this;e.forEach(function(t){r._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}},{key:"_next",value:function(){var n=G(k().mark(function r(){var t,i,s;return k().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(this._assetList.length&&this._isActive)){o.next=9;break}for(this._isLoading=!0,t=[],i=Math.min(this._assetList.length,this._maxConcurrent),s=0;s<i;s++)t.push(this._assetList.pop());return o.next=7,this._loader.load(t);case 7:this._isLoading=!1,this._next();case 9:case"end":return o.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"active",get:function(){return this._isActive},set:function(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}]),a}(),Uu={extension:N.CacheParser,test:function(n){return Array.isArray(n)&&n.every(function(e){return e instanceof V})},getCacheableAssets:function(n,e){var r={};return n.forEach(function(t){e.forEach(function(i,s){r[t+(s===0?"":s+1)]=i})}),r}};function la(a){return jr.apply(this,arguments)}function jr(){return jr=G(k().mark(function a(n){var e;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!("Image"in globalThis)){t.next=2;break}return t.abrupt("return",new Promise(function(i){var s=new Image;s.onload=function(){i(!0)},s.onerror=function(){i(!1)},s.src=n}));case 2:if(!("createImageBitmap"in globalThis&&"fetch"in globalThis)){t.next=17;break}return t.prev=3,t.next=6,fetch(n);case 6:return t.next=8,t.sent.blob();case 8:return e=t.sent,t.next=11,createImageBitmap(e);case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(3),t.abrupt("return",!1);case 16:return t.abrupt("return",!0);case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}},a,null,[[3,13]])})),jr.apply(this,arguments)}var Du={extension:{type:N.DetectionParser,priority:1},test:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",la("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="));case 1:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}(),add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),["avif"]));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return s!=="avif"}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},qn=["png","jpg","jpeg"],Wu={extension:{type:N.DetectionParser,priority:-1},test:function(){return Promise.resolve(!0)},add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),qn));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return!qn.includes(s)}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},Nu="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ln(a){if(Nu)return!1;var n=document.createElement("video");return n.canPlayType(a)!==""}var Vu={extension:{type:N.DetectionParser,priority:0},test:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ln("video/mp4"));case 1:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}(),add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),["mp4","m4v"]));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return s!=="mp4"&&s!=="m4v"}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},Hu={extension:{type:N.DetectionParser,priority:0},test:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ln("video/ogg"));case 1:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}(),add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),["ogv"]));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return s!=="ogv"}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},Yu={extension:{type:N.DetectionParser,priority:0},test:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ln("video/webm"));case 1:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}(),add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),["webm"]));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return s!=="webm"}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},Xu={extension:{type:N.DetectionParser,priority:0},test:function(){var a=G(k().mark(function e(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",la("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="));case 1:case"end":return t.stop()}},e)}));function n(){return a.apply(this,arguments)}return n}(),add:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[].concat(X(r),["webp"]));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}(),remove:function(){var a=G(k().mark(function e(r){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r.filter(function(s){return s!=="webp"}));case 1:case"end":return i.stop()}},e)}));function n(e){return a.apply(this,arguments)}return n}()},ju=function(){function a(){var n=this;E(this,a),this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:function(r,t,i){return n._parsersValidated=!1,r[t]=i,!0}}),this.promiseCache={}}return B(a,[{key:"reset",value:function(){this._parsersValidated=!1,this.promiseCache={}}},{key:"_getLoadPromiseAndParser",value:function(e,r){var t=this,i={promise:null,parser:null};return i.promise=G(k().mark(function s(){var u,o,h,l,c,f,v,d;return k().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u=null,o=null,r.loadParser&&(o=t._parserHash[r.loadParser],o||ae('[Assets] specified load parser "'.concat(r.loadParser,'" not found while loading ').concat(e))),o){g.next=16;break}h=0;case 5:if(!(h<t.parsers.length)){g.next=13;break}if(c=t.parsers[h],!(c.load&&(l=c.test)!==null&&l!==void 0&&l.call(c,e,r,t))){g.next=10;break}return o=c,g.abrupt("break",13);case 10:h++,g.next=5;break;case 13:if(o){g.next=16;break}return ae("[Assets] ".concat(e," could not be loaded as we don't know how to parse it, ensure the correct parser has been added")),g.abrupt("return",null);case 16:return g.next=18,o.load(e,r,t);case 18:u=g.sent,i.parser=o,f=0;case 21:if(!(f<t.parsers.length)){g.next=40;break}if(v=t.parsers[f],!v.parse){g.next=37;break}if(g.t0=v.parse,!g.t0){g.next=29;break}return g.next=28,(d=v.testParse)===null||d===void 0?void 0:d.call(v,u,r,t);case 28:g.t0=g.sent;case 29:if(!g.t0){g.next=37;break}return g.next=32,v.parse(u,r,t);case 32:if(g.t1=g.sent,g.t1){g.next=35;break}g.t1=u;case 35:u=g.t1,i.parser=v;case 37:f++,g.next=21;break;case 40:return g.abrupt("return",u);case 41:case"end":return g.stop()}},s)}))(),i}},{key:"load",value:function(){var n=G(k().mark(function r(t,i){var s=this,u,o,h,l,c,f;return k().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this._parsersValidated||this._validateParsers(),u=0,o={},h=Ht(t),l=Se(t,function(p){return{alias:[p],src:p}}),c=l.length,f=l.map(function(){var p=G(k().mark(function g(y){var b;return k().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(b=Te.toAbsolute(y.src),o[y.src]){w.next=15;break}return w.prev=2,s.promiseCache[b]||(s.promiseCache[b]=s._getLoadPromiseAndParser(b,y)),w.next=6,s.promiseCache[b].promise;case 6:o[y.src]=w.sent,i&&i(++u/c),w.next=15;break;case 10:throw w.prev=10,w.t0=w.catch(2),delete s.promiseCache[b],delete o[y.src],new Error("[Loader.load] Failed to load ".concat(b,`.
`).concat(w.t0));case 15:case"end":return w.stop()}},g,null,[[2,10]])}));return function(g){return p.apply(this,arguments)}}()),d.next=9,Promise.all(f);case 9:return d.abrupt("return",h?o[l[0].src]:o);case 10:case"end":return d.stop()}},r,this)}));function e(r,t){return n.apply(this,arguments)}return e}()},{key:"unload",value:function(){var n=G(k().mark(function r(t){var i=this,s,u;return k().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=Se(t,function(l){return{alias:[l],src:l}}),u=s.map(function(){var l=G(k().mark(function c(f){var v,d,p,g,y;return k().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(v=Te.toAbsolute(f.src),d=i.promiseCache[v],!d){m.next=9;break}return m.next=5,d.promise;case 5:return y=m.sent,delete i.promiseCache[v],m.next=9,(p=d.parser)===null||p===void 0||(g=p.unload)===null||g===void 0?void 0:g.call(p,y,f,i);case 9:case"end":return m.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),h.next=4,Promise.all(u);case 4:case"end":return h.stop()}},r)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"_validateParsers",value:function(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(function(e){return e.name}).reduce(function(e,r){return r.name?e[r.name]&&ae('[Assets] loadParser name conflict "'.concat(r.name,'"')):ae("[Assets] loadParser should have a name"),C(C({},e),{},gt({},r.name,r))},{})}}]),a}();function rt(a,n){if(Array.isArray(n)){var e=xt(n),r;try{for(e.s();!(r=e.n()).done;){var t=r.value;if(a.startsWith("data:".concat(t)))return!0}}catch(i){e.e(i)}finally{e.f()}return!1}return a.startsWith("data:".concat(n))}function nt(a,n){var e=a.split("?")[0],r=Te.extname(e).toLowerCase();return Array.isArray(n)?n.includes(r):r===n}var qu=".json",$u="application/json",Ku={extension:{type:N.LoadParser,priority:$e.Low},name:"loadJson",test:function(n){return rt(n,$u)||nt(n,qu)},load:function(n){return G(k().mark(function e(){var r,t;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne.get().fetch(n);case 2:return r=s.sent,s.next=5,r.json();case 5:return t=s.sent,s.abrupt("return",t);case 7:case"end":return s.stop()}},e)}))()}},Zu=".txt",Qu="text/plain",Ju={name:"loadTxt",extension:{type:N.LoadParser,priority:$e.Low},test:function(n){return rt(n,Qu)||nt(n,Zu)},load:function(n){return G(k().mark(function e(){var r,t;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne.get().fetch(n);case 2:return r=s.sent,s.next=5,r.text();case 5:return t=s.sent,s.abrupt("return",t);case 7:case"end":return s.stop()}},e)}))()}},eo=["normal","bold","100","200","300","400","500","600","700","800","900"],to=[".ttf",".otf",".woff",".woff2"],ro=["font/ttf","font/otf","font/woff","font/woff2"],no=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function io(a){var n=Te.extname(a),e=Te.basename(a,n),r=e.replace(/(-|_)/g," "),t=r.toLowerCase().split(" ").map(function(l){return l.charAt(0).toUpperCase()+l.slice(1)}),i=t.length>0,s=xt(t),u;try{for(s.s();!(u=s.n()).done;){var o=u.value;if(!o.match(no)){i=!1;break}}}catch(l){s.e(l)}finally{s.f()}var h=t.join(" ");return i||(h='"'.concat(h.replace(/[\\"]/g,"\\$&"),'"')),h}var ao=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function so(a){return ao.test(a)?a:encodeURI(a)}var uo={extension:{type:N.LoadParser,priority:$e.Low},name:"loadWebFont",test:function(n){return rt(n,ro)||nt(n,to)},load:function(n,e){return G(k().mark(function r(){var t,i,s,u,o,h,l,c,f,v,d,p,g;return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(t=ne.get().getFontFaceSet(),!t){b.next=19;break}l=[],c=(i=(s=e.data)===null||s===void 0?void 0:s.family)!==null&&i!==void 0?i:io(n),f=(u=(o=e.data)===null||o===void 0||(o=o.weights)===null||o===void 0?void 0:o.filter(function(m){return eo.includes(m)}))!==null&&u!==void 0?u:["normal"],v=(h=e.data)!==null&&h!==void 0?h:{},d=0;case 7:if(!(d<f.length)){b.next=17;break}return p=f[d],g=new FontFace(c,"url(".concat(so(n),")"),C(C({},v),{},{weight:p})),b.next=12,g.load();case 12:t.add(g),l.push(g);case 14:d++,b.next=7;break;case 17:return le.set("".concat(c,"-and-url"),{url:n,fontFaces:l}),b.abrupt("return",l.length===1?l[0]:l);case 19:return ae("[loadWebFont] FontFace API is not supported. Skipping loading font"),b.abrupt("return",null);case 21:case"end":return b.stop()}},r)}))()},unload:function(n){(Array.isArray(n)?n:[n]).forEach(function(e){le.remove(e.family),ne.get().getFontFaceSet().delete(e)})}},oo=ho,_r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},lo=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function ho(a){var n=[];return a.replace(lo,function(e,r,t){var i=r.toLowerCase();for(t=fo(t),i=="m"&&t.length>2&&(n.push([r].concat(t.splice(0,2))),i="l",r=r=="m"?"l":"L");;){if(t.length==_r[i])return t.unshift(r),n.push(t);if(t.length<_r[i])throw new Error("malformed path data");n.push([r].concat(t.splice(0,_r[i])))}}),n}var co=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function fo(a){var n=a.match(co);return n?n.map(Number):[]}const vo=tn(oo);function go(a,n){for(var e=vo(a),r=[],t=null,i=0,s=0,u=0;u<e.length;u++){var o=e[u],h=o[0],l=o;switch(h){case"M":i=l[1],s=l[2],n.moveTo(i,s);break;case"m":i+=l[1],s+=l[2],n.moveTo(i,s);break;case"H":i=l[1],n.lineTo(i,s);break;case"h":i+=l[1],n.lineTo(i,s);break;case"V":s=l[1],n.lineTo(i,s);break;case"v":s+=l[1],n.lineTo(i,s);break;case"L":i=l[1],s=l[2],n.lineTo(i,s);break;case"l":i+=l[1],s+=l[2],n.lineTo(i,s);break;case"C":i=l[5],s=l[6],n.bezierCurveTo(l[1],l[2],l[3],l[4],i,s);break;case"c":n.bezierCurveTo(i+l[1],s+l[2],i+l[3],s+l[4],i+l[5],s+l[6]),i+=l[5],s+=l[6];break;case"S":i=l[3],s=l[4],n.bezierCurveToShort(l[1],l[2],i,s);break;case"s":n.bezierCurveToShort(i+l[1],s+l[2],i+l[3],s+l[4]),i+=l[3],s+=l[4];break;case"Q":i=l[3],s=l[4],n.quadraticCurveTo(l[1],l[2],i,s);break;case"q":n.quadraticCurveTo(i+l[1],s+l[2],i+l[3],s+l[4]),i+=l[3],s+=l[4];break;case"T":i=l[1],s=l[2],n.quadraticCurveToShort(i,s);break;case"t":i+=l[1],s+=l[2],n.quadraticCurveToShort(i,s);break;case"A":i=l[6],s=l[7],n.arcToSvg(l[1],l[2],l[3],l[4],l[5],i,s);break;case"a":i+=l[6],s+=l[7],n.arcToSvg(l[1],l[2],l[3],l[4],l[5],i,s);break;case"Z":case"z":n.closePath(),r.length>0&&(t=r.pop(),t?(i=t.startX,s=t.startY):(i=0,s=0)),t=null;break;default:ae("Unknown SVG path command: ".concat(h))}h!=="Z"&&h!=="z"&&t===null&&(t={startX:i,startY:s},r.push(t))}return n}var po=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;E(this,a),this.type="circle",this.x=n,this.y=e,this.radius=r}return B(a,[{key:"clone",value:function(){return new a(this.x,this.y,this.radius)}},{key:"contains",value:function(e,r){if(this.radius<=0)return!1;var t=this.radius*this.radius,i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=t}},{key:"strokeContains",value:function(e,r,t){if(this.radius===0)return!1;var i=this.x-e,s=this.y-r,u=this.radius,o=t/2,h=Math.sqrt(i*i+s*s);return h<u+o&&h>u-o}},{key:"getBounds",value:function(e){return e=e||new pe,e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}},{key:"copyTo",value:function(e){return e.copyFrom(this),e}},{key:"toString",value:function(){return"[pixi.js/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]")}}]),a}(),mo=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;E(this,a),this.type="ellipse",this.x=n,this.y=e,this.halfWidth=r,this.halfHeight=t}return B(a,[{key:"clone",value:function(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}},{key:"contains",value:function(e,r){if(this.halfWidth<=0||this.halfHeight<=0)return!1;var t=(e-this.x)/this.halfWidth,i=(r-this.y)/this.halfHeight;return t*=t,i*=i,t+i<=1}},{key:"strokeContains",value:function(e,r,t){var i=this.halfWidth,s=this.halfHeight;if(i<=0||s<=0)return!1;var u=t/2,o=i-u,h=s-u,l=i+u,c=s+u,f=e-this.x,v=r-this.y,d=f*f/(o*o)+v*v/(h*h),p=f*f/(l*l)+v*v/(c*c);return d>1&&p<=1}},{key:"getBounds",value:function(){return new pe(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}},{key:"copyTo",value:function(e){return e.copyFrom(this),e}},{key:"toString",value:function(){return"[pixi.js/math:Ellipse x=".concat(this.x," y=").concat(this.y," halfWidth=").concat(this.halfWidth," halfHeight=").concat(this.halfHeight,"]")}}]),a}();function yo(a,n,e,r,t,i){var s=a-e,u=n-r,o=t-e,h=i-r,l=s*o+u*h,c=o*o+h*h,f=-1;c!==0&&(f=l/c);var v,d;f<0?(v=e,d=r):f>1?(v=t,d=i):(v=e+f*o,d=r+f*h);var p=a-v,g=n-d;return p*p+g*g}var xr=function(){function a(){E(this,a),this.type="polygon";for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){for(var i=[],s=0,u=t.length;s<u;s++)i.push(t[s].x,t[s].y);t=i}this.points=t,this.closePath=!0}return B(a,[{key:"clone",value:function(){var e=this.points.slice(),r=new a(e);return r.closePath=this.closePath,r}},{key:"contains",value:function(e,r){for(var t=!1,i=this.points.length/2,s=0,u=i-1;s<i;u=s++){var o=this.points[s*2],h=this.points[s*2+1],l=this.points[u*2],c=this.points[u*2+1],f=h>r!=c>r&&e<(l-o)*((r-h)/(c-h))+o;f&&(t=!t)}return t}},{key:"strokeContains",value:function(e,r,t){for(var i=t/2,s=i*i,u=this.points,o=u.length-(this.closePath?0:2),h=0;h<o;h+=2){var l=u[h],c=u[h+1],f=u[(h+2)%u.length],v=u[(h+3)%u.length],d=yo(e,r,l,c,f,v);if(d<=s)return!0}return!1}},{key:"getBounds",value:function(e){e=e||new pe;for(var r=this.points,t=1/0,i=-1/0,s=1/0,u=-1/0,o=0,h=r.length;o<h;o+=2){var l=r[o],c=r[o+1];t=l<t?l:t,i=l>i?l:i,s=c<s?c:s,u=c>u?c:u}return e.x=t,e.width=i-t,e.y=s,e.height=u-s,e}},{key:"copyFrom",value:function(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}},{key:"copyTo",value:function(e){return e.copyFrom(this),e}},{key:"toString",value:function(){return"[pixi.js/math:PolygoncloseStroke=".concat(this.closePath,"points=").concat(this.points.reduce(function(e,r){return"".concat(e,", ").concat(r)},""),"]")}},{key:"lastX",get:function(){return this.points[this.points.length-2]}},{key:"lastY",get:function(){return this.points[this.points.length-1]}},{key:"x",get:function(){return this.points[this.points.length-2]}},{key:"y",get:function(){return this.points[this.points.length-1]}}]),a}(),Ot=function(n,e,r,t,i,s){var u=n-r,o=e-t,h=Math.sqrt(u*u+o*o);return h>=i-s&&h<=i+s},bo=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:20;E(this,a),this.type="roundedRectangle",this.x=n,this.y=e,this.width=r,this.height=t,this.radius=i}return B(a,[{key:"getBounds",value:function(e){return e=e||new pe,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height,this.radius)}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"copyTo",value:function(e){return e.copyFrom(this),e}},{key:"contains",value:function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var t=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+t&&r<=this.y+this.height-t||e>=this.x+t&&e<=this.x+this.width-t)return!0;var i=e-(this.x+t),s=r-(this.y+t),u=t*t;if(i*i+s*s<=u||(i=e-(this.x+this.width-t),i*i+s*s<=u)||(s=r-(this.y+this.height-t),i*i+s*s<=u)||(i=e-(this.x+t),i*i+s*s<=u))return!0}return!1}},{key:"strokeContains",value:function(e,r,t){var i=this.x,s=this.y,u=this.width,o=this.height,h=this.radius,l=t/2,c=i+h,f=s+h,v=u-h*2,d=o-h*2,p=i+u,g=s+o;return(e>=i-l&&e<=i+l||e>=p-l&&e<=p+l)&&r>=f&&r<=f+d||(r>=s-l&&r<=s+l||r>=g-l&&r<=g+l)&&e>=c&&e<=c+v?!0:e<c&&r<f&&Ot(e,r,c,f,h,l)||e>p-h&&r<f&&Ot(e,r,p-h,f,h,l)||e>p-h&&r>g-h&&Ot(e,r,p-h,g-h,h,l)||e<c&&r>g-h&&Ot(e,r,c,g-h,h,l)}},{key:"toString",value:function(){return"[pixi.js/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]")}}]),a}(),de=function(a){return a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a}(de||{}),_t=function(a){Q(e,a);var n=J(e);function e(r){var t,i,s;E(this,e);var u=r.data,o=r.size,h=r.usage,l=r.label,c=r.shrinkToFit;s=n.call(this),s.uid=ee("buffer"),s._resourceType="buffer",s._resourceId=ee("resource"),s._touched=0,s._updateID=1,s.shrinkToFit=!0,s.destroyed=!1,u instanceof Array&&(u=new Float32Array(u)),s._data=u,o=(t=o)!==null&&t!==void 0?t:(i=u)===null||i===void 0?void 0:i.byteLength;var f=!!u;return s.descriptor={size:o,usage:h,mappedAtCreation:f,label:l},s.shrinkToFit=c??!0,s}return B(e,[{key:"data",get:function(){return this._data},set:function(t){this.setDataWithSize(t,t.length,!0)}},{key:"static",get:function(){return!!(this.descriptor.usage&de.STATIC)},set:function(t){t?this.descriptor.usage|=de.STATIC:this.descriptor.usage&=~de.STATIC}},{key:"setDataWithSize",value:function(t,i,s){if(this._updateID++,this._updateSize=i*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}var u=this._data;if(this._data=t,u.length!==t.length){!this.shrinkToFit&&t.byteLength<u.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ee("resource"),this.emit("change",this));return}s&&this.emit("update",this)}},{key:"update",value:function(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}},{key:"destroy",value:function(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}]),e}(Ee);function ha(a,n){if(!(a instanceof _t)){var e=n?de.INDEX:de.VERTEX;a instanceof Array&&(n?(a=new Uint32Array(a),e=de.INDEX|de.COPY_DST):(a=new Float32Array(a),e=de.VERTEX|de.COPY_DST)),a=new _t({data:a,label:n?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return a}function _o(a,n,e){var r=a.getAttribute(n);if(!r)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;for(var t=r.buffer.data,i=1/0,s=1/0,u=-1/0,o=-1/0,h=t.BYTES_PER_ELEMENT,l=(r.offset||0)/h,c=(r.stride||2*4)/h,f=l;f<t.length;f+=c){var v=t[f],d=t[f+1];v>u&&(u=v),d>o&&(o=d),v<i&&(i=v),d<s&&(s=d)}return e.minX=i,e.minY=s,e.maxX=u,e.maxY=o,e}function xo(a){return(a instanceof _t||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=ha(a.buffer,!1),a}var wo=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e);var i=r.attributes,s=r.indexBuffer,u=r.topology;t=n.call(this),t.uid=ee("geometry"),t._layoutKey=0,t.instanceCount=1,t._bounds=new Oe,t._boundsDirty=!0,t.attributes=i,t.buffers=[],t.instanceCount=r.instanceCount||1;for(var o in i){var h=i[o]=xo(i[o]),l=t.buffers.indexOf(h.buffer);l===-1&&(t.buffers.push(h.buffer),h.buffer.on("update",t.onBufferUpdate,fe(t)),h.buffer.on("change",t.onBufferUpdate,fe(t)))}return s&&(t.indexBuffer=ha(s,!0),t.buffers.push(t.indexBuffer)),t.topology=u||"triangle-list",t}return B(e,[{key:"onBufferUpdate",value:function(){this._boundsDirty=!0,this.emit("update",this)}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"getIndex",value:function(){return this.indexBuffer}},{key:"getBuffer",value:function(t){return this.getAttribute(t).buffer}},{key:"getSize",value:function(){for(var t in this.attributes){var i=this.attributes[t],s=i.buffer;return s.data.length/(i.stride/4||i.size)}return 0}},{key:"bounds",get:function(){return this._boundsDirty?(this._boundsDirty=!1,_o(this,"aPosition",this._bounds)):this._bounds}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(function(i){return i.destroy()}),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}]),e}(Ee),ko=new Float32Array(1),Ao=new Uint32Array(1),So=function(a){Q(e,a);var n=J(e);function e(){E(this,e);var r=6,t=new _t({data:ko,label:"attribute-batch-buffer",usage:de.VERTEX|de.COPY_DST,shrinkToFit:!1}),i=new _t({data:Ao,label:"index-batch-buffer",usage:de.INDEX|de.COPY_DST,shrinkToFit:!1}),s=r*4;return n.call(this,{attributes:{aPosition:{buffer:t,format:"float32x2",stride:s,offset:0,location:1},aUV:{buffer:t,format:"float32x2",stride:s,offset:2*4,location:3},aColor:{buffer:t,format:"unorm8x4",stride:s,offset:4*4,location:0},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:s,offset:5*4,location:2}},indexBuffer:i})}return B(e)}(wo),ca=16,fa={};function Po(a,n){for(var e=0,r=0;r<n;r++)e=e*31+a[r].uid>>>0;return fa[e]||Co(a,e)}function Co(a,n){for(var e={},r=0,t=0;t<ca;t++){var i=t<a.length?a[t]:V.EMPTY.source;e[r++]=i.source,e[r++]=i.style}var s=new Wt(e);return fa[n]=s,s}var $n=function(){function a(n){E(this,a),typeof n=="number"?this.rawBinaryData=new ArrayBuffer(n):n instanceof Uint8Array?this.rawBinaryData=n.buffer:this.rawBinaryData=n,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}return B(a,[{key:"int8View",get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}},{key:"uint8View",get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}},{key:"int16View",get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}},{key:"int32View",get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}},{key:"float64View",get:function(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}},{key:"bigUint64View",get:function(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}},{key:"view",value:function(e){return this["".concat(e,"View")]}},{key:"destroy",value:function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}}],[{key:"sizeOf",value:function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(e," isn't a valid view type"))}}}]),a}();function Kn(a,n){var e=a.byteLength/8|0,r=new Float64Array(a,0,e),t=new Float64Array(n,0,e);t.set(r);var i=a.byteLength-e*8;if(i>0){var s=new Uint8Array(a,e*8,i),u=new Uint8Array(n,e*8,i);u.set(s)}}var Mo={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},To=function(a){return a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",a[a.NONE=4]="NONE",a}(To||{});function Zn(a,n){return n.alphaMode==="no-premultiply-alpha"&&Mo[a]||a}var Qn=function(){function a(){E(this,a),this.ids=Object.create(null),this.textures=[],this.count=0}return B(a,[{key:"clear",value:function(){for(var e=0;e<this.count;e++){var r=this.textures[e];this.textures[e]=null,this.ids[r.uid]=null}this.count=0}}]),a}(),Jn=function(){function a(){E(this,a),this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}return B(a,[{key:"destroy",value:function(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}]),a}(),ot=0,da=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E(this,a),this.uid=ee("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0,n=C(C({},a.defaultOptions),n);var e=n,r=e.vertexSize,t=e.indexSize;this.attributeBuffer=new $n(r*this._vertexSize*4),this.indexBuffer=new Uint16Array(t)}return B(a,[{key:"begin",value:function(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}},{key:"add",value:function(e){this._elements[this.elementSize++]=e,e.indexStart=this.indexSize,e.location=this.attributeSize,e.batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.vertexSize*this._vertexSize}},{key:"checkAndUpdateTexture",value:function(e,r){var t=e.batch.textures.ids[r._source.uid];return!t&&t!==0?!1:(e.textureId=t,e.texture=r,!0)}},{key:"updateElement",value:function(e){this.dirty=!0,e.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,e.location,e.textureId)}},{key:"break",value:function(e){var r=this._elements,t=this._textureBatchPool[this._textureBatchPoolIndex++]||new Qn;if(t.clear(),!!r[this.elementStart]){var i=r[this.elementStart],s=Zn(i.blendMode,i.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);for(var u=this.attributeBuffer.float32View,o=this.attributeBuffer.uint32View,h=this.indexBuffer,l=this._batchIndexSize,c=this._batchIndexStart,f="startBatch",v=this._batchPool[this._batchPoolIndex++]||new Jn,d=this.elementStart;d<this.elementSize;++d){var p=r[d];r[d]=null;var g=p.texture,y=g._source,b=Zn(p.blendMode,y),m=s!==b;if(y._batchTick===ot&&!m){p.textureId=y._textureBindLocation,l+=p.indexSize,p.packAttributes(u,o,p.location,p.textureId),p.packIndex(h,p.indexStart,p.location/this._vertexSize),p.batch=v;continue}y._batchTick=ot,(t.count>=ca||m)&&(this._finishBatch(v,c,l-c,t,s,e,f),f="renderBatch",c=l,s=b,t=this._textureBatchPool[this._textureBatchPoolIndex++]||new Qn,t.clear(),v=this._batchPool[this._batchPoolIndex++]||new Jn,++ot),p.textureId=y._textureBindLocation=t.count,t.ids[y.uid]=t.count,t.textures[t.count++]=y,p.batch=v,l+=p.indexSize,p.packAttributes(u,o,p.location,p.textureId),p.packIndex(h,p.indexStart,p.location/this._vertexSize)}t.count>0&&(this._finishBatch(v,c,l-c,t,s,e,f),c=l,++ot),this.elementStart=this.elementSize,this._batchIndexStart=c,this._batchIndexSize=l}}},{key:"_finishBatch",value:function(e,r,t,i,s,u,o){e.gpuBindGroup=null,e.action=o,e.batcher=this,e.textures=i,e.blendMode=s,e.start=r,e.size=t,++ot,u.add(e)}},{key:"finish",value:function(e){this.break(e)}},{key:"ensureAttributeBuffer",value:function(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}},{key:"ensureIndexBuffer",value:function(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}},{key:"_resizeAttributeBuffer",value:function(e){var r=Math.max(e,this.attributeBuffer.size*2),t=new $n(r);Kn(this.attributeBuffer.rawBinaryData,t.rawBinaryData),this.attributeBuffer=t}},{key:"_resizeIndexBuffer",value:function(e){var r=this.indexBuffer,t=Math.max(e,r.length*1.5);t+=t%2;var i=t>65535?new Uint32Array(t):new Uint16Array(t);if(i.BYTES_PER_ELEMENT!==r.BYTES_PER_ELEMENT)for(var s=0;s<r.length;s++)i[s]=r[s];else Kn(r.buffer,i.buffer);this.indexBuffer=i}},{key:"destroy",value:function(){for(var e=0;e<this.batches.length;e++)this.batches[e].destroy();this.batches=null;for(var r=0;r<this._elements.length;r++)this._elements[r].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}]),a}();da.defaultOptions={vertexSize:4,indexSize:6};var Eo=da;function Bo(a,n,e,r,t,i,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,o=0;e*=n,t*=i;for(var h=u.a,l=u.b,c=u.c,f=u.d,v=u.tx,d=u.ty;o<s;){var p=a[e],g=a[e+1];r[t]=h*p+c*g+v,r[t+1]=l*p+f*g+d,t+=i,e+=n,o++}}function Ro(a,n,e,r){var t=0;for(n*=e;t<r;)a[n]=0,a[n+1]=0,n+=e,t++}function va(a,n,e,r,t){var i=n.a,s=n.b,u=n.c,o=n.d,h=n.tx,l=n.ty;e=e||0,r=r||2,t=t||a.length/r-e;for(var c=e*r,f=0;f<t;f++){var v=a[c],d=a[c+1];a[c]=i*v+u*d+h,a[c+1]=s*v+o*d+l,c+=r}}function Io(a,n,e){var r=a>>16&255,t=a>>8&255,i=a&255,s=n>>16&255,u=n>>8&255,o=n&255,h=r+(s-r)*e,l=t+(u-t)*e,c=i+(o-i)*e;return(h<<16)+(l<<8)+c}var wr=16777215;function Fo(a,n){return a===wr||n===wr?a+n-wr:Io(a,n,.5)}var ga=function(){function a(){E(this,a),this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}return B(a,[{key:"blendMode",get:function(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}},{key:"packIndex",value:function(e,r,t){for(var i=this.geometryData.indices,s=0;s<this.indexSize;s++)e[r++]=i[s+this.indexOffset]+t-this.vertexOffset}},{key:"packAttributes",value:function(e,r,t,i){var s=this.geometryData,u=this.renderable,o=s.vertices,h=s.uvs,l=this.vertexOffset*2,c=(this.vertexOffset+this.vertexSize)*2,f=this.color,v=f>>16|f&65280|(f&255)<<16;if(this.applyTransform)for(var d=Fo(v,u.groupColor)+(this.alpha*u.groupAlpha*255<<24),p=u.groupTransform,g=i<<16|this.roundPixels&65535,y=p.a,b=p.b,m=p.c,w=p.d,A=p.tx,I=p.ty,S=l;S<c;S+=2){var M=o[S],W=o[S+1];e[t]=y*M+m*W+A,e[t+1]=b*M+w*W+I,e[t+2]=h[S],e[t+3]=h[S+1],r[t+4]=d,r[t+5]=g,t+=6}else for(var z=v+(this.alpha*255<<24),U=l;U<c;U+=2)e[t]=o[U],e[t+1]=o[U+1],e[t+2]=h[U],e[t+3]=h[U+1],r[t+4]=z,r[t+5]=i<<16,t+=6}},{key:"vertSize",get:function(){return this.vertexSize}},{key:"copyTo",value:function(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.vertexOffset=this.vertexOffset,e.vertexSize=this.vertexSize,e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData}},{key:"reset",value:function(){this.applyTransform=!0}}]),a}(),kr={build:function(n,e){var r,t,i,s,u,o;if(n.type==="circle"){var h=n;r=h.x,t=h.y,u=o=h.radius,i=s=0}else if(n.type==="ellipse"){var l=n;r=l.x,t=l.y,u=l.halfWidth,o=l.halfHeight,i=s=0}else{var c=n,f=c.width/2,v=c.height/2;r=c.x+f,t=c.y+v,u=o=Math.max(0,Math.min(c.radius,Math.min(f,v))),i=f-u,s=v-o}if(!(u>=0&&o>=0&&i>=0&&s>=0))return e;var d=Math.ceil(2.3*Math.sqrt(u+o)),p=d*8+(i?4:0)+(s?4:0);if(p===0)return e;if(d===0)return e[0]=e[6]=r+i,e[1]=e[3]=t+s,e[2]=e[4]=r-i,e[5]=e[7]=t-s,e;var g=0,y=d*4+(i?2:0)+2,b=y,m=p,w=i+u,A=s,I=r+w,S=r-w,M=t+A;if(e[g++]=I,e[g++]=M,e[--y]=M,e[--y]=S,s){var W=t-A;e[b++]=S,e[b++]=W,e[--m]=W,e[--m]=I}for(var z=1;z<d;z++){var U=Math.PI/2*(z/d),T=i+Math.cos(U)*u,R=s+Math.sin(U)*o,ie=r+T,se=r-T,x=t+R,_=t-R;e[g++]=ie,e[g++]=x,e[--y]=x,e[--y]=se,e[b++]=se,e[b++]=_,e[--m]=_,e[--m]=ie}w=i,A=s+o,I=r+w,S=r-w,M=t+A;var P=t-A;return e[g++]=I,e[g++]=M,e[--m]=P,e[--m]=I,i&&(e[g++]=S,e[g++]=M,e[--m]=P,e[--m]=S),e},triangulate:function(n,e,r,t,i,s){if(n.length!==0){for(var u=0,o=0,h=0;h<n.length;h+=2)u+=n[h],o+=n[h+1];u/=n.length/2,o/=n.length/2;var l=t;e[l*r]=u,e[l*r+1]=o;for(var c=l++,f=0;f<n.length;f+=2)e[l*r]=n[f],e[l*r+1]=n[f+1],f>0&&(i[s++]=l,i[s++]=c,i[s++]=l-1),l++;i[s++]=c+1,i[s++]=c,i[s++]=l-1}}},Lo=1e-4,ei=1e-4;function Go(a){var n=a.length;if(n<6)return 1;for(var e=0,r=0,t=a[n-2],i=a[n-1];r<n;r+=2){var s=a[r],u=a[r+1];e+=(s-t)*(u+i),t=s,i=u}return e<0?-1:1}function ti(a,n,e,r,t,i,s,u){var o=a-e*t,h=n-r*t,l=a+e*i,c=n+r*i,f,v;s?(f=r,v=-e):(f=-r,v=e);var d=o+f,p=h+v,g=l+f,y=c+v;return u.push(d,p),u.push(g,y),2}function Ne(a,n,e,r,t,i,s,u){var o=e-a,h=r-n,l=Math.atan2(o,h),c=Math.atan2(t-a,i-n);u&&l<c?l+=Math.PI*2:!u&&l>c&&(c+=Math.PI*2);var f=l,v=c-l,d=Math.abs(v),p=Math.sqrt(o*o+h*h),g=(15*d*Math.sqrt(p)/Math.PI>>0)+1,y=v/g;if(f+=y,u){s.push(a,n),s.push(e,r);for(var b=1,m=f;b<g;b++,m+=y)s.push(a,n),s.push(a+Math.sin(m)*p,n+Math.cos(m)*p);s.push(a,n),s.push(t,i)}else{s.push(e,r),s.push(a,n);for(var w=1,A=f;w<g;w++,A+=y)s.push(a+Math.sin(A)*p,n+Math.cos(A)*p),s.push(a,n);s.push(t,i),s.push(a,n)}return g*2}function Oo(a,n,e,r,t,i,s,u,o){var h=Lo;if(a.length!==0){var l=n,c=l.alignment;if(n.alignment!==.5){var f=Go(a);e&&(f*=-1),c=(c-.5)*f+.5}var v=new ve(a[0],a[1]),d=new ve(a[a.length-2],a[a.length-1]),p=r,g=Math.abs(v.x-d.x)<h&&Math.abs(v.y-d.y)<h;if(p){a=a.slice(),g&&(a.pop(),a.pop(),d.set(a[a.length-2],a[a.length-1]));var y=(v.x+d.x)*.5,b=(d.y+v.y)*.5;a.unshift(y,b),a.push(y,b)}var m=t,w=a.length/2,A=a.length,I=m.length/2,S=l.width/2,M=S*S,W=l.miterLimit*l.miterLimit,z=a[0],U=a[1],T=a[2],R=a[3],ie=0,se=0,x=-(U-R),_=z-T,P=0,O=0,F=Math.sqrt(x*x+_*_);x/=F,_/=F,x*=S,_*=S;var H=c,L=(1-H)*2,D=H*2;p||(l.cap==="round"?A+=Ne(z-x*(L-D)*.5,U-_*(L-D)*.5,z-x*L,U-_*L,z+x*D,U+_*D,m,!0)+2:l.cap==="square"&&(A+=ti(z,U,x,_,L,D,!0,m))),m.push(z-x*L,U-_*L),m.push(z+x*D,U+_*D);for(var Z=1;Z<w-1;++Z){z=a[(Z-1)*2],U=a[(Z-1)*2+1],T=a[Z*2],R=a[Z*2+1],ie=a[(Z+1)*2],se=a[(Z+1)*2+1],x=-(U-R),_=z-T,F=Math.sqrt(x*x+_*_),x/=F,_/=F,x*=S,_*=S,P=-(R-se),O=T-ie,F=Math.sqrt(P*P+O*O),P/=F,O/=F,P*=S,O*=S;var me=T-z,xe=U-R,ge=T-ie,it=se-R,yn=me*ge+xe*it,kt=xe*ge-it*me,at=kt<0;if(Math.abs(kt)<.001*Math.abs(yn)){m.push(T-x*L,R-_*L),m.push(T+x*D,R+_*D),yn>=0&&(l.join==="round"?A+=Ne(T,R,T-x*L,R-_*L,T-P*L,R-O*L,m,!1)+4:A+=2,m.push(T-P*D,R-O*D),m.push(T+P*L,R+O*L));continue}var bn=(-x+z)*(-_+R)-(-x+T)*(-_+U),_n=(-P+ie)*(-O+R)-(-P+T)*(-O+se),At=(me*_n-ge*bn)/kt,St=(it*bn-xe*_n)/kt,Kt=(At-T)*(At-T)+(St-R)*(St-R),ze=T+(At-T)*L,Ue=R+(St-R)*L,De=T-(At-T)*D,We=R-(St-R)*D,Ea=Math.min(me*me+xe*xe,ge*ge+it*it),xn=at?L:D,Ba=Ea+xn*xn*M,Ra=Kt<=Ba;Ra?l.join==="bevel"||Kt/M>W?(at?(m.push(ze,Ue),m.push(T+x*D,R+_*D),m.push(ze,Ue),m.push(T+P*D,R+O*D)):(m.push(T-x*L,R-_*L),m.push(De,We),m.push(T-P*L,R-O*L),m.push(De,We)),A+=2):l.join==="round"?at?(m.push(ze,Ue),m.push(T+x*D,R+_*D),A+=Ne(T,R,T+x*D,R+_*D,T+P*D,R+O*D,m,!0)+4,m.push(ze,Ue),m.push(T+P*D,R+O*D)):(m.push(T-x*L,R-_*L),m.push(De,We),A+=Ne(T,R,T-x*L,R-_*L,T-P*L,R-O*L,m,!1)+4,m.push(T-P*L,R-O*L),m.push(De,We)):(m.push(ze,Ue),m.push(De,We)):(m.push(T-x*L,R-_*L),m.push(T+x*D,R+_*D),l.join==="round"?at?A+=Ne(T,R,T+x*D,R+_*D,T+P*D,R+O*D,m,!0)+2:A+=Ne(T,R,T-x*L,R-_*L,T-P*L,R-O*L,m,!1)+2:l.join==="miter"&&Kt/M<=W&&(at?(m.push(De,We),m.push(De,We)):(m.push(ze,Ue),m.push(ze,Ue)),A+=2),m.push(T-P*L,R-O*L),m.push(T+P*D,R+O*D),A+=2)}z=a[(w-2)*2],U=a[(w-2)*2+1],T=a[(w-1)*2],R=a[(w-1)*2+1],x=-(U-R),_=z-T,F=Math.sqrt(x*x+_*_),x/=F,_/=F,x*=S,_*=S,m.push(T-x*L,R-_*L),m.push(T+x*D,R+_*D),p||(l.cap==="round"?A+=Ne(T-x*(L-D)*.5,R-_*(L-D)*.5,T-x*L,R-_*L,T+x*D,R+_*D,m,!1)+2:l.cap==="square"&&(A+=ti(T,R,x,_,L,D,!1,m)));for(var Ia=ei*ei,we=I;we<A+I-2;++we)z=m[we*2],U=m[we*2+1],T=m[(we+1)*2],R=m[(we+1)*2+1],ie=m[(we+2)*2],se=m[(we+2)*2+1],!(Math.abs(z*(R-se)+T*(se-U)+ie*(U-R))<Ia)&&u.push(we,we+1,we+2)}}function pa(a,n,e,r,t,i,s){var u=Ru(a,n,2);if(u){for(var o=0;o<u.length;o+=3)i[s++]=u[o]+t,i[s++]=u[o+1]+t,i[s++]=u[o+2]+t;for(var h=t*r,l=0;l<a.length;l+=2)e[h]=a[l],e[h+1]=a[l+1],h+=r}}var zo=[],Uo={build:function(n,e){for(var r=0;r<n.points.length;r++)e[r]=n.points[r];return e},triangulate:function(n,e,r,t,i,s){pa(n,zo,e,r,t,i,s)}},Do={build:function(n,e){var r=n,t=r.x,i=r.y,s=r.width,u=r.height;return s>=0&&u>=0&&(e[0]=t,e[1]=i,e[2]=t+s,e[3]=i,e[4]=t+s,e[5]=i+u,e[6]=t,e[7]=i+u),e},triangulate:function(n,e,r,t,i,s){var u=0;t*=r,e[t+u]=n[0],e[t+u+1]=n[1],u+=r,e[t+u]=n[2],e[t+u+1]=n[3],u+=r,e[t+u]=n[6],e[t+u+1]=n[7],u+=r,e[t+u]=n[4],e[t+u+1]=n[5],u+=r;var o=t/r;i[s++]=o,i[s++]=o+1,i[s++]=o+2,i[s++]=o+1,i[s++]=o+3,i[s++]=o+2}},Wo={build:function(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,e},triangulate:function(n,e,r,t,i,s){var u=0;t*=r,e[t+u]=n[0],e[t+u+1]=n[1],u+=r,e[t+u]=n[2],e[t+u+1]=n[3],u+=r,e[t+u]=n[4],e[t+u+1]=n[5];var o=t/r;i[s++]=o,i[s++]=o+1,i[s++]=o+2}},hn={rectangle:Do,polygon:Uo,triangle:Wo,circle:kr,ellipse:kr,roundedRectangle:kr},No=new pe;function Vo(a,n){var e=n.geometryData,r=n.batches;r.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(var t=0;t<a.instructions.length;t++){var i=a.instructions[t];if(i.action==="texture")Ho(i.data,r,e);else if(i.action==="fill"||i.action==="stroke"){var s=i.action==="stroke",u=i.data.path.shapePath,o=i.data.style,h=i.data.hole;s&&h&&ri(h.shapePath,o,null,!0,r,e),ri(u,o,h,s,r,e)}}}function Ho(a,n,e){var r=e.vertices,t=e.uvs,i=e.indices,s=i.length,u=r.length/2,o=[],h=hn.rectangle,l=No,c=a.image;l.x=a.dx,l.y=a.dy,l.width=a.dw,l.height=a.dh;var f=a.transform;h.build(l,o),f&&va(o,f),h.triangulate(o,r,2,u,i,s);var v=c.uvs;t.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);var d=Ae.get(ga);d.indexOffset=s,d.indexSize=i.length-s,d.vertexOffset=u,d.vertexSize=r.length/2-u,d.color=a.style,d.alpha=a.alpha,d.texture=c,d.geometryData=e,n.push(d)}function ri(a,n,e,r,t,i){var s=i.vertices,u=i.uvs,o=i.indices,h=a.shapePrimitives.length-1;a.shapePrimitives.forEach(function(l,c){var f=l.shape,v=l.transform,d=o.length,p=s.length/2,g=[],y=hn[f.type];if(y.build(f,g),v&&va(g,v),r){var A,I=(A=f.closePath)!==null&&A!==void 0?A:!0,S=n;Oo(g,S,!1,I,s,2,p,o)}else if(e&&h===c){h!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");var b=[],m=g.slice(),w=Yo(e.shapePath);w.forEach(function(T){b.push(m.length/2),m.push.apply(m,X(T))}),pa(m,b,s,2,p,o,d)}else y.triangulate(g,s,2,p,o,d);var M=u.length/2,W=n.texture;if(W!==V.WHITE){var z=n.matrix;v&&z.append(v.clone().invert()),Bo(s,2,p,u,M,2,s.length/2-p,z)}else Ro(u,M,2,s.length/2-p);var U=Ae.get(ga);U.indexOffset=d,U.indexSize=o.length-d,U.vertexOffset=p,U.vertexSize=s.length/2-p,U.color=n.color,U.alpha=n.alpha,U.texture=W,U.geometryData=i,t.push(U)})}function Yo(a){if(!a)return[];for(var n=a.shapePrimitives,e=[],r=0;r<n.length;r++){var t=n[r].shape,i=[],s=hn[t.type];s.build(t,i),e.push(i)}return e}var Xo=B(function a(){E(this,a),this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}),jo=function(){function a(){E(this,a),this.geometry=new So,this.instructions=new zi}return B(a,[{key:"init",value:function(){this.instructions.reset()}}]),a}(),cn=function(){function a(){E(this,a),this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}return B(a,[{key:"init",value:function(e){var r;a.defaultOptions.bezierSmoothness=(r=e==null?void 0:e.bezierSmoothness)!==null&&r!==void 0?r:a.defaultOptions.bezierSmoothness}},{key:"prerender",value:function(){this._returnActiveBatchers()}},{key:"getContextRenderData",value:function(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}},{key:"updateGpuContext",value:function(e){var r=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){r?this._cleanGraphicsContextData(e):r=this._initContext(e),Vo(e,r);var t=e.batchMode;e.customShader||t==="no-batch"?r.isBatchable=!1:t==="auto"&&(r.isBatchable=r.geometryData.vertices.length<400),e.dirty=!1}return r}},{key:"getGpuContext",value:function(e){return this._gpuContextHash[e.uid]||this._initContext(e)}},{key:"_returnActiveBatchers",value:function(){for(var e=0;e<this._activeBatchers.length;e++)Ae.return(this._activeBatchers[e]);this._activeBatchers.length=0}},{key:"_initContextRenderData",value:function(e){for(var r=Ae.get(jo),t=this._gpuContextHash[e.uid],i=t.batches,s=t.geometryData,u=s.vertices.length,o=s.indices.length,h=0;h<i.length;h++)i[h].applyTransform=!1;var l=Ae.get(Eo);this._activeBatchers.push(l),l.ensureAttributeBuffer(u),l.ensureIndexBuffer(o),l.begin();for(var c=0;c<i.length;c++){var f=i[c];l.add(f)}l.finish(r.instructions);var v=r.geometry;v.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),v.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);for(var d=l.batches,p=0;p<d.length;p++){var g=d[p];g.bindGroup=Po(g.textures.textures,g.textures.count)}return this._graphicsDataContextHash[e.uid]=r,r}},{key:"_initContext",value:function(e){var r=new Xo;return this._gpuContextHash[e.uid]=r,e.on("update",this.onGraphicsContextUpdate,this),e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}},{key:"onGraphicsContextUpdate",value:function(e){this._needsContextNeedsRebuild.push(e)}},{key:"onGraphicsContextDestroy",value:function(e){this._cleanGraphicsContextData(e),e.off("update",this.onGraphicsContextUpdate,this),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}},{key:"_cleanGraphicsContextData",value:function(e){var r=this._gpuContextHash[e.uid];r.isBatchable||this._graphicsDataContextHash[e.uid]&&(Ae.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),r.batches&&r.batches.forEach(function(t){Ae.return(t)})}},{key:"destroy",value:function(){var e=xt(this._needsContextNeedsRebuild),r;try{for(e.s();!(r=e.n()).done;){var t=r.value;this._gpuContextHash[t.uid]&&this.onGraphicsContextDestroy(t)}}catch(i){e.e(i)}finally{e.f()}this._needsContextNeedsRebuild.length=0}}]),a}();cn.extension={type:[N.WebGLSystem,N.WebGPUSystem,N.CanvasSystem],name:"graphicsContext"};cn.defaultOptions={bezierSmoothness:.5};var ma=cn,qo=8,zt=11920929e-14,$o=1;function ya(a,n,e,r,t,i,s,u,o,h){var l=1,c=Math.min(.99,Math.max(0,h??ma.defaultOptions.bezierSmoothness)),f=($o-c)/l;return f*=f,Ko(n,e,r,t,i,s,u,o,a,f),a}function Ko(a,n,e,r,t,i,s,u,o,h){qr(a,n,e,r,t,i,s,u,o,h,0),o.push(s,u)}function qr(a,n,e,r,t,i,s,u,o,h,l){if(!(l>qo)){var c=(a+e)/2,f=(n+r)/2,v=(e+t)/2,d=(r+i)/2,p=(t+s)/2,g=(i+u)/2,y=(c+v)/2,b=(f+d)/2,m=(v+p)/2,w=(d+g)/2,A=(y+m)/2,I=(b+w)/2;if(l>0){var S=s-a,M=u-n,W=Math.abs((e-s)*M-(r-u)*S),z=Math.abs((t-s)*M-(i-u)*S);if(W>zt&&z>zt){if((W+z)*(W+z)<=h*(S*S+M*M)){o.push(A,I);return}}else if(W>zt){if(W*W<=h*(S*S+M*M)){o.push(A,I);return}}else if(z>zt){if(z*z<=h*(S*S+M*M)){o.push(A,I);return}}else if(S=A-(a+s)/2,M=I-(n+u)/2,S*S+M*M<=h){o.push(A,I);return}}qr(a,n,c,f,y,b,A,I,o,h,l+1),qr(A,I,m,w,p,g,s,u,o,h,l+1)}}var Zo=8,Qo=11920929e-14,Jo=1;function el(a,n,e,r,t,i,s,u){var o=1,h=Math.min(.99,Math.max(0,u??ma.defaultOptions.bezierSmoothness)),l=(Jo-h)/o;return l*=l,tl(n,e,r,t,i,s,a,l),a}function tl(a,n,e,r,t,i,s,u){$r(s,a,n,e,r,t,i,u,0),s.push(t,i)}function $r(a,n,e,r,t,i,s,u,o){if(!(o>Zo)){var h=(n+r)/2,l=(e+t)/2,c=(r+i)/2,f=(t+s)/2,v=(h+c)/2,d=(l+f)/2,p=i-n,g=s-e,y=Math.abs((r-i)*g-(t-s)*p);if(y>Qo){if(y*y<=u*(p*p+g*g)){a.push(v,d);return}}else if(p=v-(n+i)/2,g=d-(e+s)/2,p*p+g*g<=u){a.push(v,d);return}$r(a,n,e,h,l,v,d,u,o+1),$r(a,v,d,c,f,i,s,u,o+1)}}function ba(a,n,e,r,t,i,s,u){var o=Math.abs(t-i);(!s&&t>i||s&&i>t)&&(o=2*Math.PI-o),u=u||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(o/Math.PI))),u=Math.max(u,3);var h=o/u,l=t;h*=s?-1:1;for(var c=0;c<u+1;c++){var f=Math.cos(l),v=Math.sin(l),d=n+f*r,p=e+v*r;a.push(d,p),l+=h}}function rl(a,n,e,r,t,i){var s=a[a.length-2],u=a[a.length-1],o=u-e,h=s-n,l=t-e,c=r-n,f=Math.abs(o*c-h*l);if(f<1e-8||i===0){(a[a.length-2]!==n||a[a.length-1]!==e)&&a.push(n,e);return}var v=o*o+h*h,d=l*l+c*c,p=o*l+h*c,g=i*Math.sqrt(v)/f,y=i*Math.sqrt(d)/f,b=g*p/v,m=y*p/d,w=g*c+y*h,A=g*l+y*o,I=h*(y+b),S=o*(y+b),M=c*(g+m),W=l*(g+m),z=Math.atan2(S-A,I-w),U=Math.atan2(W-A,M-w);ba(a,w+n,A+e,i,z,U,h*l>c*o)}var vt=Math.PI*2,lt={centerX:0,centerY:0,ang1:0,ang2:0},Ar=function(n,e,r,t,i,s,u,o){var h=n.x,l=n.y;h*=e,l*=r;var c=t*h-i*l,f=i*h+t*l;return o.x=c+s,o.y=f+u,o};function nl(a,n){var e=n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),r=n===1.5707963267948966?.551915024494:e,t=Math.cos(a),i=Math.sin(a),s=Math.cos(a+n),u=Math.sin(a+n);return[{x:t-i*r,y:i+t*r},{x:s+u*r,y:u-s*r},{x:s,y:u}]}var ni=function(n,e,r,t){var i=n*t-e*r<0?-1:1,s=n*r+e*t;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},il=function(n,e,r,t,i,s,u,o,h,l,c,f,v){var d=Math.pow(i,2),p=Math.pow(s,2),g=Math.pow(c,2),y=Math.pow(f,2),b=d*p-d*y-p*g;b<0&&(b=0),b/=d*y+p*g,b=Math.sqrt(b)*(u===o?-1:1);var m=b*i/s*f,w=b*-s/i*c,A=l*m-h*w+(n+r)/2,I=h*m+l*w+(e+t)/2,S=(c-m)/i,M=(f-w)/s,W=(-c-m)/i,z=(-f-w)/s,U=ni(1,0,S,M),T=ni(S,M,W,z);o===0&&T>0&&(T-=vt),o===1&&T<0&&(T+=vt),v.centerX=A,v.centerY=I,v.ang1=U,v.ang2=T};function al(a,n,e,r,t,i,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,o=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0;if(!(i===0||s===0)){var l=Math.sin(u*vt/360),c=Math.cos(u*vt/360),f=c*(n-r)/2+l*(e-t)/2,v=-l*(n-r)/2+c*(e-t)/2;if(!(f===0&&v===0)){i=Math.abs(i),s=Math.abs(s);var d=Math.pow(f,2)/Math.pow(i,2)+Math.pow(v,2)/Math.pow(s,2);d>1&&(i*=Math.sqrt(d),s*=Math.sqrt(d)),il(n,e,r,t,i,s,o,h,l,c,f,v,lt);var p=lt.ang1,g=lt.ang2,y=lt.centerX,b=lt.centerY,m=Math.abs(g)/(vt/4);Math.abs(1-m)<1e-7&&(m=1);var w=Math.max(Math.ceil(m),1);g/=w;for(var A=a[a.length-2],I=a[a.length-1],S={x:0,y:0},M=0;M<w;M++){var W=nl(p,g),z=Ar(W[0],i,s,c,l,y,b,S),U=z.x,T=z.y,R=Ar(W[1],i,s,c,l,y,b,S),ie=R.x,se=R.y,x=Ar(W[2],i,s,c,l,y,b,S),_=x.x,P=x.y;ya(a,A,I,U,T,ie,se,_,P),A=_,I=P,p+=g}}}}function sl(a,n,e){for(var r=function(M,W){var z=W.x-M.x,U=W.y-M.y,T=Math.sqrt(z*z+U*U),R=z/T,ie=U/T;return{len:T,nx:R,ny:ie}},t=function(M,W){M===0?a.moveTo(W.x,W.y):a.lineTo(W.x,W.y)},i=n[n.length-1],s=0;s<n.length;s++){var u,o=n[s%n.length],h=(u=o.radius)!==null&&u!==void 0?u:e;if(h<=0){t(s,o),i=o;continue}var l=n[(s+1)%n.length],c=r(o,i),f=r(o,l);if(c.len<1e-4||f.len<1e-4){t(s,o),i=o;continue}var v=Math.asin(c.nx*f.ny-c.ny*f.nx),d=1,p=!1;c.nx*f.nx-c.ny*-f.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,d=-1,p=!0):v>0&&(d=-1,p=!0);var g=v/2,y=void 0,b=Math.abs(Math.cos(g)*h/Math.sin(g));b>Math.min(c.len/2,f.len/2)?(b=Math.min(c.len/2,f.len/2),y=Math.abs(b*Math.sin(g)/Math.cos(g))):y=h;var m=o.x+f.nx*b+-f.ny*y*d,w=o.y+f.ny*b+f.nx*y*d,A=Math.atan2(c.ny,c.nx)+Math.PI/2*d,I=Math.atan2(f.ny,f.nx)-Math.PI/2*d;s===0&&a.moveTo(m+Math.cos(A)*y,w+Math.sin(A)*y),a.arc(m,w,y,A,I,p),i=o}}function ul(a,n,e,r){for(var t=function(w,A){return Math.sqrt(Math.pow(w.x-A.x,2)+Math.pow(w.y-A.y,2))},i=function(w,A,I){return{x:w.x+(A.x-w.x)*I,y:w.y+(A.y-w.y)*I}},s=n.length,u=0;u<s;u++){var o,h=n[(u+1)%s],l=(o=h.radius)!==null&&o!==void 0?o:e;if(l<=0){u===0?a.moveTo(h.x,h.y):a.lineTo(h.x,h.y);continue}var c=n[u],f=n[(u+2)%s],v=t(c,h),d=void 0;if(v<1e-4)d=h;else{var p=Math.min(v/2,l);d=i(h,c,p/v)}var g=t(f,h),y=void 0;if(g<1e-4)y=h;else{var b=Math.min(g/2,l);y=i(h,f,b/g)}u===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y),a.quadraticCurveTo(h.x,h.y,y.x,y.y,r)}}var ol=new pe,ll=function(){function a(n){E(this,a),this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Oe,this._graphicsPath2D=n}return B(a,[{key:"moveTo",value:function(e,r){return this.startPoly(e,r),this}},{key:"lineTo",value:function(e,r){this._ensurePoly();var t=this._currentPoly.points,i=t[t.length-2],s=t[t.length-1];return(i!==e||s!==r)&&t.push(e,r),this}},{key:"arc",value:function(e,r,t,i,s,u){this._ensurePoly(!1);var o=this._currentPoly.points;return ba(o,e,r,t,i,s,u),this}},{key:"arcTo",value:function(e,r,t,i,s){this._ensurePoly();var u=this._currentPoly.points;return rl(u,e,r,t,i,s),this}},{key:"arcToSvg",value:function(e,r,t,i,s,u,o){var h=this._currentPoly.points;return al(h,this._currentPoly.lastX,this._currentPoly.lastY,u,o,e,r,t,i,s),this}},{key:"bezierCurveTo",value:function(e,r,t,i,s,u,o){this._ensurePoly();var h=this._currentPoly;return ya(this._currentPoly.points,h.lastX,h.lastY,e,r,t,i,s,u,o),this}},{key:"quadraticCurveTo",value:function(e,r,t,i,s){this._ensurePoly();var u=this._currentPoly;return el(this._currentPoly.points,u.lastX,u.lastY,e,r,t,i,s),this}},{key:"closePath",value:function(){return this.endPoly(!0),this}},{key:"addPath",value:function(e,r){this.endPoly(),r&&!r.isIdentity()&&(e=e.clone(!0),e.transform(r));for(var t=0;t<e.instructions.length;t++){var i=e.instructions[t];this[i.action].apply(this,X(i.data))}return this}},{key:"finish",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.endPoly(e)}},{key:"rect",value:function(e,r,t,i,s){return this.drawShape(new pe(e,r,t,i),s),this}},{key:"circle",value:function(e,r,t,i){return this.drawShape(new po(e,r,t),i),this}},{key:"poly",value:function(e,r,t){var i=new xr(e);return i.closePath=r,this.drawShape(i,t),this}},{key:"regularPoly",value:function(e,r,t,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=arguments.length>5?arguments[5]:void 0;i=Math.max(i|0,3);for(var o=-1*Math.PI/2+s,h=Math.PI*2/i,l=[],c=0;c<i;c++){var f=c*h+o;l.push(e+t*Math.cos(f),r+t*Math.sin(f))}return this.poly(l,!0,u),this}},{key:"roundPoly",value:function(e,r,t,i,s){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,r,t,i,u);var h=t*Math.sin(Math.PI/i)-.001;s=Math.min(s,h);for(var l=-1*Math.PI/2+u,c=Math.PI*2/i,f=(i-2)*Math.PI/i/2,v=0;v<i;v++){var d=v*c+l,p=e+t*Math.cos(d),g=r+t*Math.sin(d),y=d+Math.PI+f,b=d-Math.PI-f,m=p+s*Math.cos(y),w=g+s*Math.sin(y),A=p+s*Math.cos(b),I=g+s*Math.sin(b);v===0?this.moveTo(m,w):this.lineTo(m,w),this.quadraticCurveTo(p,g,A,I,o)}return this.closePath()}},{key:"roundShape",value:function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3?arguments[3]:void 0;return e.length<3?this:(t?ul(this,e,r,i):sl(this,e,r),this.closePath())}},{key:"filletRect",value:function(e,r,t,i,s){if(s===0)return this.rect(e,r,t,i);var u=Math.min(t,i)/2,o=Math.min(u,Math.max(-u,s)),h=e+t,l=r+i,c=o<0?-o:0,f=Math.abs(o);return this.moveTo(e,r+f).arcTo(e+c,r+c,e+f,r,f).lineTo(h-f,r).arcTo(h-c,r+c,h,r+f,f).lineTo(h,l-f).arcTo(h-c,l-c,e+t-f,l,f).lineTo(e+f,l).arcTo(e+c,l-c,e,l-f,f).closePath()}},{key:"chamferRect",value:function(e,r,t,i,s,u){if(s<=0)return this.rect(e,r,t,i);for(var o=Math.min(s,Math.min(t,i)/2),h=e+t,l=r+i,c=[e+o,r,h-o,r,h,r+o,h,l-o,h-o,l,e+o,l,e,l-o,e,r+o],f=c.length-1;f>=2;f-=2)c[f]===c[f-2]&&c[f-1]===c[f-3]&&c.splice(f-1,2);return this.poly(c,!0,u)}},{key:"ellipse",value:function(e,r,t,i,s){return this.drawShape(new mo(e,r,t,i),s),this}},{key:"roundRect",value:function(e,r,t,i,s,u){return this.drawShape(new bo(e,r,t,i,s),u),this}},{key:"drawShape",value:function(e,r){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:r}),this}},{key:"startPoly",value:function(e,r){var t=this._currentPoly;return t&&this.endPoly(),t=new xr,t.points.push(e,r),this._currentPoly=t,this}},{key:"endPoly",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this._currentPoly;return r&&r.points.length>2&&(r.closePath=e,this.shapePrimitives.push({shape:r})),this._currentPoly=null,this}},{key:"_ensurePoly",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this._currentPoly&&(this._currentPoly=new xr,e)){var r=this.shapePrimitives[this.shapePrimitives.length-1];if(r){var t=r.shape.x,i=r.shape.y;if(!r.transform.isIdentity()){var s=r.transform,u=t;t=s.a*t+s.c*i+s.tx,i=s.b*u+s.d*i+s.ty}this._currentPoly.points.push(t,i)}else this._currentPoly.points.push(0,0)}}},{key:"buildPath",value:function(){var e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(var r=0;r<e.instructions.length;r++){var t=e.instructions[r];this[t.action].apply(this,X(t.data))}this.finish()}},{key:"bounds",get:function(){var e=this._bounds;e.clear();for(var r=this.shapePrimitives,t=0;t<r.length;t++){var i=r[t],s=i.shape.getBounds(ol);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}]),a}(),Yt=function(){function a(n){if(E(this,a),this.instructions=[],this.uid=ee("graphicsPath"),this._dirty=!0,typeof n=="string")go(n,this);else{var e;this.instructions=(e=n==null?void 0:n.slice())!==null&&e!==void 0?e:[]}}return B(a,[{key:"shapePath",get:function(){return this._shapePath||(this._shapePath=new ll(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}},{key:"addPath",value:function(e,r){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,r]}),this._dirty=!0,this}},{key:"arc",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"arc",data:r}),this._dirty=!0,this}},{key:"arcTo",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"arcTo",data:r}),this._dirty=!0,this}},{key:"arcToSvg",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"arcToSvg",data:r}),this._dirty=!0,this}},{key:"bezierCurveTo",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"bezierCurveTo",data:r}),this._dirty=!0,this}},{key:"bezierCurveToShort",value:function(e,r,t,i,s){var u=this.instructions[this.instructions.length-1],o=this.getLastPoint(ve.shared),h=0,l=0;if(!u||u.action!=="bezierCurveTo")h=o.x,l=o.y;else{h=u.data[2],l=u.data[3];var c=o.x,f=o.y;h=c+(c-h),l=f+(f-l)}return this.instructions.push({action:"bezierCurveTo",data:[h,l,e,r,t,i,s]}),this._dirty=!0,this}},{key:"closePath",value:function(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}},{key:"ellipse",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"ellipse",data:r}),this._dirty=!0,this}},{key:"lineTo",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"lineTo",data:r}),this._dirty=!0,this}},{key:"moveTo",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"moveTo",data:r}),this}},{key:"quadraticCurveTo",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"quadraticCurveTo",data:r}),this._dirty=!0,this}},{key:"quadraticCurveToShort",value:function(e,r,t){var i=this.instructions[this.instructions.length-1],s=this.getLastPoint(ve.shared),u=0,o=0;if(!i||i.action!=="quadraticCurveTo")u=s.x,o=s.y;else{u=i.data[0],o=i.data[1];var h=s.x,l=s.y;u=h+(h-u),o=l+(l-o)}return this.instructions.push({action:"quadraticCurveTo",data:[u,o,e,r,t]}),this._dirty=!0,this}},{key:"rect",value:function(e,r,t,i,s){return this.instructions.push({action:"rect",data:[e,r,t,i,s]}),this._dirty=!0,this}},{key:"circle",value:function(e,r,t,i){return this.instructions.push({action:"circle",data:[e,r,t,i]}),this._dirty=!0,this}},{key:"roundRect",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"roundRect",data:r}),this._dirty=!0,this}},{key:"poly",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"poly",data:r}),this._dirty=!0,this}},{key:"regularPoly",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"regularPoly",data:r}),this._dirty=!0,this}},{key:"roundPoly",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"roundPoly",data:r}),this._dirty=!0,this}},{key:"roundShape",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"roundShape",data:r}),this._dirty=!0,this}},{key:"filletRect",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"filletRect",data:r}),this._dirty=!0,this}},{key:"chamferRect",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.instructions.push({action:"chamferRect",data:r}),this._dirty=!0,this}},{key:"star",value:function(e,r,t,i,s,u,o){s=s||i/2;for(var h=-1*Math.PI/2+u,l=t*2,c=Math.PI*2/l,f=[],v=0;v<l;v++){var d=v%2?s:i,p=v*c+h;f.push(e+d*Math.cos(p),r+d*Math.sin(p))}return this.poly(f,!0,o),this}},{key:"clone",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=new a;if(!e)r.instructions=this.instructions.slice();else for(var t=0;t<this.instructions.length;t++){var i=this.instructions[t];r.instructions.push({action:i.action,data:i.data.slice()})}return r}},{key:"clear",value:function(){return this.instructions.length=0,this._dirty=!0,this}},{key:"transform",value:function(e){if(e.isIdentity())return this;for(var r=e.a,t=e.b,i=e.c,s=e.d,u=e.tx,o=e.ty,h=0,l=0,c=0,f=0,v=0,d=0,p=0,g=0,y=0;y<this.instructions.length;y++){var b=this.instructions[y],m=b.data;switch(b.action){case"moveTo":case"lineTo":h=m[0],l=m[1],m[0]=r*h+i*l+u,m[1]=t*h+s*l+o;break;case"bezierCurveTo":c=m[0],f=m[1],v=m[2],d=m[3],h=m[4],l=m[5],m[0]=r*c+i*f+u,m[1]=t*c+s*f+o,m[2]=r*v+i*d+u,m[3]=t*v+s*d+o,m[4]=r*h+i*l+u,m[5]=t*h+s*l+o;break;case"quadraticCurveTo":c=m[0],f=m[1],h=m[2],l=m[3],m[0]=r*c+i*f+u,m[1]=t*c+s*f+o,m[2]=r*h+i*l+u,m[3]=t*h+s*l+o;break;case"arcToSvg":h=m[5],l=m[6],p=m[0],g=m[1],m[0]=r*p+i*g,m[1]=t*p+s*g,m[5]=r*h+i*l+u,m[6]=t*h+s*l+o;break;case"circle":m[4]=ht(m[3],e);break;case"rect":m[4]=ht(m[4],e);break;case"ellipse":m[8]=ht(m[8],e);break;case"roundRect":m[5]=ht(m[5],e);break;case"addPath":m[0].transform(e);break;case"poly":m[2]=ht(m[2],e);break;default:ae("unknown transform action",b.action);break}}return this._dirty=!0,this}},{key:"bounds",get:function(){return this.shapePath.bounds}},{key:"getLastPoint",value:function(e){var r=this.instructions.length-1,t=this.instructions[r];if(!t)return e.x=0,e.y=0,e;for(;t.action==="closePath";){if(r--,r<0)return e.x=0,e.y=0,e;t=this.instructions[r]}switch(t.action){case"moveTo":case"lineTo":e.x=t.data[0],e.y=t.data[1];break;case"quadraticCurveTo":e.x=t.data[2],e.y=t.data[3];break;case"bezierCurveTo":e.x=t.data[4],e.y=t.data[5];break;case"arc":case"arcToSvg":e.x=t.data[5],e.y=t.data[6];break;case"addPath":t.data[0].getLastPoint(e);break}return e}}]),a}();function ht(a,n){return a?a.prepend(n):n.clone()}function hl(a,n){if(typeof a=="string"){var e=document.createElement("div");e.innerHTML=a.trim(),a=e.querySelector("svg")}var r={context:n,path:new Yt};return _a(a,r,null,null),n}function _a(a,n,e,r){var t=a.children,i=cl(a),s=i.fillStyle,u=i.strokeStyle;s&&e?e=C(C({},e),s):s&&(e=s),u&&r?r=C(C({},r),u):u&&(r=u),n.context.fillStyle=e,n.context.strokeStyle=r;var o,h,l,c,f,v,d,p,g,y,b,m,w,A,I,S,M;switch(a.nodeName.toLowerCase()){case"path":A=a.getAttribute("d"),I=new Yt(A),n.context.path(I),e&&n.context.fill(),r&&n.context.stroke();break;case"circle":d=te(a,"cx",0),p=te(a,"cy",0),g=te(a,"r",0),n.context.ellipse(d,p,g,g),e&&n.context.fill(),r&&n.context.stroke();break;case"rect":o=te(a,"x",0),h=te(a,"y",0),S=te(a,"width",0),M=te(a,"height",0),y=te(a,"rx",0),b=te(a,"ry",0),y||b?n.context.roundRect(o,h,S,M,y||b):n.context.rect(o,h,S,M),e&&n.context.fill(),r&&n.context.stroke();break;case"ellipse":d=te(a,"cx",0),p=te(a,"cy",0),y=te(a,"rx",0),b=te(a,"ry",0),n.context.beginPath(),n.context.ellipse(d,p,y,b),e&&n.context.fill(),r&&n.context.stroke();break;case"line":l=te(a,"x1",0),c=te(a,"y1",0),f=te(a,"x2",0),v=te(a,"y2",0),n.context.beginPath(),n.context.moveTo(l,c),n.context.lineTo(f,v),r&&n.context.stroke();break;case"polygon":w=a.getAttribute("points"),m=w.match(/\d+/g).map(function(z){return parseInt(z,10)}),n.context.poly(m,!0),e&&n.context.fill(),r&&n.context.stroke();break;case"polyline":w=a.getAttribute("points"),m=w.match(/\d+/g).map(function(z){return parseInt(z,10)}),n.context.poly(m,!1),r&&n.context.stroke();break;case"g":case"svg":break;default:{console.info("[SVG parser] <".concat(a.nodeName,"> elements unsupported"));break}}for(var W=0;W<t.length;W++)_a(t[W],n,e,r)}function te(a,n,e){var r=a.getAttribute(n);return r?Number(r):e}function cl(a){var n=a.getAttribute("style"),e={},r={},t=!1,i=!1;if(n)for(var s=n.split(";"),u=0;u<s.length;u++){var o=s[u],h=o.split(":"),l=ue(h,2),c=l[0],f=l[1];switch(c){case"stroke":f!=="none"&&(e.color=ce.shared.setValue(f).toNumber(),i=!0);break;case"stroke-width":e.width=Number(f);break;case"fill":f!=="none"&&(t=!0,r.color=ce.shared.setValue(f).toNumber());break;case"fill-opacity":r.alpha=Number(f);break;case"stroke-opacity":e.alpha=Number(f);break;case"opacity":r.alpha=Number(f),e.alpha=Number(f);break}}else{var v=a.getAttribute("stroke");v&&v!=="none"&&(i=!0,e.color=ce.shared.setValue(v).toNumber(),e.width=te(a,"stroke-width",1));var d=a.getAttribute("fill");d&&d!=="none"&&(t=!0,r.color=ce.shared.setValue(d).toNumber())}return{strokeStyle:i?e:null,fillStyle:t?r:null}}var xa=function(){function a(n,e,r,t){E(this,a),this.uid=ee("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=n,this.y0=e,this.x1=r,this.y1=t}return B(a,[{key:"addColorStop",value:function(e,r){return this.gradientStops.push({offset:e,color:ce.shared.setValue(r).toHex()}),this}},{key:"buildLinearGradient",value:function(){var e=a.defaultTextureSize,r=this.gradientStops,t=ne.get().createCanvas();t.width=e,t.height=e;for(var i=t.getContext("2d"),s=i.createLinearGradient(0,0,a.defaultTextureSize,1),u=0;u<r.length;u++){var o=r[u];s.addColorStop(o.offset,o.color)}i.fillStyle=s,i.fillRect(0,0,e,e),this.texture=new V({source:new wt({resource:t,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});var h=this.x0,l=this.y0,c=this.x1,f=this.y1,v=new Y,d=c-h,p=f-l,g=Math.sqrt(d*d+p*p),y=Math.atan2(p,d);v.translate(-h,-l),v.scale(1/e,1/e),v.rotate(-y),v.scale(256/g,1),this.transform=v}}]),a}();xa.defaultTextureSize=256;var fn=xa,ii={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},fl=function(){function a(n,e){E(this,a),this.uid=ee("fillPattern"),this.transform=new Y,this.texture=n,this.transform.scale(1/n.frame.width,1/n.frame.height),e&&(n.source.style.addressModeU=ii[e].addressModeU,n.source.style.addressModeV=ii[e].addressModeV)}return B(a,[{key:"setTransform",value:function(e){var r=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/r.frame.width,1/r.frame.height)}}]),a}();function Fe(a,n){if(a==null)return null;var e,r;if(a!=null&&a.fill?(r=a.fill,e=C(C({},n),a)):(r=a,e=n),ce.isColorLike(r)){var t,i=ce.shared.setValue((t=r)!==null&&t!==void 0?t:0),s=C(C({},e),{},{color:i.toNumber(),alpha:i.alpha===1?e.alpha:i.alpha,texture:V.WHITE});return s}else if(r instanceof fl){var u,o=r;return C(C({},e),{},{color:16777215,texture:o.texture,matrix:o.transform,fill:(u=e.fill)!==null&&u!==void 0?u:null})}else if(r instanceof fn){var h=r;return h.buildLinearGradient(),C(C({},e),{},{color:16777215,texture:h.texture,matrix:h.transform})}var l=C(C({},n),a);if(l.texture){if(l.texture!==V.WHITE){var c,f=((c=l.matrix)===null||c===void 0?void 0:c.invert())||new Y;f.scale(1/l.texture.frame.width,1/l.texture.frame.height),l.matrix=f}var v=l.texture.source.style;v.addressMode==="clamp-to-edge"&&(v.addressMode="repeat")}var d=ce.shared.setValue(l.color);return l.alpha*=d.alpha,l.color=d.toNumber(),l.matrix=l.matrix?l.matrix.clone():null,l}var dl=new ve,ai=new Y,dn=function(a){Q(e,a);var n=J(e);function e(){var r;return E(this,e),r=n.apply(this,arguments),r.uid=ee("graphicsContext"),r.dirty=!0,r.batchMode="auto",r.instructions=[],r._activePath=new Yt,r._transform=new Y,r._fillStyle=C({},e.defaultFillStyle),r._strokeStyle=C({},e.defaultStrokeStyle),r._stateStack=[],r._tick=0,r._bounds=new Oe,r._boundsDirty=!0,r}return B(e,[{key:"clone",value:function(){var t=new e;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle=C({},this._fillStyle),t._strokeStyle=C({},this._strokeStyle),t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(t){this._fillStyle=Fe(t,e.defaultFillStyle)}},{key:"strokeStyle",get:function(){return this._strokeStyle},set:function(t){this._strokeStyle=Fe(t,e.defaultStrokeStyle)}},{key:"setFillStyle",value:function(t){return this._fillStyle=Fe(t,e.defaultFillStyle),this}},{key:"setStrokeStyle",value:function(t){return this._strokeStyle=Fe(t,e.defaultStrokeStyle),this}},{key:"texture",value:function(t,i,s,u,o,h){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:u||0,dw:o||t.frame.width,dh:h||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?ce.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}},{key:"beginPath",value:function(){return this._activePath=new Yt,this}},{key:"fill",value:function(t,i){var s,u=this.instructions[this.instructions.length-1];return this._tick===0&&u&&u.action==="stroke"?s=u.data.path:s=this._activePath.clone(),s?(t!=null&&(i!==void 0&&typeof t=="number"&&($(q,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:i}),this._fillStyle=Fe(t,e.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}},{key:"_initNextPathLocation",value:function(){var t=this._activePath.getLastPoint(ve.shared),i=t.x,s=t.y;this._activePath.clear(),this._activePath.moveTo(i,s)}},{key:"stroke",value:function(t){var i,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="fill"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(this._strokeStyle=Fe(t,e.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}},{key:"cut",value:function(){for(var t=0;t<2;t++){var i=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(s);else{i.data.hole=s;break}}return this._initNextPathLocation(),this}},{key:"arc",value:function(t,i,s,u,o,h){this._tick++;var l=this._transform;return this._activePath.arc(l.a*t+l.c*i+l.tx,l.b*t+l.d*i+l.ty,s,u,o,h),this}},{key:"arcTo",value:function(t,i,s,u,o){this._tick++;var h=this._transform;return this._activePath.arcTo(h.a*t+h.c*i+h.tx,h.b*t+h.d*i+h.ty,h.a*s+h.c*u+h.tx,h.b*s+h.d*u+h.ty,o),this}},{key:"arcToSvg",value:function(t,i,s,u,o,h,l){this._tick++;var c=this._transform;return this._activePath.arcToSvg(t,i,s,u,o,c.a*h+c.c*l+c.tx,c.b*h+c.d*l+c.ty),this}},{key:"bezierCurveTo",value:function(t,i,s,u,o,h,l){this._tick++;var c=this._transform;return this._activePath.bezierCurveTo(c.a*t+c.c*i+c.tx,c.b*t+c.d*i+c.ty,c.a*s+c.c*u+c.tx,c.b*s+c.d*u+c.ty,c.a*o+c.c*h+c.tx,c.b*o+c.d*h+c.ty,l),this}},{key:"closePath",value:function(){var t;return this._tick++,(t=this._activePath)===null||t===void 0||t.closePath(),this}},{key:"ellipse",value:function(t,i,s,u){return this._tick++,this._activePath.ellipse(t,i,s,u,this._transform.clone()),this}},{key:"circle",value:function(t,i,s){return this._tick++,this._activePath.circle(t,i,s,this._transform.clone()),this}},{key:"path",value:function(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}},{key:"lineTo",value:function(t,i){this._tick++;var s=this._transform;return this._activePath.lineTo(s.a*t+s.c*i+s.tx,s.b*t+s.d*i+s.ty),this}},{key:"moveTo",value:function(t,i){this._tick++;var s=this._transform,u=this._activePath.instructions,o=s.a*t+s.c*i+s.tx,h=s.b*t+s.d*i+s.ty;return u.length===1&&u[0].action==="moveTo"?(u[0].data[0]=o,u[0].data[1]=h,this):(this._activePath.moveTo(o,h),this)}},{key:"quadraticCurveTo",value:function(t,i,s,u,o){this._tick++;var h=this._transform;return this._activePath.quadraticCurveTo(h.a*t+h.c*i+h.tx,h.b*t+h.d*i+h.ty,h.a*s+h.c*u+h.tx,h.b*s+h.d*u+h.ty,o),this}},{key:"rect",value:function(t,i,s,u){return this._tick++,this._activePath.rect(t,i,s,u,this._transform.clone()),this}},{key:"roundRect",value:function(t,i,s,u,o){return this._tick++,this._activePath.roundRect(t,i,s,u,o,this._transform.clone()),this}},{key:"poly",value:function(t,i){return this._tick++,this._activePath.poly(t,i,this._transform.clone()),this}},{key:"regularPoly",value:function(t,i,s,u){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=arguments.length>5?arguments[5]:void 0;return this._tick++,this._activePath.regularPoly(t,i,s,u,o,h),this}},{key:"roundPoly",value:function(t,i,s,u,o,h){return this._tick++,this._activePath.roundPoly(t,i,s,u,o,h),this}},{key:"roundShape",value:function(t,i,s,u){return this._tick++,this._activePath.roundShape(t,i,s,u),this}},{key:"filletRect",value:function(t,i,s,u,o){return this._tick++,this._activePath.filletRect(t,i,s,u,o),this}},{key:"chamferRect",value:function(t,i,s,u,o,h){return this._tick++,this._activePath.chamferRect(t,i,s,u,o,h),this}},{key:"star",value:function(t,i,s,u){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;return this._tick++,this._activePath.star(t,i,s,u,o,h,this._transform.clone()),this}},{key:"svg",value:function(t){return this._tick++,hl(t,this),this}},{key:"restore",value:function(){var t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}},{key:"save",value:function(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:C({},this._fillStyle),strokeStyle:C({},this._strokeStyle)}),this}},{key:"getTransform",value:function(){return this._transform}},{key:"resetTransform",value:function(){return this._transform.identity(),this}},{key:"rotate",value:function(t){return this._transform.rotate(t),this}},{key:"scale",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return this._transform.scale(t,i),this}},{key:"setTransform",value:function(t,i,s,u,o,h){return t instanceof Y?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,i,s,u,o,h),this)}},{key:"transform",value:function(t,i,s,u,o,h){return t instanceof Y?(this._transform.append(t),this):(ai.set(t,i,s,u,o,h),this._transform.append(ai),this)}},{key:"translate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return this._transform.translate(t,i),this}},{key:"clear",value:function(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}},{key:"onUpdate",value:function(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}},{key:"bounds",get:function(){if(!this._boundsDirty)return this._bounds;var t=this._bounds;t.clear();for(var i=0;i<this.instructions.length;i++){var s=this.instructions[i],u=s.action;if(u==="fill"){var o=s.data;t.addBounds(o.path.bounds)}else if(u==="texture"){var h=s.data;t.addFrame(h.dx,h.dy,h.dx+h.dw,h.dy+h.dh,h.transform)}if(u==="stroke"){var l=s.data,c=l.style.width/2,f=l.path.bounds;t.addFrame(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c)}}return t}},{key:"containsPoint",value:function(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;for(var i=this.instructions,s=!1,u=0;u<i.length;u++){var o=i[u],h=o.data,l=h.path;if(!(!o.action||!l))for(var c=h.style,f=l.shapePath.shapePrimitives,v=0;v<f.length;v++){var d=f[v].shape;if(!(!c||!d)){var p=f[v].transform,g=p?p.applyInverse(t,dl):t;o.action==="fill"?s=d.contains(g.x,g.y):s=d.strokeContains(g.x,g.y,c.width);var y=h.hole;if(y){var b,m=(b=y.shapePath)===null||b===void 0?void 0:b.shapePrimitives;if(m)for(var w=0;w<m.length;w++)m[w].shape.contains(g.x,g.y)&&(s=!1)}if(s)return!0}}}return s}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners();var i=typeof t=="boolean"?t:t==null?void 0:t.texture;if(i){var s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(s),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(s)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}}]),e}(Ee);dn.defaultFillStyle={color:16777215,alpha:1,texture:V.WHITE,matrix:null,fill:null};dn.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:V.WHITE,matrix:null,fill:null};var Le=dn;function vn(a){var n,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=(n=tt.RETINA_PREFIX)===null||n===void 0?void 0:n.exec(a);return r?parseFloat(r[1]):e}function gn(a,n,e){a.label=e,a._sourceOrigin=e;var r=new V({source:a,label:e}),t=function(){delete n.promiseCache[e],le.has(e)&&le.remove(e)};return r.source.once("destroy",function(){n.promiseCache[e]&&(ae("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),t())}),r.once("destroy",function(){a.destroyed||(ae("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),t())}),r}var vl=["parseAsGraphicsContext"],gl=".svg",pl="image/svg+xml",ml={extension:{type:N.LoadParser,priority:$e.Low},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:function(n){return rt(n,pl)||nt(n,gl)},load:function(n,e,r){var t=this;return G(k().mark(function i(){var s;return k().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!((s=e.data.parseAsGraphicsContext)!==null&&s!==void 0?s:t.config.parseAsGraphicsContext)){o.next=2;break}return o.abrupt("return",bl(n));case 2:return o.abrupt("return",yl(n,e,r,t.config.crossOrigin));case 3:case"end":return o.stop()}},i)}))()},unload:function(n){n.destroy(!0)}};function yl(a,n,e,r){return Kr.apply(this,arguments)}function Kr(){return Kr=G(k().mark(function a(n,e,r,t){var i,s,u,o,h,l,c,f,v,d,p,g,y,b,m,w,A;return k().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,ne.get().fetch(n);case 2:return l=S.sent,S.next=5,l.blob();case 5:return c=S.sent,f=URL.createObjectURL(c),v=new Image,v.src=f,v.crossOrigin=t,S.next=12,v.decode();case 12:return URL.revokeObjectURL(f),d=document.createElement("canvas"),p=d.getContext("2d"),g=((i=e.data)===null||i===void 0?void 0:i.resolution)||vn(n),y=(s=(u=e.data)===null||u===void 0?void 0:u.width)!==null&&s!==void 0?s:v.width,b=(o=(h=e.data)===null||h===void 0?void 0:h.height)!==null&&o!==void 0?o:v.height,d.width=y*g,d.height=b*g,p.drawImage(v,0,0,y*g,b*g),m=e.data,m.parseAsGraphicsContext,w=qe(m,vl),A=new wt(C({resource:d,alphaMode:"premultiply-alpha-on-upload",resolution:g},w)),S.abrupt("return",gn(A,r,n));case 24:case"end":return S.stop()}},a)})),Kr.apply(this,arguments)}function bl(a){return Zr.apply(this,arguments)}function Zr(){return Zr=G(k().mark(function a(n){var e,r,t;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne.get().fetch(n);case 2:return e=s.sent,s.next=5,e.text();case 5:return r=s.sent,t=new Le,t.svg(r),s.abrupt("return",t);case 9:case"end":return s.stop()}},a)})),Zr.apply(this,arguments)}var _l=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,Ze=null,Qr=B(function a(){E(this,a),Ze||(Ze=URL.createObjectURL(new Blob([_l],{type:"application/javascript"}))),this.worker=new Worker(Ze)});Qr.revokeObjectURL=function(){Ze&&(URL.revokeObjectURL(Ze),Ze=null)};var xl=`(function () {
    'use strict';

    async function loadImageBitmap(url) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      const imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap;
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,Qe=null,wa=B(function a(){E(this,a),Qe||(Qe=URL.createObjectURL(new Blob([xl],{type:"application/javascript"}))),this.worker=new Worker(Qe)});wa.revokeObjectURL=function(){Qe&&(URL.revokeObjectURL(Qe),Qe=null)};var si=0,Sr,wl=function(){function a(){E(this,a),this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}return B(a,[{key:"isImageBitmapSupported",value:function(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(function(e){var r=new Qr,t=r.worker;t.addEventListener("message",function(i){t.terminate(),Qr.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}},{key:"loadImageBitmap",value:function(e){return this._run("loadImageBitmap",[e])}},{key:"_initWorkers",value:function(){var n=G(k().mark(function r(){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._initialized){i.next=2;break}return i.abrupt("return");case 2:this._initialized=!0;case 3:case"end":return i.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_getWorker",value:function(){var e=this;Sr===void 0&&(Sr=navigator.hardwareConcurrency||4);var r=this._workerPool.pop();return!r&&this._createdWorkers<Sr&&(this._createdWorkers++,r=new wa().worker,r.addEventListener("message",function(t){e._complete(t.data),e._returnWorker(t.target),e._next()})),r}},{key:"_returnWorker",value:function(e){this._workerPool.push(e)}},{key:"_complete",value:function(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}},{key:"_run",value:function(){var n=G(k().mark(function r(t,i){var s=this,u;return k().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._initWorkers();case 2:return u=new Promise(function(l,c){s._queue.push({id:t,arguments:i,resolve:l,reject:c})}),this._next(),h.abrupt("return",u);case 5:case"end":return h.stop()}},r,this)}));function e(r,t){return n.apply(this,arguments)}return e}()},{key:"_next",value:function(){if(this._queue.length){var e=this._getWorker();if(e){var r=this._queue.pop(),t=r.id;this._resolveHash[si]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:si++,id:t})}}}}]),a}(),ui=new wl,kl=[".jpeg",".jpg",".png",".webp",".avif"],Al=["image/jpeg","image/png","image/webp","image/avif"];function Sl(a){return Jr.apply(this,arguments)}function Jr(){return Jr=G(k().mark(function a(n){var e,r,t;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne.get().fetch(n);case 2:if(e=s.sent,e.ok){s.next=5;break}throw new Error("[loadImageBitmap] Failed to fetch ".concat(n,": ").concat(e.status," ").concat(e.statusText));case 5:return s.next=7,e.blob();case 7:return r=s.sent,s.next=10,createImageBitmap(r);case 10:return t=s.sent,s.abrupt("return",t);case 12:case"end":return s.stop()}},a)})),Jr.apply(this,arguments)}var ka={name:"loadTextures",extension:{type:N.LoadParser,priority:$e.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:function(n){return rt(n,Al)||nt(n,kl)},load:function(n,e,r){var t=this;return G(k().mark(function i(){var s,u,o;return k().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(u=null,!(globalThis.createImageBitmap&&t.config.preferCreateImageBitmap)){l.next=18;break}if(l.t0=t.config.preferWorkers,!l.t0){l.next=7;break}return l.next=6,ui.isImageBitmapSupported();case 6:l.t0=l.sent;case 7:if(!l.t0){l.next=13;break}return l.next=10,ui.loadImageBitmap(n);case 10:u=l.sent,l.next=16;break;case 13:return l.next=15,Sl(n);case 15:u=l.sent;case 16:l.next=21;break;case 18:return l.next=20,new Promise(function(c){u=new Image,u.crossOrigin=t.config.crossOrigin,u.src=n,u.complete?c(u):u.onload=function(){c(u)}});case 20:u=l.sent;case 21:return o=new wt(C({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:((s=e.data)===null||s===void 0?void 0:s.resolution)||vn(n)},e.data)),l.abrupt("return",gn(o,r,n));case 23:case"end":return l.stop()}},i)}))()},unload:function(n){n.destroy(!0)}},Aa=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Pl=Aa.map(function(a){return"video/".concat(a.substring(1))});function Cl(a,n,e){e===void 0&&!n.startsWith("data:")?a.crossOrigin=Tl(n):e!==!1&&(a.crossOrigin=typeof e=="string"?e:"anonymous")}function Ml(a){return new Promise(function(n,e){a.addEventListener("canplaythrough",r),a.addEventListener("error",t),a.load();function r(){i(),n()}function t(s){i(),e(s)}function i(){a.removeEventListener("canplaythrough",r),a.removeEventListener("error",t)}})}function Tl(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis.location;if(a.startsWith("data:"))return"";n=n||globalThis.location;var e=new URL(a,document.baseURI);return e.hostname!==n.hostname||e.port!==n.port||e.protocol!==n.protocol?"anonymous":""}var El={name:"loadVideo",extension:{type:N.LoadParser},config:null,test:function(n){var e=rt(n,Pl),r=nt(n,Aa);return e||r},load:function(n,e,r){return G(k().mark(function t(){var i,s,u,o,h,l,c,f;return k().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.t0=C,d.t1=C({},Dt.defaultOptions),d.t2={},d.t3=((i=e.data)===null||i===void 0?void 0:i.resolution)||vn(n),d.t4=(s=e.data)===null||s===void 0?void 0:s.alphaMode,d.t4){d.next=9;break}return d.next=8,ji();case 8:d.t4=d.sent;case 9:return d.t5=d.t4,d.t6={resolution:d.t3,alphaMode:d.t5},d.t7=e.data,u=(0,d.t0)(d.t1,d.t2,d.t6,d.t7),o=document.createElement("video"),h={preload:u.autoLoad!==!1?"auto":void 0,"webkit-playsinline":u.playsinline!==!1?"":void 0,playsinline:u.playsinline!==!1?"":void 0,muted:u.muted===!0?"":void 0,loop:u.loop===!0?"":void 0,autoplay:u.autoPlay!==!1?"":void 0},Object.keys(h).forEach(function(p){var g=h[p];g!==void 0&&o.setAttribute(p,g)}),u.muted===!0&&(o.muted=!0),Cl(o,n,u.crossorigin),l=document.createElement("source"),n.startsWith("data:")?c=n.slice(5,n.indexOf(";")):n.startsWith("blob:")||(f=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase(),c=Dt.MIME_TYPES[f]||"video/".concat(f)),l.src=n,c&&(l.type=c),d.abrupt("return",new Promise(function(p){var g=function(){var y=G(k().mark(function b(){var m;return k().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(m=new Dt(C(C({},u),{},{resource:o})),o.removeEventListener("canplay",g),!e.data.preload){A.next=5;break}return A.next=5,Ml(o);case 5:p(gn(m,r,n));case 6:case"end":return A.stop()}},b)}));return function(){return y.apply(this,arguments)}}();o.addEventListener("canplay",g),o.appendChild(l)}));case 23:case"end":return d.stop()}},t)}))()},unload:function(n){n.destroy(!0)}},Sa={extension:N.ResolveParser,test:ka.test,parse:function(n){var e,r;return{resolution:parseFloat((e=(r=tt.RETINA_PREFIX.exec(n))===null||r===void 0?void 0:r[1])!==null&&e!==void 0?e:"1"),format:n.split(".").pop(),src:n}}},Bl={extension:N.ResolveParser,test:function(n){return tt.RETINA_PREFIX.test(n)&&n.endsWith(".json")},parse:Sa.parse},Rl=function(){function a(){E(this,a),this._detections=[],this._initialized=!1,this.resolver=new tt,this.loader=new ju,this.cache=le,this._backgroundLoader=new zu(this.loader),this._backgroundLoader.active=!0,this.reset()}return B(a,[{key:"init",value:function(){var n=G(k().mark(function r(){var t,i,s,u,o,h,l,c,f=arguments;return k().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=f.length>0&&f[0]!==void 0?f[0]:{},!this._initialized){d.next=4;break}return ae("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?"),d.abrupt("return");case 4:if(this._initialized=!0,u.defaultSearchParams&&this.resolver.setDefaultSearchParams(u.defaultSearchParams),u.basePath&&(this.resolver.basePath=u.basePath),u.bundleIdentifier&&this.resolver.setBundleIdentifier(u.bundleIdentifier),!u.manifest){d.next=15;break}if(o=u.manifest,typeof o!="string"){d.next=14;break}return d.next=13,this.load(o);case 13:o=d.sent;case 14:this.resolver.addManifest(o);case 15:return h=(t=(i=u.texturePreference)===null||i===void 0?void 0:i.resolution)!==null&&t!==void 0?t:1,l=typeof h=="number"?[h]:h,d.next=19,this._detectFormats({preferredFormats:(s=u.texturePreference)===null||s===void 0?void 0:s.format,skipDetections:u.skipDetections,detections:this._detections});case 19:c=d.sent,this.resolver.prefer({params:{format:c,resolution:l}}),u.preferences&&this.setPreferences(u.preferences);case 22:case"end":return d.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"add",value:function(e){this.resolver.add(e)}},{key:"load",value:function(){var n=G(k().mark(function r(t,i){var s=this,u,o,h,l;return k().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this._initialized){f.next=3;break}return f.next=3,this.init();case 3:return u=Ht(t),o=Se(t).map(function(v){if(typeof v!="string"){var d=s.resolver.getAlias(v);return d.some(function(p){return!s.resolver.hasKey(p)})&&s.add(v),Array.isArray(d)?d[0]:d}return s.resolver.hasKey(v)||s.add({alias:v,src:v}),v}),h=this.resolver.resolve(o),f.next=8,this._mapLoadToResolve(h,i);case 8:return l=f.sent,f.abrupt("return",u?l[o[0]]:l);case 10:case"end":return f.stop()}},r,this)}));function e(r,t){return n.apply(this,arguments)}return e}()},{key:"addBundle",value:function(e,r){this.resolver.addBundle(e,r)}},{key:"loadBundle",value:function(){var n=G(k().mark(function r(t,i){var s=this,u,o,h,l,c,f,v,d;return k().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this._initialized){g.next=3;break}return g.next=3,this.init();case 3:return u=!1,typeof t=="string"&&(u=!0,t=[t]),o=this.resolver.resolveBundle(t),h={},l=Object.keys(o),c=0,f=0,v=function(){i==null||i(++c/f)},d=l.map(function(y){var b=o[y];return f+=Object.keys(b).length,s._mapLoadToResolve(b,v).then(function(m){h[y]=m})}),g.next=14,Promise.all(d);case 14:return g.abrupt("return",u?h[t[0]]:h);case 15:case"end":return g.stop()}},r,this)}));function e(r,t){return n.apply(this,arguments)}return e}()},{key:"backgroundLoad",value:function(){var n=G(k().mark(function r(t){var i;return k().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._initialized){u.next=3;break}return u.next=3,this.init();case 3:typeof t=="string"&&(t=[t]),i=this.resolver.resolve(t),this._backgroundLoader.add(Object.values(i));case 6:case"end":return u.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"backgroundLoadBundle",value:function(){var n=G(k().mark(function r(t){var i=this,s;return k().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this._initialized){o.next=3;break}return o.next=3,this.init();case 3:typeof t=="string"&&(t=[t]),s=this.resolver.resolveBundle(t),Object.values(s).forEach(function(h){i._backgroundLoader.add(Object.values(h))});case 6:case"end":return o.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}},{key:"get",value:function(e){if(typeof e=="string")return le.get(e);for(var r={},t=0;t<e.length;t++)r[t]=le.get(e[t]);return r}},{key:"_mapLoadToResolve",value:function(){var n=G(k().mark(function r(t,i){var s,u,o;return k().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=X(new Set(Object.values(t))),this._backgroundLoader.active=!1,l.next=4,this.loader.load(s,i);case 4:return u=l.sent,this._backgroundLoader.active=!0,o={},s.forEach(function(c){var f=u[c.src],v=[c.src];c.alias&&v.push.apply(v,X(c.alias)),v.forEach(function(d){o[d]=f}),le.set(v,f)}),l.abrupt("return",o);case 9:case"end":return l.stop()}},r,this)}));function e(r,t){return n.apply(this,arguments)}return e}()},{key:"unload",value:function(){var n=G(k().mark(function r(t){var i,s;return k().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this._initialized){o.next=3;break}return o.next=3,this.init();case 3:return i=Se(t).map(function(h){return typeof h!="string"?h.src:h}),s=this.resolver.resolve(i),o.next=7,this._unloadFromResolved(s);case 7:case"end":return o.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"unloadBundle",value:function(){var n=G(k().mark(function r(t){var i=this,s,u;return k().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this._initialized){h.next=3;break}return h.next=3,this.init();case 3:return t=Se(t),s=this.resolver.resolveBundle(t),u=Object.keys(s).map(function(l){return i._unloadFromResolved(s[l])}),h.next=8,Promise.all(u);case 8:case"end":return h.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"_unloadFromResolved",value:function(){var n=G(k().mark(function r(t){var i;return k().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=Object.values(t),i.forEach(function(o){le.remove(o.src)}),u.next=4,this.loader.unload(i);case 4:case"end":return u.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"_detectFormats",value:function(){var n=G(k().mark(function r(t){var i,s,u,o;return k().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=[],t.preferredFormats&&(i=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]),s=xt(t.detections),l.prev=3,s.s();case 5:if((u=s.n()).done){l.next=24;break}if(o=u.value,l.t0=t.skipDetections,l.t0){l.next=12;break}return l.next=11,o.test();case 11:l.t0=l.sent;case 12:if(!l.t0){l.next=18;break}return l.next=15,o.add(i);case 15:i=l.sent,l.next=22;break;case 18:if(t.skipDetections){l.next=22;break}return l.next=21,o.remove(i);case 21:i=l.sent;case 22:l.next=5;break;case 24:l.next=29;break;case 26:l.prev=26,l.t1=l.catch(3),s.e(l.t1);case 29:return l.prev=29,s.f(),l.finish(29);case 32:return i=i.filter(function(c,f){return i.indexOf(c)===f}),l.abrupt("return",i);case 34:case"end":return l.stop()}},r,null,[[3,26,29,32]])}));function e(r){return n.apply(this,arguments)}return e}()},{key:"detections",get:function(){return this._detections}},{key:"setPreferences",value:function(e){this.loader.parsers.forEach(function(r){r.config&&Object.keys(r.config).filter(function(t){return t in e}).forEach(function(t){r.config[t]=e[t]})})}}]),a}(),ft=new Rl;_e.handleByList(N.LoadParser,ft.loader.parsers).handleByList(N.ResolveParser,ft.resolver.parsers).handleByList(N.CacheParser,ft.cache.parsers).handleByList(N.DetectionParser,ft.detections);_e.add(Uu,Wu,Du,Xu,Vu,Hu,Yu,Ku,Ju,uo,ml,ka,El,Sa,Bl);var oi={loader:N.LoadParser,resolver:N.ResolveParser,cache:N.CacheParser,detection:N.DetectionParser};_e.handle(N.Asset,function(a){var n=a.ref;Object.entries(oi).filter(function(e){var r=ue(e,1),t=r[0];return!!n[t]}).forEach(function(e){var r,t=ue(e,2),i=t[0],s=t[1];return _e.add(Object.assign(n[i],{extension:(r=n[i].extension)!==null&&r!==void 0?r:s}))})},function(a){var n=a.ref;Object.keys(oi).filter(function(e){return!!n[e]}).forEach(function(e){return _e.remove(n[e])})});var Il=0,Fl=function(){function a(n){E(this,a),this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=n||{},this.enableFullScreen=!1}return B(a,[{key:"createTexture",value:function(e,r,t){var i=new Ie(C(C({},this.textureOptions),{},{width:e,height:r,resolution:1,antialias:t,autoGarbageCollect:!0}));return new V({source:i,label:"texturePool_".concat(Il++)})}},{key:"getOptimalTexture",value:function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=Math.ceil(e*t-1e-6),u=Math.ceil(r*t-1e-6);s=Cn(s),u=Cn(u);var o=(s<<17)+(u<<1)+(i?1:0);this._texturePool[o]||(this._texturePool[o]=[]);var h=this._texturePool[o].pop();return h||(h=this.createTexture(s,u,i)),h.source._resolution=t,h.source.width=s/t,h.source.height=u/t,h.source.pixelWidth=s,h.source.pixelHeight=u,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=r,h.updateUvs(),this._poolKeyHash[h.uid]=o,h}},{key:"getSameSizeTexture",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e.source;return this.getOptimalTexture(e.width,e.height,t._resolution,r)}},{key:"returnTexture",value:function(e){var r=this._poolKeyHash[e.uid];this._texturePool[r].push(e)}},{key:"clear",value:function(e){if(e=e!==!1,e)for(var r in this._texturePool){var t=this._texturePool[r];if(t)for(var i=0;i<t.length;i++)t[i].destroy(!0)}this._texturePool={}}}]),a}(),Xt=new Fl,Pa={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ll=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function Gl(a){for(var n=Pa[a],e=n.length,r=Ll,t="",i="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",s,u=0;u<a;u++){var o=i.replace("%index%",u.toString());s=u,u>=e&&(s=a-u-1),o=o.replace("%value%",n[s].toString()),t+=o,t+=`
`}return r=r.replace("%blur%",t),r=r.replace("%size%",a.toString()),r}var Ol=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function zl(a,n){var e=Math.ceil(a/2),r=Ol,t="",i;n?i="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":i="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(var s=0;s<a;s++){var u=i.replace("%index%",s.toString());u=u.replace("%sampleIndex%","".concat(s-(e-1),".0")),t+=u,t+=`
`}return r=r.replace("%blur%",t),r=r.replace("%size%",a.toString()),r=r.replace("%dimension%",n?"z":"w"),r}function Ul(a,n){var e=zl(n,a),r=Gl(n);return sn.from({vertex:e,fragment:r,name:"blur-".concat(a?"horizontal":"vertical","-pass-filter")})}var Dl=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let strength = gfu.uInputSize.w * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function Wl(a,n){for(var e=Pa[n],r=e.length,t=[],i=[],s=[],u=0;u<n;u++){t[u]="@location(".concat(u,") offset").concat(u,": vec2<f32>,"),a?i[u]="filteredCord + vec2(".concat(u-r+1," * strength, 0.0),"):i[u]="filteredCord + vec2(0.0, ".concat(u-r+1," * strength),");var o=u<r?u:n-u-1,h=e[o].toString();s[u]="finalColor += textureSample(uTexture, uSampler, offset".concat(u,") * ").concat(h,";")}var l=t.join(`
`),c=i.join(`
`),f=s.join(`
`),v=Dl.replace("%blur-struct%",l).replace("%blur-vertex-out%",c).replace("%blur-fragment-in%",l).replace("%blur-sampling%",f);return un.from({vertex:{source:v,entryPoint:"mainVertex"},fragment:{source:v,entryPoint:"mainFragment"}})}var Ca=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e),r=C(C({},e.defaultOptions),r);var i=Ul(r.horizontal,r.kernelSize),s=Wl(r.horizontal,r.kernelSize);return t=n.call(this,C({glProgram:i,gpuProgram:s,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}}},r)),t.horizontal=r.horizontal,t._quality=0,t.quality=r.quality,t.blur=r.strength,t._uniforms=t.resources.blurUniforms.uniforms,t}return B(e,[{key:"apply",value:function(t,i,s,u){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)t.applyFilter(this,i,s,u);else{var o=Xt.getSameSizeTexture(i),h=i,l=o;this._state.blend=!1;for(var c=0;c<this.passes-1;c++){t.applyFilter(this,h,l,t.renderer.type===pt.WEBGPU);var f=l;l=h,h=f}this._state.blend=!0,t.applyFilter(this,h,s,u),Xt.returnTexture(o)}}},{key:"blur",get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(ea);Ca.defaultOptions={strength:8,quality:4,kernelSize:5};var Pr=Ca,Nl=["strength","quality"],Ma=function(a){Q(e,a);var n=J(e);function e(){var r,t;E(this,e);var i=(r=arguments.length<=0?void 0:arguments[0])!==null&&r!==void 0?r:{};typeof i=="number"&&($(q,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),i={strength:i},!(arguments.length<=1)&&arguments[1]&&(i.quality=arguments.length<=1?void 0:arguments[1]),!(arguments.length<=2)&&arguments[2]&&(i.resolution=arguments.length<=2?void 0:arguments[2]),!(arguments.length<=3)&&arguments[3]&&(i.kernelSize=arguments.length<=3?void 0:arguments[3])),i=C(C({},Pr.defaultOptions),i);var s=i,u=s.strength,o=s.quality,h=qe(s,Nl);return t=n.call(this,C(C({},h),{},{compatibleRenderers:pt.BOTH,resources:{}})),t._repeatEdgePixels=!1,t.blurXFilter=new Pr(C({horizontal:!1},i)),t.blurYFilter=new Pr(C({horizontal:!0},i)),t.quality=o,t.blur=u,t.repeatEdgePixels=!1,t}return B(e,[{key:"apply",value:function(t,i,s,u){var o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){var l=Xt.getSameSizeTexture(i);this.blurXFilter.apply(t,i,l,!0),this.blurYFilter.apply(t,l,s,u),Xt.returnTexture(l)}else h?this.blurYFilter.apply(t,i,s,u):this.blurXFilter.apply(t,i,s,u)}},{key:"updatePadding",value:function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}},{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()}},{key:"blendMode",get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t}},{key:"repeatEdgePixels",get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()}}]),e}(ea);Ma.defaultOptions={strength:8,quality:4,kernelSize:5};var Vl=["context","roundPixels"],li=function(a){Q(e,a);var n=J(e);function e(r){var t;E(this,e),r instanceof Le&&(r={context:r});var i=r||{},s=i.context,u=i.roundPixels,o=qe(i,Vl);return t=n.call(this,C({label:"Graphics"},o)),t.canBundle=!0,t.renderPipeId="graphics",t._roundPixels=0,s?t._context=s:t._context=t._ownedContext=new Le,t._context.on("update",t.onViewUpdate,fe(t)),t.allowChildren=!1,t.roundPixels=u??!1,t}return B(e,[{key:"context",get:function(){return this._context},set:function(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}},{key:"bounds",get:function(){return this._context.bounds}},{key:"addBounds",value:function(t){t.addBounds(this._context.bounds)}},{key:"containsPoint",value:function(t){return this._context.containsPoint(t)}},{key:"roundPixels",get:function(){return!!this._roundPixels},set:function(t){this._roundPixels=t?1:0}},{key:"onViewUpdate",value:function(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}},{key:"destroy",value:function(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,Ge(Me(e.prototype),"destroy",this).call(this,t)}},{key:"_callContextMethod",value:function(t,i){var s;return(s=this.context)[t].apply(s,X(i)),this}},{key:"setFillStyle",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("setFillStyle",i)}},{key:"setStrokeStyle",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("setStrokeStyle",i)}},{key:"fill",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("fill",i)}},{key:"stroke",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("stroke",i)}},{key:"texture",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("texture",i)}},{key:"beginPath",value:function(){return this._callContextMethod("beginPath",[])}},{key:"cut",value:function(){return this._callContextMethod("cut",[])}},{key:"arc",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("arc",i)}},{key:"arcTo",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("arcTo",i)}},{key:"arcToSvg",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("arcToSvg",i)}},{key:"bezierCurveTo",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("bezierCurveTo",i)}},{key:"closePath",value:function(){return this._callContextMethod("closePath",[])}},{key:"ellipse",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("ellipse",i)}},{key:"circle",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("circle",i)}},{key:"path",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("path",i)}},{key:"lineTo",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("lineTo",i)}},{key:"moveTo",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("moveTo",i)}},{key:"quadraticCurveTo",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("quadraticCurveTo",i)}},{key:"rect",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("rect",i)}},{key:"roundRect",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("roundRect",i)}},{key:"poly",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("poly",i)}},{key:"regularPoly",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("regularPoly",i)}},{key:"roundPoly",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("roundPoly",i)}},{key:"roundShape",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("roundShape",i)}},{key:"filletRect",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("filletRect",i)}},{key:"chamferRect",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("chamferRect",i)}},{key:"star",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("star",i)}},{key:"svg",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("svg",i)}},{key:"restore",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("restore",i)}},{key:"save",value:function(){return this._callContextMethod("save",[])}},{key:"getTransform",value:function(){return this.context.getTransform()}},{key:"resetTransform",value:function(){return this._callContextMethod("resetTransform",[])}},{key:"rotateTransform",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("rotate",i)}},{key:"scaleTransform",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("scale",i)}},{key:"setTransform",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("setTransform",i)}},{key:"transform",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("transform",i)}},{key:"translateTransform",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("translate",i)}},{key:"clear",value:function(){return this._callContextMethod("clear",[])}},{key:"fillStyle",get:function(){return this._context.fillStyle},set:function(t){this._context.fillStyle=t}},{key:"strokeStyle",get:function(){return this._context.strokeStyle},set:function(t){this._context.strokeStyle=t}},{key:"clone",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t)return new e(this._context.clone());this._ownedContext=null;var i=new e(this._context);return i}},{key:"lineStyle",value:function(t,i,s){$(q,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");var u={};return t&&(u.width=t),i&&(u.color=i),s&&(u.alpha=s),this.context.strokeStyle=u,this}},{key:"beginFill",value:function(t,i){$(q,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");var s={};return t&&(s.color=t),i&&(s.alpha=i),this.context.fillStyle=s,this}},{key:"endFill",value:function(){$(q,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();var t=this.context.strokeStyle;return(t.width!==Le.defaultStrokeStyle.width||t.color!==Le.defaultStrokeStyle.color||t.alpha!==Le.defaultStrokeStyle.alpha)&&this.context.stroke(),this}},{key:"drawCircle",value:function(){$(q,"Graphics#drawCircle has been renamed to Graphics#circle");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("circle",i)}},{key:"drawEllipse",value:function(){$(q,"Graphics#drawEllipse has been renamed to Graphics#ellipse");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("ellipse",i)}},{key:"drawPolygon",value:function(){$(q,"Graphics#drawPolygon has been renamed to Graphics#poly");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("poly",i)}},{key:"drawRect",value:function(){$(q,"Graphics#drawRect has been renamed to Graphics#rect");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("rect",i)}},{key:"drawRoundedRect",value:function(){$(q,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("roundRect",i)}},{key:"drawStar",value:function(){$(q,"Graphics#drawStar has been renamed to Graphics#star");for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this._callContextMethod("star",i)}}]),e}(oe),Hl=["text","resolution","style","anchor","width","height","roundPixels"],Yl=function(a){Q(e,a);var n=J(e);function e(r,t){var i;E(this,e);var s=r.text,u=r.resolution,o=r.style,h=r.anchor,l=r.width,c=r.height,f=r.roundPixels,v=qe(r,Hl);return i=n.call(this,C({},v)),i.batched=!0,i.resolution=null,i._didTextUpdate=!0,i._roundPixels=0,i._bounds=new Oe,i._boundsDirty=!0,i._styleClass=t,i.text=s??"",i.style=o,i.resolution=u??null,i.allowChildren=!1,i._anchor=new ye({_onUpdate:function(){i.onViewUpdate()}}),h&&(i.anchor=h),i.roundPixels=f??!1,l&&(i.width=l),c&&(i.height=c),i}return B(e,[{key:"anchor",get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}},{key:"roundPixels",get:function(){return!!this._roundPixels},set:function(t){this._roundPixels=t?1:0}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}},{key:"style",get:function(){return this._style},set:function(t){var i;t=t||{},(i=this._style)===null||i===void 0||i.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}},{key:"bounds",get:function(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}},{key:"width",get:function(){return Math.abs(this.scale.x)*this.bounds.width},set:function(t){this._setWidth(t,this.bounds.width)}},{key:"height",get:function(){return Math.abs(this.scale.y)*this.bounds.height},set:function(t){this._setHeight(t,this.bounds.height)}},{key:"getSize",value:function(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}},{key:"setSize",value:function(t,i){var s,u;if(he(t)!=="object")s=t,u=i??t;else{var o;s=t.width,u=(o=t.height)!==null&&o!==void 0?o:t.width}s!==void 0&&this._setWidth(s,this.bounds.width),u!==void 0&&this._setHeight(u,this.bounds.height)}},{key:"addBounds",value:function(t){var i=this.bounds;t.addFrame(i.minX,i.minY,i.maxX,i.maxY)}},{key:"containsPoint",value:function(t){var i=this.bounds.maxX,s=this.bounds.maxY,u=-i*this.anchor.x,o=0;return t.x>=u&&t.x<=u+i&&(o=-s*this.anchor.y,t.y>=o&&t.y<=o+s)}},{key:"onViewUpdate",value:function(){this._didChangeId+=4096,this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this._didTextUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}},{key:"_getKey",value:function(){return"".concat(this.text,":").concat(this._style.styleKey)}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ge(Me(e.prototype),"destroy",this).call(this,t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}]),e}(oe);function Xl(a,n){var e,r=(e=a[0])!==null&&e!==void 0?e:{};return(typeof r=="string"||a[1])&&($(q,"use new ".concat(n,'({ text: "hi!", style }) instead')),r={text:r,style:a[1]}),r}var jl=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ql(a){var n=typeof a.fontSize=="number"?"".concat(a.fontSize,"px"):a.fontSize,e=a.fontFamily;Array.isArray(a.fontFamily)||(e=a.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var t=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(t)&&!jl.includes(t)&&(t='"'.concat(t,'"')),e[r]=t}return"".concat(a.fontStyle," ").concat(a.fontVariant," ").concat(a.fontWeight," ").concat(n," ").concat(e.join(","))}var Cr={willReadFrequently:!0},Pe=function(){function a(n,e,r,t,i,s,u,o,h){E(this,a),this.text=n,this.style=e,this.width=r,this.height=t,this.lines=i,this.lineWidths=s,this.lineHeight=u,this.maxLineWidth=o,this.fontProperties=h}return B(a,null,[{key:"experimentalLetterSpacingSupported",get:function(){var e=a._experimentalLetterSpacingSupported;if(e!==void 0){var r=ne.get().getCanvasRenderingContext2D().prototype;e=a._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}},{key:"measureText",value:function(){var e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a._canvas,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.wordWrap,u="".concat(r,":").concat(t.styleKey);if(a._measurementCache[u])return a._measurementCache[u];var o=ql(t),h=a.measureFont(o);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);var l=a.__context;l.font=o;for(var c=s?a._wordWrap(r,t,i):r,f=c.split(/(?:\r\n|\r|\n)/),v=new Array(f.length),d=0,p=0;p<f.length;p++){var g=a._measureText(f[p],t.letterSpacing,l);v[p]=g,d=Math.max(d,g)}var y=((e=t._stroke)===null||e===void 0?void 0:e.width)||0,b=d+y;t.dropShadow&&(b+=t.dropShadow.distance);var m=t.lineHeight||h.fontSize+y,w=Math.max(m,h.fontSize+y*2)+(f.length-1)*(m+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);var A=new a(r,t,b,w,f,v,m+t.leading,d,h);return A}},{key:"_measureText",value:function(e,r,t){var i=!1;a.experimentalLetterSpacingSupported&&(a.experimentalLetterSpacing?(t.letterSpacing="".concat(r,"px"),t.textLetterSpacing="".concat(r,"px"),i=!0):(t.letterSpacing="0px",t.textLetterSpacing="0px"));var s=t.measureText(e).width;return s>0&&(i?s-=r:s+=(a.graphemeSegmenter(e).length-1)*r),s}},{key:"_wordWrap",value:function(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a._canvas,i=t.getContext("2d",Cr),s=0,u="",o="",h=Object.create(null),l=r.letterSpacing,c=r.whiteSpace,f=a._collapseSpaces(c),v=a._collapseNewlines(c),d=!f,p=r.wordWrapWidth+l,g=a._tokenize(e),y=0;y<g.length;y++){var b=g[y];if(a._isNewline(b)){if(!v){o+=a._addLine(u),d=!f,u="",s=0;continue}b=" "}if(f){var m=a.isBreakingSpace(b),w=a.isBreakingSpace(u[u.length-1]);if(m&&w)continue}var A=a._getFromCache(b,l,h,i);if(A>p)if(u!==""&&(o+=a._addLine(u),u="",s=0),a.canBreakWords(b,r.breakWords))for(var I=a.wordWrapSplit(b),S=0;S<I.length;S++){for(var M=I[S],W=M,z=1;I[S+z];){var U=I[S+z];if(!a.canBreakChars(W,U,b,S,r.breakWords))M+=U;else break;W=U,z++}S+=z-1;var T=a._getFromCache(M,l,h,i);T+s>p&&(o+=a._addLine(u),d=!1,u="",s=0),u+=M,s+=T}else{u.length>0&&(o+=a._addLine(u),u="",s=0);var R=y===g.length-1;o+=a._addLine(b,!R),d=!1,u="",s=0}else A+s>p&&(d=!1,o+=a._addLine(u),u="",s=0),(u.length>0||!a.isBreakingSpace(b)||d)&&(u+=b,s+=A)}return o+=a._addLine(u,!1),o}},{key:"_addLine",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e=a._trimRight(e),e=r?"".concat(e,`
`):e,e}},{key:"_getFromCache",value:function(e,r,t,i){var s=t[e];return typeof s!="number"&&(s=a._measureText(e,r,i)+r,t[e]=s),s}},{key:"_collapseSpaces",value:function(e){return e==="normal"||e==="pre-line"}},{key:"_collapseNewlines",value:function(e){return e==="normal"}},{key:"_trimRight",value:function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var t=e[r];if(!a.isBreakingSpace(t))break;e=e.slice(0,-1)}return e}},{key:"_isNewline",value:function(e){return typeof e!="string"?!1:a._newlines.includes(e.charCodeAt(0))}},{key:"isBreakingSpace",value:function(e,r){return typeof e!="string"?!1:a._breakingSpaces.includes(e.charCodeAt(0))}},{key:"_tokenize",value:function(e){var r=[],t="";if(typeof e!="string")return r;for(var i=0;i<e.length;i++){var s=e[i],u=e[i+1];if(a.isBreakingSpace(s,u)||a._isNewline(s)){t!==""&&(r.push(t),t=""),r.push(s);continue}t+=s}return t!==""&&r.push(t),r}},{key:"canBreakWords",value:function(e,r){return r}},{key:"canBreakChars",value:function(e,r,t,i,s){return!0}},{key:"wordWrapSplit",value:function(e){return a.graphemeSegmenter(e)}},{key:"measureFont",value:function(e){if(a._fonts[e])return a._fonts[e];var r=a._context;r.font=e;var t=r.measureText(a.METRICS_STRING+a.BASELINE_SYMBOL),i={ascent:t.actualBoundingBoxAscent,descent:t.actualBoundingBoxDescent,fontSize:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent};return a._fonts[e]=i,i}},{key:"clearMetrics",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";e?delete a._fonts[e]:a._fonts={}}},{key:"_canvas",get:function(){if(!a.__canvas){var e;try{var r=new OffscreenCanvas(0,0),t=r.getContext("2d",Cr);if(t!=null&&t.measureText)return a.__canvas=r,r;e=ne.get().createCanvas()}catch{e=ne.get().createCanvas()}e.width=e.height=10,a.__canvas=e}return a.__canvas}},{key:"_context",get:function(){return a.__context||(a.__context=a._canvas.getContext("2d",Cr)),a.__context}}]),a}();Pe.METRICS_STRING="|q";Pe.BASELINE_SYMBOL="M";Pe.BASELINE_MULTIPLIER=1.4;Pe.HEIGHT_MULTIPLIER=2;Pe.graphemeSegmenter=function(a){if(typeof((a=Intl)===null||a===void 0?void 0:a.Segmenter)=="function"){var n=new Intl.Segmenter;return function(e){return X(n.segment(e)).map(function(r){return r.segment})}}return function(e){return X(e)}}();Pe.experimentalLetterSpacing=!1;Pe._fonts={};Pe._newlines=[10,13];Pe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Pe._measurementCache={};var $l=Pe,hi=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function Kl(a){for(var n=[],e=0,r=0;r<hi.length;r++){var t=hi[r];n[e++]=a[t]}return e=Ta(a._fill,n,e),e=Zl(a._stroke,n,e),n.join("-")}function Ta(a,n,e){var r;return a&&(n[e++]=a.color,n[e++]=a.alpha,n[e++]=(r=a.fill)===null||r===void 0?void 0:r.uid),e}function Zl(a,n,e){return a&&(e=Ta(a,n,e),n[e++]=a.width,n[e++]=a.alignment,n[e++]=a.cap,n[e++]=a.join,n[e++]=a.miterLimit),e}var pn=function(a){Q(e,a);var n=J(e);function e(){var r,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E(this,e),r=n.call(this),Ql(t);var i=C(C({},e.defaultTextStyle),t);for(var s in i){var u=s;r[u]=i[s]}return r.update(),r}return B(e,[{key:"align",get:function(){return this._align},set:function(t){this._align=t,this.update()}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords=t,this.update()}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){t!==null&&he(t)==="object"?this._dropShadow=C(C({},e.defaultDropShadow),t):this._dropShadow=t?C({},e.defaultDropShadow):null,this.update()}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily=t,this.update()}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle=t,this.update()}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant=t,this.update()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight=t,this.update()}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading=t,this.update()}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing=t,this.update()}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this.update()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this.update()}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim=t,this.update()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.update()}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace=t,this.update()}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap=t,this.update()}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth=t,this.update()}},{key:"fill",get:function(){return this._originalFill},set:function(t){t!==this._originalFill&&(this._originalFill=t,this._fill=Fe(t===0?"black":t,Le.defaultFillStyle),this.update())}},{key:"stroke",get:function(){return this._originalStroke},set:function(t){t!==this._originalStroke&&(this._originalStroke=t,this._stroke=Fe(t,Le.defaultStrokeStyle),this.update())}},{key:"_generateKey",value:function(){return this._styleKey=Kl(this),this._styleKey}},{key:"update",value:function(){this._styleKey=null,this.emit("update",this)}},{key:"reset",value:function(){var t=e.defaultTextStyle;for(var i in t)this[i]=t[i]}},{key:"styleKey",get:function(){return this._styleKey||this._generateKey()}},{key:"clone",value:function(){return new e({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}},{key:"destroy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.removeAllListeners();var i=typeof t=="boolean"?t:t==null?void 0:t.texture;if(i){var s,u,o,h,l=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(s=this._fill)!==null&&s!==void 0&&s.texture&&this._fill.texture.destroy(l),(u=this._originalFill)!==null&&u!==void 0&&u.texture&&this._originalFill.texture.destroy(l),(o=this._stroke)!==null&&o!==void 0&&o.texture&&this._stroke.texture.destroy(l),(h=this._originalStroke)!==null&&h!==void 0&&h.texture&&this._originalStroke.texture.destroy(l)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}}]),e}(Ee);pn.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};pn.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var mn=pn;function Ql(a){var n=a;if(typeof n.dropShadow=="boolean"&&n.dropShadow){var e,r,t,i,s,u=mn.defaultDropShadow;a.dropShadow={alpha:(e=n.dropShadowAlpha)!==null&&e!==void 0?e:u.alpha,angle:(r=n.dropShadowAngle)!==null&&r!==void 0?r:u.angle,blur:(t=n.dropShadowBlur)!==null&&t!==void 0?t:u.blur,color:(i=n.dropShadowColor)!==null&&i!==void 0?i:u.color,distance:(s=n.dropShadowDistance)!==null&&s!==void 0?s:u.distance}}if(n.strokeThickness){$(q,"strokeThickness is now a part of stroke");var o=n.stroke;a.stroke={color:o,width:n.strokeThickness}}if(Array.isArray(n.fill)){$(q,"gradient fill is now a fill pattern: `new FillGradient(...)`");var h=new fn(0,0,0,a.fontSize*1.7),l=n.fill.map(function(c){return ce.shared.setValue(c).toNumber()});l.forEach(function(c,f){var v,d=(v=n.fillGradientStops[f])!==null&&v!==void 0?v:f/l.length;h.addColorStop(d,c)}),a.fill={fill:h}}}var Jl=function(a){Q(e,a);var n=J(e);function e(){var r;E(this,e);for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];var u=Xl(i,"Text");return r=n.call(this,u,mn),r.renderPipeId="text",r}return B(e,[{key:"_updateBounds",value:function(){var t=this._bounds,i=this._style.padding,s=this._anchor,u=$l.measureText(this._text,this._style),o=u.width,h=u.height;t.minX=-s._x*o-i,t.maxX=t.minX+o,t.minY=-s._y*h-i,t.maxY=t.minY+h}}]),e}(Yl);_e.add(Xa,ja);const ci=""+new URL("M00_000-fd75ec17.jpg",import.meta.url).href,fi=""+new URL("M01_000-2e01bc2f.jpg",import.meta.url).href,di=""+new URL("M03_000-4de62aae.jpg",import.meta.url).href,vi=""+new URL("M04_000-a1dfd8cd.jpg",import.meta.url).href,gi=""+new URL("M05_000-d7087bdd.jpg",import.meta.url).href,pi=""+new URL("M06_000-64603275.jpg",import.meta.url).href,mi=""+new URL("M07_000-a2600da3.jpg",import.meta.url).href,yi=""+new URL("M08_000-665aad25.jpg",import.meta.url).href,bi=""+new URL("M09_000-ae46ebea.jpg",import.meta.url).href,_i=""+new URL("M10_000-0d943213.jpg",import.meta.url).href,xi=""+new URL("M11_000-4f17551b.jpg",import.meta.url).href,wi=""+new URL("M12_000-5b1e4e27.jpg",import.meta.url).href;var eh=function(){function a(){var n=this;E(this,a),gt(this,"startPlay",function(){if(!n.running){n.running=!0;for(var e=0;e<n.reels.length;e++){var r=n.reels[e],t=Math.floor(Math.random()*3),i=r.position+10+e*5+t,s=2500+e*600+t*600;n.tweenTo(r,"position",i,s,n.backout(.5),null,e===n.reels.length-1?n.reelsComplete:null)}}}),gt(this,"reelsComplete",function(){n.running=!1}),this.app=new oa,this.reelWidth=160,this.symbolSize=140,this.running=!1,this.tweening=[],this.reels=[],this.slotTextures=[]}return B(a,[{key:"init",value:function(){var n=G(k().mark(function r(){var t=this;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.app.init({background:"#1099bb",resizeTo:window});case 2:return document.body.appendChild(this.app.canvas),s.next=5,ft.load([ci,fi,di,vi,gi,pi,mi,yi,bi,_i,xi,wi]);case 5:this.slotTextures=[V.from(ci),V.from(fi),V.from(di),V.from(vi),V.from(gi),V.from(pi),V.from(mi),V.from(yi),V.from(bi),V.from(_i),V.from(xi),V.from(wi)],this.createReels(),this.createGraphics(),this.app.ticker.add(function(){return t.update()});case 9:case"end":return s.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"createReels",value:function(){for(var e=new oe,r=(this.app.screen.height-this.symbolSize*3)/2,t=0;t<5;t++){var i=new oe;i.x=t*this.reelWidth,e.addChild(i);var s={container:i,symbols:[],position:0,previousPosition:0,blur:new Ma};s.blur.blurX=0,s.blur.blurY=0,i.filters=[s.blur];for(var u=0;u<4;u++){var o=new Lr(this.slotTextures[Math.floor(Math.random()*this.slotTextures.length)]);o.y=u*this.symbolSize,o.scale.x=o.scale.y=Math.min(this.symbolSize/o.width,this.symbolSize/o.height),o.x=Math.round((this.symbolSize-o.width)/2),s.symbols.push(o),i.addChild(o)}this.reels.push(s)}e.x=(this.app.screen.width-e.width)/2,e.y=r,this.app.stage.addChild(e)}},{key:"createGraphics",value:function(){var e=this,r=(this.app.screen.height-this.symbolSize*3)/2,t=new li().rect(0,0,this.app.screen.width,r).fill({color:0}),i=new li().rect(0,this.symbolSize*3+r,this.app.screen.width,r).fill({color:0}),s=new fn(0,0,0,36*1.7),u=[16777215,65433].map(function(l){return ce.shared.setValue(l).toNumber()});u.forEach(function(l,c){var f=c/u.length;s.addColorStop(f,l)});var o=new mn({fontFamily:"Arial",fontSize:36,fontStyle:"italic",fontWeight:"bold",fill:{fill:s},stroke:{color:4855888,width:5},dropShadow:{color:0,angle:Math.PI/6,blur:4,distance:6},wordWrap:!0,wordWrapWidth:440}),h=new Jl("Spin!!!",o);h.x=Math.round((i.width-h.width)/2),h.y=this.app.screen.height-r+Math.round((r-h.height)/2),i.addChild(h),this.app.stage.addChild(t),this.app.stage.addChild(i),i.eventMode="static",i.cursor="pointer",i.addListener("pointerdown",function(){e.startPlay()})}},{key:"update",value:function(){for(var e=0;e<this.reels.length;e++){var r=this.reels[e];r.blur.blurY=(r.position-r.previousPosition)*8,r.previousPosition=r.position;for(var t=0;t<r.symbols.length;t++){var i=r.symbols[t],s=i.y;i.y=(r.position+t)%r.symbols.length*this.symbolSize-this.symbolSize,i.y<0&&s>this.symbolSize&&(i.texture=this.slotTextures[Math.floor(Math.random()*this.slotTextures.length)],i.scale.x=i.scale.y=Math.min(this.symbolSize/i.texture.width,this.symbolSize/i.texture.height),i.x=Math.round((this.symbolSize-i.width)/2))}}for(var u=Date.now(),o=[],h=0;h<this.tweening.length;h++){var l=this.tweening[h],c=Math.min(1,(u-l.start)/l.time);l.object[l.property]=this.lerp(l.propertyBeginValue,l.target,l.easing(c)),l.change&&l.change(l),c===1&&(l.object[l.property]=l.target,l.complete&&l.complete(l),o.push(l))}for(var f=0;f<o.length;f++)this.tweening.splice(this.tweening.indexOf(o[f]),1)}},{key:"tweenTo",value:function(e,r,t,i,s,u,o){var h={object:e,property:r,propertyBeginValue:e[r],target:t,easing:s,time:i,change:u,complete:o,start:Date.now()};return this.tweening.push(h),h}},{key:"lerp",value:function(e,r,t){return e*(1-t)+r*t}},{key:"backout",value:function(e){return function(r){return--r*r*((e+1)*r+e)+1}}}]),a}();G(k().mark(function a(){var n;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=new eh,r.next=3,n.init();case 3:case"end":return r.stop()}},a)}))();export{gu as $,Y as A,Wt as B,oe as C,ne as D,N as E,V as F,un as G,sa as H,qe as I,is as J,ea as K,Eo as L,ca as M,So as N,Oe as O,ve as P,Ae as Q,pt as R,fu as S,Et as T,ou as U,Ii as V,Xt as W,Lr as X,ys as Y,tu as Z,B as _,E as a,ee as a0,pe as a1,Iu as a2,Fo as a3,Dn as a4,Bs as a5,sr as a6,ce as a7,Li as a8,$ as a9,q as aa,wo as ab,et as ac,fl as ad,fn as ae,ql as af,$l as ag,wt as ah,Ge as ai,Me as aj,le as ak,mn as al,Kl as am,th as an,ga as ao,ue as ap,$e as aq,Te as ar,Nn as as,li as at,as as au,ma as av,Gr as b,Q as c,J as d,Ee as e,he as f,C as g,_e as h,X as i,sn as j,hu as k,Po as l,Kn as m,Cn as n,G as o,k as p,To as q,ps as r,de as s,_t as t,an as u,ia as v,ae as w,Yi as x,Ie as y,fe as z};
